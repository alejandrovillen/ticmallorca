<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">JBossWS-CXF Guide</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.72.0"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="description" content="This book is the guide to JBoss Web Services with Apache CXF based stack. It covers information, details and usage of JBossWS-CXF stack, as well as some tutorials / examples."/></head><body><div class="book" lang="en-US"><div class="titlepage"><div><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><div><h1 class="title"><a id="d0e1"/>JBossWS-CXF Guide</h1></div><div><h2 class="subtitle">JBoss Web Services with Apache CXF based stack</h2></div><div><div xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="authorgroup"><div class="authors">by <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Alessio</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Soldano</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Richard</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Opalka</span>, and <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Jim</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Ma</span></div><div class="editors"/><div class="others"/></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>This book is the guide to JBoss Web Services with Apache CXF based stack. It covers information, details and usage of JBossWS-CXF stack, as well as some tutorials / examples.</p></div></div></div><hr/></div><div class="toc"><dl><dt><span class="part"><a href="#Main documentation">I. Main Documentation</a></span></dt><dd><dl><dt><span class="chapter"><a href="#chap_JBossWS-QuickStart">1. JBossWS-QuickStart</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-QuickStart_Right_on">1.1. Right on'</a></span></dt><dt><span class="section"><a href="#JBossWS-QuickStart_Developing_web_service_implementations">1.2. Developing web service implementations</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-QuickStart_Deploying_service_implementations">1.2.1. Deploying service implementations</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-QuickStart_Consuming_web_services">1.3. Consuming web services</a></span></dt><dt><span class="section"><a href="#JBossWS-QuickStart_Appendix">1.4. Appendix</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-QuickStart_Profile_MgmtService">1.4.1. ProfileMgmtService.wsdl</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-UserGuide">2. JBossWS-UserGuide</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-UserGuide_Common_User_Guide">2.1. Common User Guide</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-UserGuide_Web_Service_Concepts">2.1.1. Web Service Concepts</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Web_Service_Endpoints">2.1.2. Web Service Endpoints</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Web_Service_Clients">2.1.3. Web Service Clients</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Common_API">2.1.4. Common API</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Tools">2.1.5. Tools</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Configuration">2.1.6. Configuration</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-StackCXFUserGuide">3. JBossWS-StackCXFUserGuide</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_JBossWS_CXF_Integration">3.1. JBossWS CXF Integration</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_Creating_a_Bus_instance">3.1.1. Creating a Bus instance</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_Server_Side_Integration_Customization">3.1.2. Server Side Integration Customization</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_Extended_Features">3.2. Extended Features</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSAddressing">3.2.1. WS-Addressing</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSReliableMessaging">3.2.2. WS-ReliableMessaging</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSPolicy">3.2.3. WS-Policy</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSSecurity">3.2.4. WS-Security</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_JMS_transport">3.2.5. JMS transport</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_HTTP_server_transport_setup">3.3. HTTP server transport setup</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_SOAP_Message_Logging">3.4. SOAP Message Logging</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-JAX-WSTools">4. JBossWS-JAX-WSTools</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-JAX-WSTools_Server_side">4.1. Server side</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-JAX-WSTools_BottomUp_Using_wsprovide">4.1.1. Bottom-Up (Using wsprovide)</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSTools_TopDown_Using_wsconsume">4.1.2. Top-Down (Using wsconsume)</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-JAX-WSTools_Client_Side">4.2. Client Side</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSTools_Commandline_Maven_Plugin_and_Ant_Task_Reference">4.3. Command-line, Maven Plugin and Ant Task Reference</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSTools_JAXWS_binding_customization">4.4. JAX-WS binding customization</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-wsconsume">5. JBossWS-wsconsume</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Command_Line_Tool">5.1. Command Line Tool</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Examples">5.1.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsconsume_Maven_Plugin">5.2. Maven Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Examples_187752">5.2.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsconsume_Ant_Task">5.3. Ant Task</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Examples_184359">5.3.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsconsume_Related_information">5.4. Related information</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-wsprovide">6. JBossWS-wsprovide</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Command_Line_Tool">6.1. Command Line Tool</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Examples">6.1.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsprovide_Maven_Plugin">6.2. Maven Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Examples_147019">6.2.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsprovide_Ant_Task">6.3. Ant Task</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Examples_860945">6.3.1. Examples</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-wsrunclient">7. JBossWS-wsrunclient</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3470">7.1. Usage</a></span></dt><dt><span class="section"><a href="#d0e3475">7.2. Examples</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#Additional documentation">II. Additional documentation</a></span></dt><dd><dl><dt><span class="chapter"><a href="#chap_JBossWS-Authentication">8. JBossWS-Authentication</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3514">8.1. Define the security domain</a></span></dt><dt><span class="section"><a href="#d0e3546">8.2. Use BindingProvider to set principal/credential</a></span></dt><dt><span class="section"><a href="#d0e3559">8.3. Using HTTP Basic Auth for security</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-Securetransport">9. JBossWS-Securetransport</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Securetransport_Client_side">9.1. Client side</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-Endpointmanagement">10. JBossWS-Endpointmanagement</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Getting_the_information">10.1. Getting the information</a></span></dt><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Metrics">10.2. Metrics</a></span></dt><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Records">10.3. Records</a></span></dt><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Snapshots_and_threshold_monitors">10.4. Snapshots and threshold monitors</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-Recordsmanagement">11. JBossWS-Recordsmanagement</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_What_is_recorded">11.1. What is recorded</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Use_cases">11.2. Use cases</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_How_it_works_and_how_to_use_it">11.3. How it works and how to use it</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Server_side">11.3.1. Server side</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Client_side">11.3.2. Client side</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Advanced_hints">11.4. Advanced hints</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Adding_custom_recorders">11.4.1. Adding custom recorders</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Handlers_position">11.4.2. Handler's position</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Multiple_handlers">11.4.3. Multiple handlers</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Future_extensions">11.5. Future extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Database_recorder">11.5.1. Database recorder</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Custom_log_writer">11.5.2. Custom log writer</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-Recordsmanagement_References">11.6. References</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#Samples, Tutorials, references">III. Samples &amp; Tutorials</a></span></dt><dd><dl><dt><span class="chapter"><a href="#chap_JBossWS-CXFWS-Addressingtutorial">12. JBossWS-CXFWS-Addressingtutorial</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_The_Service">12.1. The Service</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Generating_WSDL_and_JAXWS_Endpoint_Artifacts">12.2. Generating WSDL and JAX-WS Endpoint Artifacts</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Writing_Regular_JAXWS_Client">12.3. Writing Regular JAX-WS Client</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Turning_on_WSAddressing_10">12.4. Turning on WS-Addressing 1.0</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Updating_Endpoint_Code_to_Configure_WSAddressing">12.4.1. Updating Endpoint Code to Configure WS-Addressing</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Updating_Client_Code_to_Configure_WSAddressing">12.4.2. Updating Client Code to Configure WS-Addressing</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Leveraging_WSAddressing_Policy">12.4.3. Leveraging WS-Addressing Policy</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Sample_Sources">12.5. Sample Sources</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-CXFWS-ReliableMessagingtutorial">13. JBossWS-CXFWS-ReliableMessagingtutorial</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_The_service">13.1. The service</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Generating_WSDL_and_JAXWS_Endpoint_Artifacts">13.2. Generating WSDL and JAX-WS Endpoint Artifacts</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Generating_JAXWS_Client_Artifacts">13.3. Generating JAX-WS Client Artifacts</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Writing_Regular_JAXWS_Client">13.4. Writing Regular JAX-WS Client</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Turning_on_WSRM_10">13.5. Turning on WS-RM 1.0</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Extending_WSDL_Using_WSPolicy">13.5.1. Extending WSDL Using WS-Policy</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Basic_WSRM_configuration">13.5.2. Basic WS-RM configuration</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Advanced_WSRM_configuration">13.5.3. Advanced WS-RM configuration</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Sample_Sources">13.6. Sample Sources</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-CXFJMStransporttutorial">14. JBossWS-CXFJMStransporttutorial</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_WSDL">14.1. WSDL</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_Service_Implementation">14.2. Service Implementation</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_webxml">14.3. web.xml</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_jbosswscxfxml">14.4. jbossws-cxf.xml</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-Articlesandspecs">15. JBossWS-Articlesandspecs</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4901">15.1. J2EE-5.0 Web Services Specifications</a></span></dt><dt><span class="section"><a href="#d0e5006">15.2. J2EE-1.4 Web Services Specifications</a></span></dt><dt><span class="section"><a href="#d0e5093">15.3. Optional advanced Web Services specifications</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-JAX-WSAnnotations">16. JBossWS-JAX-WSAnnotations</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_JAXWS_Annotations">16.1. JAX-WS Annotations</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsServiceMode">16.1.1. javax.xml.ws.ServiceMode</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebFault">16.1.2. javax.xml.ws.WebFault</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsRequestWrapper">16.1.3. javax.xml.ws.RequestWrapper</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsResponseWrapper">16.1.4. javax.xml.ws.ResponseWrapper</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceClient">16.1.5. javax.xml.ws.WebServiceClient</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebEndpoint">16.1.6. javax.xml.ws.WebEndpoint</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceProvider">16.1.7. javax.xml.ws.WebServiceProvider</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsBindingType">16.1.8. javax.xml.ws.BindingType</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceRef">16.1.9. javax.xml.ws.WebServiceRef</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceRefs">16.1.10. javax.xml.ws.WebServiceRefs</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsAction">16.1.11. javax.xml.ws.Action</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsFaultAction">16.1.12. javax.xml.ws.FaultAction</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_Annotations_Defined_by_JSR181">16.1.13. Annotations Defined by JSR-181</a></span></dt></dl></dd></dl></dd></dl></dd></dl></div><div class="part" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="Main documentation"/>Part I. Main Documentation</h1></div></div></div><div class="partintro" lang="en-US"><div/><p>
        JBossWS-CXF is basically the JBoss Web Service integration with Apache CXF stack. This way additional JBoss features and customizations are added on top of already
        existing Apache CXF functionalities. In particular the integration provides technologies for allowing the JBoss Application Server to support JavaEE requirements
        in terms of Web Services functionalities.
      </p><p>
        Below you find the essential documentation on the current JBossWS-CXF release. That covers a quick start, a full user guide and tooling. You can read more on
        JBoss Web Service Framework on the JBossWS Wiki at <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/wiki/JBossWS">http://community.jboss.org/wiki/JBossWS</a>.
      </p><p>
        Please note, the wiki also offers a <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jboss.org/community/docs/DOC-13531">Guided Tour</a> along the JBossWS documentation, for those who
        don't know where to start from when dealing with webservices in general.
      </p><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#chap_JBossWS-QuickStart">1. JBossWS-QuickStart</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-QuickStart_Right_on">1.1. Right on'</a></span></dt><dt><span class="section"><a href="#JBossWS-QuickStart_Developing_web_service_implementations">1.2. Developing web service implementations</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-QuickStart_Deploying_service_implementations">1.2.1. Deploying service implementations</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-QuickStart_Consuming_web_services">1.3. Consuming web services</a></span></dt><dt><span class="section"><a href="#JBossWS-QuickStart_Appendix">1.4. Appendix</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-QuickStart_Profile_MgmtService">1.4.1. ProfileMgmtService.wsdl</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-UserGuide">2. JBossWS-UserGuide</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-UserGuide_Common_User_Guide">2.1. Common User Guide</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-UserGuide_Web_Service_Concepts">2.1.1. Web Service Concepts</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Web_Service_Endpoints">2.1.2. Web Service Endpoints</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Web_Service_Clients">2.1.3. Web Service Clients</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Common_API">2.1.4. Common API</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Tools">2.1.5. Tools</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Configuration">2.1.6. Configuration</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-StackCXFUserGuide">3. JBossWS-StackCXFUserGuide</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_JBossWS_CXF_Integration">3.1. JBossWS CXF Integration</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_Creating_a_Bus_instance">3.1.1. Creating a Bus instance</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_Server_Side_Integration_Customization">3.1.2. Server Side Integration Customization</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_Extended_Features">3.2. Extended Features</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSAddressing">3.2.1. WS-Addressing</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSReliableMessaging">3.2.2. WS-ReliableMessaging</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSPolicy">3.2.3. WS-Policy</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSSecurity">3.2.4. WS-Security</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_JMS_transport">3.2.5. JMS transport</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_HTTP_server_transport_setup">3.3. HTTP server transport setup</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_SOAP_Message_Logging">3.4. SOAP Message Logging</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-JAX-WSTools">4. JBossWS-JAX-WSTools</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-JAX-WSTools_Server_side">4.1. Server side</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-JAX-WSTools_BottomUp_Using_wsprovide">4.1.1. Bottom-Up (Using wsprovide)</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSTools_TopDown_Using_wsconsume">4.1.2. Top-Down (Using wsconsume)</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-JAX-WSTools_Client_Side">4.2. Client Side</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSTools_Commandline_Maven_Plugin_and_Ant_Task_Reference">4.3. Command-line, Maven Plugin and Ant Task Reference</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSTools_JAXWS_binding_customization">4.4. JAX-WS binding customization</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-wsconsume">5. JBossWS-wsconsume</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Command_Line_Tool">5.1. Command Line Tool</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Examples">5.1.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsconsume_Maven_Plugin">5.2. Maven Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Examples_187752">5.2.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsconsume_Ant_Task">5.3. Ant Task</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Examples_184359">5.3.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsconsume_Related_information">5.4. Related information</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-wsprovide">6. JBossWS-wsprovide</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Command_Line_Tool">6.1. Command Line Tool</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Examples">6.1.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsprovide_Maven_Plugin">6.2. Maven Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Examples_147019">6.2.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsprovide_Ant_Task">6.3. Ant Task</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Examples_860945">6.3.1. Examples</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-wsrunclient">7. JBossWS-wsrunclient</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3470">7.1. Usage</a></span></dt><dt><span class="section"><a href="#d0e3475">7.2. Examples</a></span></dt></dl></dd></dl></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-QuickStart"/>Chapter 1. JBossWS-QuickStart</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-QuickStart_Right_on">1.1. Right on'</a></span></dt><dt><span class="section"><a href="#JBossWS-QuickStart_Developing_web_service_implementations">1.2. Developing web service implementations</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-QuickStart_Deploying_service_implementations">1.2.1. Deploying service implementations</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-QuickStart_Consuming_web_services">1.3. Consuming web services</a></span></dt><dt><span class="section"><a href="#JBossWS-QuickStart_Appendix">1.4. Appendix</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-QuickStart_Profile_MgmtService">1.4.1. ProfileMgmtService.wsdl</a></span></dt></dl></dd></dl></div><p/><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-QuickStart_Right_on"/>1.1. Right on'</h2></div></div></div><p>JBossWS uses the JBoss application server as its target container. The following examples focus on web service deployments that leverage EJB3 service implementations and the JAX-WS programming models. For further information on POJO service implementations and advanced topics you need consult the user guide.</p><p>In the following sections we will explore the samples that ship with the JBossWS distribution. They provide a build structure based on Ant to get you started quickly.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-QuickStart_Developing_web_service_implementations"/>1.2. Developing web service implementations</h2></div></div></div><p>JAX-WS does leverage <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/j2se/1.5.0/docs/guide/language/annotations.html">JDK 5 annotations</a> in order to express web service meta data on Java components and to describe the mapping between Java data types and XML. When developing web service implementations you need to decide whether you are going start with an abstract contract (<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/wsdl">WSDL</a>) or a Java component.</p><p>If you are in charge to provide the service implementation, then you are probably going to start with the implementation and derive the abstract contract from it. You are probably not even getting in touch with the WSDL unless you hand it to 3rd party clients. For this reason we are going to look at a service implementation that leverages <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jcp.org/en/jsr/detail?id=181">JSR-181 annotations</a>.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><span class="bold"><strong>Note</strong></span></p><p>Even though detailed knowledge of web service meta data is not required,  it will definitely help if you make yourself familiar with it.  For further information see</p><div class="itemizedlist"><ul><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jcp.org/en/jsr/detail?id=181">Web service meta data (JSR-181)</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/webservices/jaxb/">Java API for XML binding (JAXB)</a></p></li></ul></div></div><p>When starting from Java you must provide the service implementation. A valid endpoint implementation class must meet the following requirements:</p><div class="itemizedlist"><ul><li><p> It <span class="emphasis"><em>must</em></span> carry a <code class="computeroutput">javax.jws.WebService</code> annotation (see JSR 181) </p></li><li><p> All method parameters and return types <span class="emphasis"><em>must</em></span> be compatible with the JAXB 2.0 </p></li></ul></div><p>Let's look at a sample EJB3 component that is going to be exposed as a web service.  (This is based on the Retail example).</p><p>Don't be confused with the EJB3 annotation <code class="computeroutput">@Stateless</code>. We concentrate on the <code class="computeroutput">@WebService</code> annotation for now.</p><p><span class="bold"><strong>The service implementation class</strong></span></p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.retail.profile;
 
<span class="bold"><strong>import</strong></span> javax.ejb.Stateless;
<span class="bold"><strong>import</strong></span> javax.jws.WebService;
<span class="bold"><strong>import</strong></span> javax.jws.WebMethod;
<span class="bold"><strong>import</strong></span> javax.jws.soap.SOAPBinding;
 
@Stateless                                                             (1)
@WebService(                                                           (2)
   name="ProfileMgmt",
   targetNamespace = "http://org.jboss.ws/samples/retail/profile",
   serviceName = "ProfileMgmtService")
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)         (3)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> ProfileMgmtBean {
 
   @WebMethod                                                          (4)
   <span class="bold"><strong>public</strong></span> DiscountResponse getCustomerDiscount(DiscountRequest request) {
      <span class="bold"><strong>return</strong></span> <span class="bold"><strong>new</strong></span> DiscountResponse(request.getCustomer(), 10.00);
   }
}
 
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p> We are using a stateless session bean implementation </p></li><li><p> Exposed a web service with an explicit namespace </p></li><li><p> It's a doc/lit bare endpoint </p></li><li><p> And offers an 'getCustomerDiscount' operation </p></li></ol></div><p> <span class="bold"><strong> What about the payload? </strong></span></p><p>The method parameters and return values are going to represent our XML payload and thus require being compatible with <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/webservices/jaxb/">JAXB2</a>. Actually you wouldn't need any JAXB annotations for this particular example, because JAXB relies on meaningful defaults. For the sake of documentation we put the more important ones here.</p><p>Take a look at the request parameter:</p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.retail.profile;
 
<span class="bold"><strong>import</strong></span> javax.xml.bind.annotation.XmlAccessType;
<span class="bold"><strong>import</strong></span> javax.xml.bind.annotation.XmlAccessorType;
<span class="bold"><strong>import</strong></span> javax.xml.bind.annotation.XmlType;
 
<span class="bold"><strong>import</strong></span> org.jboss.test.ws.jaxws.samples.retail.Customer;
 
@XmlAccessorType(XmlAccessType.FIELD)            
@XmlType(                                                  (1)
  name = "discountRequest", 
  namespace="http://org.jboss.ws/samples/retail/profile", 
  propOrder = { "customer" }
)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> DiscountRequest {
 
   <span class="bold"><strong>protected</strong></span> Customer customer;
 
   <span class="bold"><strong>public</strong></span> DiscountRequest() {
   }
 
   <span class="bold"><strong>public</strong></span> DiscountRequest(Customer customer) {
      this.customer = customer;
   }
 
   <span class="bold"><strong>public</strong></span> Customer getCustomer() {
      <span class="bold"><strong>return</strong></span> customer;
   }
 
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>void</strong></span> setCustomer(Customer value) {
      this.customer = value;
   }
 
}
 
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>In this case we use <code class="computeroutput">@XmlType</code> to specify an XML complex type name and override the namespace. </p></li></ol></div><p> </p><div class="variablelist"><dl/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-QuickStart_Deploying_service_implementations"/>1.2.1. Deploying service implementations</h3></div></div></div><p>Service deployment basically depends on the implementation type. As you may already know web services can be implemented as EJB3 components or plain old Java objects. This quick start leverages EJB3 components in all examples, thats why we are going to look at this case in the next sections.</p><p> </p><p><span class="bold"><strong> EJB3 services </strong></span></p><p>Simply wrap up the service implementation class, the endpoint interface and any custom data types in a JAR and drop them in the <code class="computeroutput">deploy</code> directory. No additional deployment descriptors required. Any meta data required for the deployment of the actual web service is taken from the annotations provided on the implementation class and the service endpoint interface. JBossWS will intercept that EJB3 deployment (the bean will also be there) and create an HTTP endpoint at deploy-time:</p><p> </p><p><span class="bold"><strong>The JAR package structure</strong></span></p><pre class="screen">jar -tf jaxws-samples-retail.jar

org/jboss/test/ws/jaxws/samples/retail/profile/DiscountRequest.class
org/jboss/test/ws/jaxws/samples/retail/profile/DiscountResponse.class
org/jboss/test/ws/jaxws/samples/retail/profile/ObjectFactory.class
org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmt.class
org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmtBean.class
org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmtService.class
org/jboss/test/ws/jaxws/samples/retail/profile/package-info.class
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><span class="emphasis"><em><span class="bold"><strong>Note</strong></span></em></span></p><p><span class="emphasis"><em>If the deployment was successful you should be able to see your endpoint at <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost:8080/jbossws/services">http://localhost:8080/jbossws/services</a></em></span></p><p> </p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-QuickStart_Consuming_web_services"/>1.3. Consuming web services</h2></div></div></div><p>When creating web service clients you would usually start from the WSDL. JBossWS ships with a set of tools to generate the required JAX-WS artefacts to build client implementations. In the following section we will look at the most basic usage patterns. For a more detailed introductoin to web service client please consult the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/docs/DOC-13972">user guide</a>.</p><p> </p><p> </p><p><span class="bold"><strong>Using wsconsume </strong></span></p><p> </p><p>The <a href="#chap_JBossWS-wsconsume" title="Chapter 5. JBossWS-wsconsume">wsconsume tool</a> is used to consume the abstract contract (WSDL) and produce annotated Java classes (and optionally sources) that define it. We are going to start with the WSDL from our retail example (<a href="#JBossWS-QuickStart_Profile_MgmtService" title="1.4.1. ProfileMgmtService.wsdl">ProfileMgmtService.wsdl</a>). For a detailed tool reference you need to consult the user guide.</p><pre class="screen">wsconsume is a command line tool that generates 
portable JAX-WS artifacts from a WSDL file.

usage: org.jboss.ws.tools.jaxws.command.wsconsume [options] &lt;wsdl-url&gt;

options:
    -h, --help                  Show this help message
    -b, --binding=&lt;file&gt;        One or more JAX-WS or JAXB binding files
    -k, --keep                  Keep/Generate Java source
    -c  --catalog=&lt;file&gt;        Oasis XML Catalog file for entity resolution
    -p  --package=&lt;name&gt;        The target package for generated source
    -w  --wsdlLocation=&lt;loc&gt;    Value to use for @WebService.wsdlLocation
    -o, --output=&lt;directory&gt;    The directory to put generated artifacts
    -s, --source=&lt;directory&gt;    The directory to put Java source
    -q, --quiet                 Be somewhat more quiet
    -t, --show-traces           Show full exception stack traces
</pre><p>Let's try it on our retail sample:</p><pre class="screen">~./wsconsume.sh -k 
-p org.jboss.test.ws.jaxws.samples.retail.profile ProfileMgmtService.wsdl  (1)

org/jboss/test/ws/jaxws/samples/retail/profile/Customer.java
org/jboss/test/ws/jaxws/samples/retail/profile/DiscountRequest.java
org/jboss/test/ws/jaxws/samples/retail/profile/DiscountResponse.java
org/jboss/test/ws/jaxws/samples/retail/profile/ObjectFactory.java
org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmt.java
org/jboss/test/ws/jaxws/samples/retail/profile/ProfileMgmtService.java
org/jboss/test/ws/jaxws/samples/retail/profile/package-info.java

</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p> As you can see we did use the <code class="computeroutput">-p</code> switch to specify the package name of the generated sources. </p></li></ol></div><p> </p><p><span class="bold"><strong> The generated artifacts explained </strong></span></p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><thead><tr><th> File </th><th> Purpose </th></tr></thead><tbody><tr><td>ProfileMgmt.java</td><td>Service Endpoint Interface</td></tr><tr><td>Customer.java</td><td>Custom data type</td></tr><tr><td>Discount*.java</td><td>Custom data type</td></tr><tr><td>ObjectFactory.java</td><td>JAXB XML Registry</td></tr><tr><td>package-info.java</td><td>Holder for JAXB package annotations</td></tr><tr><td>ProfileMgmtService.java</td><td>Service factory</td></tr></tbody></table></div><p>Basically <code class="computeroutput">wsconsume</code> generates all custom data types (JAXB annotated classes), the service endpoint interface and a service factory class. We will look at how these artifacts can be used the build web service client implementations in the next section.</p><p> </p><h3><a id="Constructing_a_service_stub"/>Constructing a service stub</h3><p>Web service clients make use of a service stubs that hide the details of a remote web service invocation. To a client application a WS invocation just looks like an invocation of any other business component. In this case the service endpoint interface acts as the business interface. JAX-WS does use a service factory class to construct this as particular service stub:</p><pre class="screen"><span class="bold"><strong>import</strong></span> javax.xml.ws.Service;
 
Service service = Service.create(                                 (1)
  <span class="bold"><strong>new</strong></span> URL("http://example.org/service?wsdl"), 
  <span class="bold"><strong>new</strong></span> QName("MyService")
);      
ProfileMgmt profileMgmt = service.getPort(ProfileMgmt.class);     (2)
 
// do something with the service stub here...                     (3)
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p> Create a service factory using the WSDL location and the service name </p></li><li><p> Use the tool created service endpoint interface to build the service stub </p></li><li><p> Use the stub like any other business interface </p></li></ol></div><p> </p><p> </p><p><span class="emphasis"><em><span class="bold"><strong>Note</strong></span></em></span></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><span class="emphasis"><em>The creation of the service stub is quite costly. You should take care that it gets  reused by your application code (However <span class="bold"><strong>it's not thread safe</strong></span>). Within a EE5 environment you might want to investigate  the <code class="computeroutput">@WebServiceRef</code> functionality.</em></span></p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-QuickStart_Appendix"/>1.4. Appendix</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-QuickStart_Profile_MgmtService"/>1.4.1. ProfileMgmtService.wsdl</h3></div></div></div><pre class="screen">&lt;definitions
    name='ProfileMgmtService'
    targetNamespace='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/retail/profile">http://org.jboss.ws/samples/retail/profile</a>'
    xmlns='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/wsdl/">http://schemas.xmlsoap.org/wsdl/</a>'
    xmlns:ns1='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/retail">http://org.jboss.ws/samples/retail</a>'
    xmlns:soap='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/wsdl/soap/">http://schemas.xmlsoap.org/wsdl/soap/</a>'
    xmlns:tns='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/retail/profile">http://org.jboss.ws/samples/retail/profile</a>'
    xmlns:xsd='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>'&gt;

   &lt;types&gt;

      &lt;xs:schema targetNamespace='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/retail">http://org.jboss.ws/samples/retail</a>'
                 version='1.0' xmlns:xs='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>'&gt;
         &lt;xs:complexType name='customer'&gt;
            &lt;xs:sequence&gt;
               &lt;xs:element minOccurs='0' name='creditCardDetails' type='xs:string'/&gt;
               &lt;xs:element minOccurs='0' name='firstName' type='xs:string'/&gt;
               &lt;xs:element minOccurs='0' name='lastName' type='xs:string'/&gt;
            &lt;/xs:sequence&gt;
         &lt;/xs:complexType&gt;
      &lt;/xs:schema&gt;

      &lt;xs:schema
          targetNamespace='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/retail/profile">http://org.jboss.ws/samples/retail/profile</a>'
          version='1.0'
          xmlns:ns1='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/retail">http://org.jboss.ws/samples/retail</a>'
          xmlns:tns='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/retail/profile">http://org.jboss.ws/samples/retail/profile</a>'
          xmlns:xs='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>'&gt;
         
         &lt;xs:import namespace='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/retail'/">http://org.jboss.ws/samples/retail'/</a>&gt;
         &lt;xs:element name='getCustomerDiscount' 
                     nillable='true' type='tns:discountRequest'/&gt;
         &lt;xs:element name='getCustomerDiscountResponse' 
                     nillable='true' type='tns:discountResponse'/&gt;
         &lt;xs:complexType name='discountRequest'&gt;
            &lt;xs:sequence&gt;
               &lt;xs:element minOccurs='0' name='customer' type='ns1:customer'/&gt;

            &lt;/xs:sequence&gt;
         &lt;/xs:complexType&gt;
         &lt;xs:complexType name='discountResponse'&gt;
            &lt;xs:sequence&gt;
               &lt;xs:element minOccurs='0' name='customer' type='ns1:customer'/&gt;
               &lt;xs:element name='discount' type='xs:double'/&gt;
            &lt;/xs:sequence&gt;
         &lt;/xs:complexType&gt;
      &lt;/xs:schema&gt;

   &lt;/types&gt;

   &lt;message name='ProfileMgmt_getCustomerDiscount'&gt;
      &lt;part element='tns:getCustomerDiscount' name='getCustomerDiscount'/&gt;
   &lt;/message&gt;
   &lt;message name='ProfileMgmt_getCustomerDiscountResponse'&gt;
      &lt;part element='tns:getCustomerDiscountResponse' 
            name='getCustomerDiscountResponse'/&gt;
   &lt;/message&gt;
   &lt;portType name='ProfileMgmt'&gt;
      &lt;operation name='getCustomerDiscount' 
                 parameterOrder='getCustomerDiscount'&gt;

         &lt;input message='tns:ProfileMgmt_getCustomerDiscount'/&gt;
         &lt;output message='tns:ProfileMgmt_getCustomerDiscountResponse'/&gt;
      &lt;/operation&gt;
   &lt;/portType&gt;
   &lt;binding name='ProfileMgmtBinding' type='tns:ProfileMgmt'&gt;
      &lt;soap:binding style='document' 
                    transport='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/soap/http'/">http://schemas.xmlsoap.org/soap/http'/</a>&gt;
      &lt;operation name='getCustomerDiscount'&gt;
         &lt;soap:operation soapAction=''/&gt;
         &lt;input&gt;

            &lt;soap:body use='literal'/&gt;
         &lt;/input&gt;
         &lt;output&gt;
            &lt;soap:body use='literal'/&gt;
         &lt;/output&gt;
      &lt;/operation&gt;
   &lt;/binding&gt;
   &lt;service name='ProfileMgmtService'&gt;
      &lt;port binding='tns:ProfileMgmtBinding' name='ProfileMgmtPort'&gt;

         &lt;soap:address 
             location='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://">http://</a>&lt;HOST&gt;:&lt;PORT&gt;/jaxws-samples-retail/ProfileMgmtBean'/&gt;
      &lt;/port&gt;
   &lt;/service&gt;
&lt;/definitions&gt;</pre><p> </p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-UserGuide"/>Chapter 2. JBossWS-UserGuide</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-UserGuide_Common_User_Guide">2.1. Common User Guide</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-UserGuide_Web_Service_Concepts">2.1.1. Web Service Concepts</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Web_Service_Endpoints">2.1.2. Web Service Endpoints</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Web_Service_Clients">2.1.3. Web Service Clients</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Common_API">2.1.4. Common API</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Tools">2.1.5. Tools</a></span></dt><dt><span class="section"><a href="#JBossWS-UserGuide_Configuration">2.1.6. Configuration</a></span></dt></dl></dd></dl></div><p/><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-UserGuide_Common_User_Guide"/>2.1. Common User Guide</h2></div></div></div><p> </p><p>Here below is the documentation that applies to every supported stacks. This includes basic JAX-WS usage as well as references to common additional functionalities the JBossWS Web Service Framework provides on top of the supported stacks.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-UserGuide_Web_Service_Concepts"/>2.1.1. Web Service Concepts</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_DocumentLiteral"/>2.1.1.1. Document/Literal</h4></div></div></div><p>With document style web services two business partners agree on the exchange of complex business documents that are well defined in XML schema. For example, one party sends a document describing a purchase order, the other responds (immediately or later) with a document that describes the status of the purchase order. No need to agree on such low level details as operation names and their associated parameters.</p><p>The payload of the SOAP message is an XML document that can be validated against XML schema.</p><p>Document is defined by the style attribute on the SOAP binding.</p><pre class="screen"> &lt;binding name='EndpointInterfaceBinding' type='tns:EndpointInterface'&gt;
  &lt;soap:binding style='document' transport='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/soap/http'/">http://schemas.xmlsoap.org/soap/http'/</a>&gt;
  &lt;operation name='concat'&gt;
   &lt;soap:operation soapAction=''/&gt;
   &lt;input&gt;
    &lt;soap:body use='literal'/&gt;
   &lt;/input&gt;
   &lt;output&gt;
    &lt;soap:body use='literal'/&gt;
   &lt;/output&gt;
  &lt;/operation&gt;&lt;/binding&gt;
</pre><p>With document style web services the payload of every message is defined by a complex type in XML schema.</p><pre class="screen">   &lt;complexType name='concatType'&gt;
    &lt;sequence&gt;
     &lt;element name='String_1' nillable='true' type='string'/&gt;
     &lt;element name='long_1' type='long'/&gt;
    &lt;/sequence&gt;
   &lt;/complexType&gt;
   &lt;element name='concat' type='tns:concatType'/&gt;
</pre><p>Therefore, message parts <span class="bold"><strong>must</strong></span> refer to an <span class="bold"><strong>element</strong></span> from the schema.</p><pre class="screen"> &lt;message name='EndpointInterface_concat'&gt;
  &lt;part name='parameters' element='tns:concat'/&gt;&lt;/message&gt;
</pre><p>The following message definition <span class="bold"><strong>is invalid</strong></span>.</p><pre class="screen"> &lt;message name='EndpointInterface_concat'&gt;
  &lt;part name='parameters' type='tns:concatType'/&gt;&lt;/message&gt;</pre><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_DocumentLiteral_Bare"/>2.1.1.1.1. Document/Literal (Bare)</h5></div></div></div><p>Bare is an implementation detail from the Java domain. Neither in the abstract contract (i.e. wsdl+schema) nor at the SOAP message level is a bare endpoint recognizable.</p><p>A bare endpoint or client uses a Java bean that represents the entire document payload.</p><pre class="screen">@WebService
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> DocBareServiceImpl
{
   @WebMethod
   <span class="bold"><strong>public</strong></span> SubmitBareResponse submitPO(SubmitBareRequest poRequest)
   {
      ...
   }
}
</pre><p>The trick is that the Java beans representing the payload contain JAXB annotations that define how the payload is represented on the wire.</p><pre class="screen">@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "SubmitBareRequest", namespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://soapbinding.samples.jaxws.ws.test.jboss.org/">http://soapbinding.samples.jaxws.ws.test.jboss.org/</a>", propOrder = { "product" })
@XmlRootElement(namespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://soapbinding.samples.jaxws.ws.test.jboss.org/">http://soapbinding.samples.jaxws.ws.test.jboss.org/</a>", name = "SubmitPO")
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> SubmitBareRequest
{
   @XmlElement(namespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://soapbinding.samples.jaxws.ws.test.jboss.org/">http://soapbinding.samples.jaxws.ws.test.jboss.org/</a>",  required = <span class="bold"><strong>true</strong></span>)
   <span class="bold"><strong>private</strong></span> String product;
   
   ...
}
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_DocumentLiteral_Wrapped"/>2.1.1.1.2. Document/Literal (Wrapped)</h5></div></div></div><p>Wrapped is an implementation detail from the Java domain. Neither in the abstract contract (i.e. wsdl+schema) nor at the SOAP message level is a wrapped endpoint recognizable.</p><p>A wrapped endpoint or client uses the individual document payload properties. Wrapped is the default and does not have to be declared explicitly.</p><pre class="screen">@WebService
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> DocWrappedServiceImpl
{
   @WebMethod
   @RequestWrapper (className="org.somepackage.SubmitPO")
   @ResponseWrapper (className="org.somepackage.SubmitPOResponse")
   <span class="bold"><strong>public</strong></span> String submitPO(String product, <span class="bold"><strong>int</strong></span> quantity)
   {
      ...
   }
}
</pre><p>Note, that with JBossWS the request/response wrapper annotations are <span class="bold"><strong>not required</strong></span>, they will be generated on demand using sensible defaults.</p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_RPCLiteral"/>2.1.1.2. RPC/Literal</h4></div></div></div><p>With RPC there is a wrapper element that names the endpoint operation. Child elements of the RPC parent are the individual parameters.</p><p>The SOAP body is constructed based on some simple rules:</p><div class="itemizedlist"><ul><li><p> The port type operation name defines the endpoint method name </p></li><li><p> Message parts are endpoint method parameters </p></li></ul></div><p>RPC is defined by the style attribute on the SOAP binding.</p><pre class="screen"> &lt;binding name='EndpointInterfaceBinding' type='tns:EndpointInterface'&gt;
  &lt;soap:binding style='rpc' transport='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/soap/http'/">http://schemas.xmlsoap.org/soap/http'/</a>&gt;
  &lt;operation name='echo'&gt;
   &lt;soap:operation soapAction=''/&gt;
   &lt;input&gt;
    &lt;soap:body namespace='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/jsr181pojo">http://org.jboss.ws/samples/jsr181pojo</a>' use='literal'/&gt;
   &lt;/input&gt;
   &lt;output&gt;
    &lt;soap:body namespace='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/jsr181pojo">http://org.jboss.ws/samples/jsr181pojo</a>' use='literal'/&gt;
   &lt;/output&gt;
  &lt;/operation&gt;&lt;/binding&gt;
</pre><p>With rpc style web services the portType names the operation (i.e. the java method on the endpoint)</p><pre class="screen"> &lt;portType name='EndpointInterface'&gt;
  &lt;operation name='echo' parameterOrder='String_1'&gt;
   &lt;input message='tns:EndpointInterface_echo'/&gt;
   &lt;output message='tns:EndpointInterface_echoResponse'/&gt;
  &lt;/operation&gt;&lt;/portType&gt;
</pre><p>Operation parameters are defined by individual message parts.</p><pre class="screen"> &lt;message name='EndpointInterface_echo'&gt;
  &lt;part name='String_1' type='xsd:string'/&gt;&lt;/message&gt;&lt;message name='EndpointInterface_echoResponse'&gt;
  &lt;part name='result' type='xsd:string'/&gt;&lt;/message&gt;
</pre><p>Note, there is no complex type in XML schema that could validate the entire SOAP message payload.</p><pre class="screen">@WebService
@SOAPBinding(style = SOAPBinding.Style.RPC)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> JSEBean01
{
   @WebMethod
   @WebResult(name="result")
   <span class="bold"><strong>public</strong></span> String echo(@WebParam(name="String_1") String input)
   {
      ...
   }
}
</pre><p>The element names of RPC parameters/return values may be defined using the JAX-WS <a href="#chap_JBossWS-JAX-WSAnnotations" title="Chapter 16. JBossWS-JAX-WSAnnotations">WebParam</a> and <a href="#chap_JBossWS-JAX-WSAnnotations" title="Chapter 16. JBossWS-JAX-WSAnnotations">WebResult</a> annotations respectively.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_RPCEncoded"/>2.1.1.3. RPC/Encoded</h4></div></div></div><p>SOAP encodeding style is defined by the infamous <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383512">chapter 5</a> of the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/2000/NOTE-SOAP-20000508">SOAP-1.1</a> specification. <span class="bold"><strong>It has inherent interoperability issues</strong></span> that cannot be fixed. The <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.ws-i.org/Profiles/BasicProfile-1.0-2004-04-16.html">Basic Profile-1.0</a> prohibits this encoding style in <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.ws-i.org/Profiles/BasicProfile-1.0-2004-04-16.html#refinement16448072">4.1.7 SOAP encodingStyle Attribute</a>.</p><p> JBossWS doesn't support rpc/encoded anymore.</p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-UserGuide_Web_Service_Endpoints"/>2.1.2. Web Service Endpoints</h3></div></div></div><p>JAX-WS simplifies the development model for a web service endpoint a great deal. In short, an endpoint implementation bean is annotated with JAX-WS annotations and deployed to the server. The server automatically generates and publishes the abstract contract (i.e. wsdl+schema) for client consumption. All marshalling/unmarshalling is delegated to JAXB.</p><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Plain_old_Java_Object_POJO"/>2.1.2.1. Plain old Java Object (POJO)</h4></div></div></div><p>Let's take a look at simple POJO endpoint implementation. All endpoint associated metadata is provided via JSR-181 annotations</p><pre class="screen">    @WebService
    @SOAPBinding(style = SOAPBinding.Style.RPC)
    <span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> JSEBean01
    {
       @WebMethod
       <span class="bold"><strong>public</strong></span> String echo(String input)
       {
          ...
       }
    }
</pre><p><span class="bold"><strong>The endpoint as a web application</strong></span></p><p>A JAX-WS java service endpoint (JSE) is deployed as a web application.</p><pre class="screen">  &lt;web-app ...&gt;
    &lt;servlet&gt;
      &lt;servlet-name&gt;TestService&lt;/servlet-name&gt;
      &lt;servlet-class&gt;org.jboss.test.ws.jaxws.samples.jsr181pojo.JSEBean01&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
      &lt;servlet-name&gt;TestService&lt;/servlet-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
  &lt;/web-app&gt;
</pre><p><span class="bold"><strong>Packaging the endpoint</strong></span></p><p>A JSR-181 java service endpoint (JSE) is packaged as a web application in a *.war file.</p><pre class="screen">    &lt;war warfile="${build.dir}/libs/jbossws-samples-jsr181pojo.war" webxml="${build.resources.dir}/samples/jsr181pojo/WEB-INF/web.xml"&gt;
      &lt;classes dir="${build.dir}/classes"&gt;
        &lt;include name="org/jboss/test/ws/samples/jsr181pojo/JSEBean01.class"/&gt;
      &lt;/classes&gt;
    &lt;/war&gt;
</pre><p>Note, only the endpoint implementation bean and web.xml are required.</p><p><span class="bold"><strong>Accessing the generated WSDL</strong></span></p><p>A successfully deployed service endpoint will show up in the service endpoint manager. This is also where you find the links to the generated wsdl.</p><pre class="screen">   http://yourhost:8080/jbossws/services
</pre><p>Note, it is also possible to generate the abstract contract off line using jbossw tools. For details of that please see <a href="#chap_JBossWS-JAX-WSTools" title="Chapter 4. JBossWS-JAX-WSTools">Bottom-Up (Java to WSDL)</a></p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_EJB3_Stateless_Session_Bean_SLSB"/>2.1.2.2. EJB3 Stateless Session Bean (SLSB)</h4></div></div></div><p>The JAX-WS programming model support the same set of annotations on EJB3 stateless session beans as on <a href="#JBossWS-UserGuide_Plain_old_Java_Object_POJO" title="2.1.2.1. Plain old Java Object (POJO)">Plain old Java Object (POJO)</a> endpoints.  EJB-2.1 endpoints are supported using the JAX-RPC progamming model (with JBossWS-Native only).</p><pre class="screen">    @Stateless
    @Remote(EJB3RemoteInterface.class)
    @RemoteBinding(jndiBinding = "/ejb3/EJB3EndpointInterface")
 
    @WebService
    @SOAPBinding(style = SOAPBinding.Style.RPC)
    <span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> EJB3Bean01 <span class="bold"><strong>implements</strong></span> EJB3RemoteInterface
    {
       @WebMethod
       <span class="bold"><strong>public</strong></span> String echo(String input)
       {
          ...
       }
    }
</pre><p>Above you see an EJB-3.0 stateless session bean that exposes one method both on the remote interface and on and as an endpoint operation.</p><p><span class="bold"><strong>Packaging the endpoint</strong></span></p><p>A JSR-181 EJB service endpoint is packaged as an ordinary ejb deployment.</p><pre class="screen">    &lt;jar jarfile="${build.dir}/libs/jbossws-samples-jsr181ejb.jar"&gt;
      &lt;fileset dir="${build.dir}/classes"&gt;
        &lt;include name="org/jboss/test/ws/samples/jsr181ejb/EJB3Bean01.class"/&gt;
        &lt;include name="org/jboss/test/ws/samples/jsr181ejb/EJB3RemoteInterface.class"/&gt;
      &lt;/fileset&gt;
    &lt;/jar&gt;
</pre><p><span class="bold"><strong>Accessing the generated WSDL</strong></span></p><p>A successfully deployed service endpoint will show up in the service endpoint manager. This is also where you find the links to the generated wsdl.</p><pre class="screen">   http://yourhost:8080/jbossws/services
</pre><p>Note, it is also possible to generate the abstract contract off line using jbossw tools. For details of that please see <a href="#chap_JBossWS-JAX-WSTools" title="Chapter 4. JBossWS-JAX-WSTools">Bottom-Up (Java to WSDL)</a></p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Endpoint_Provider"/>2.1.2.3. Endpoint Provider</h4></div></div></div><p>JAX-WS services typically implement a native Java service endpoint interface (SEI), perhaps mapped from a WSDL port type, either directly or via the use of annotations.</p><p>Java SEIs provide a high level Java-centric abstraction that hides the details of converting between Java objects and their XML representations for use in XML-based messages. However, in some cases it is desirable for services to be able to operate at the XML message level. The Provider interface offers an alternative to SEIs and may be implemented by services wishing to work at the XML message level.</p><p>A Provider based service instances invoke method is called for each message received for the service.</p><pre class="screen">   @WebServiceProvider(wsdlLocation = "WEB-INF/wsdl/Provider.wsdl")
   @ServiceMode(value = Service.Mode.PAYLOAD)
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> ProviderBeanPayload <span class="bold"><strong>implements</strong></span> Provider&lt;Source&gt;
   {
      <span class="bold"><strong>public</strong></span> Source invoke(Source req)
      {
         // Access the entire request PAYLOAD and return the response PAYLOAD
      }
   }
</pre><p>Note, Service.Mode.PAYLOAD is the default and does not have to be declared explicitly. You can also use Service.Mode.MESSAGE to access the entire SOAP message (i.e. with MESSAGE the Provider can also see SOAP Headers)</p><p>The abstract contract for a provider endpoint cannot be derived/generated automatically. Therefore it is necessary to specify the wsdlLocation with the @WebServiceProvider annotation.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_WebServiceContext"/>2.1.2.4. WebServiceContext</h4></div></div></div><p>The WebServiceContext is treated as an injectable resource that can be set at the time an endpoint is initialized. The WebServiceContext object will then use thread-local information to return the correct information regardless of how many threads are concurrently being used to serve requests addressed to the same endpoint object.</p><pre class="screen">   @WebService
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> EndpointJSE
   {
      @Resource
      WebServiceContext wsCtx;
   
      @WebMethod
      <span class="bold"><strong>public</strong></span> String testGetMessageContext()
      {
         SOAPMessageContext jaxwsContext = (SOAPMessageContext)wsCtx.getMessageContext();
         <span class="bold"><strong>return</strong></span> jaxwsContext != <span class="bold"><strong>null</strong></span> ? "pass" : "fail";
      }
   
      @WebMethod
      <span class="bold"><strong>public</strong></span> String testGetUserPrincipal()
      {
         Principal principal = wsCtx.getUserPrincipal();
         <span class="bold"><strong>return</strong></span> principal.getName();
      }
   
      @WebMethod
      <span class="bold"><strong>public</strong></span> <span class="bold"><strong>boolean</strong></span> testIsUserInRole(String role)
      {
         <span class="bold"><strong>return</strong></span> wsCtx.isUserInRole(role);
      }
   }
</pre><p> </p><p> </p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-UserGuide_Web_Service_Clients"/>2.1.3. Web Service Clients</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Service"/>2.1.3.1. Service</h4></div></div></div><p><code class="computeroutput">Service</code> is an abstraction that represents a WSDL service. A WSDL service is a collection of related ports, each of which consists of a port type bound to a particular protocol and available at a particular endpoint address.</p><p>For most clients, you will start with a set of stubs generated from the WSDL. One of these will be the service, and you will create objects of that class in order to work with the service (see "static case" below).</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_Service_Usage"/>2.1.3.1.1. Service Usage</h5></div></div></div><p><span class="bold"><strong>Static case</strong></span></p><p>Most clients will start with a WSDL file, and generate some stubs using jbossws tools like <span class="emphasis"><em>wsconsume</em></span>.  This usually gives a mass of files, one of which is the top of the tree.  This is the service implementation class.</p><p>The generated implementation class can be recognised as it will have two public constructors, one with no arguments and one with two arguments, representing the wsdl location (a java.net.URL) and the service name (a javax.xml.namespace.QName) respectively.</p><p>Usually you will use the no-argument constructor. In this case the WSDL location and service name are those found in the WSDL. These are set implicitly from the WebServiceClient annotation that decorates the generated class.</p><p>The following code snippet shows the generated constructors from the generated class:</p><pre class="screen">// Generated Service Class
 
@WebServiceClient(name="StockQuoteService", targetNamespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://example.com/stocks">http://example.com/stocks</a>", wsdlLocation="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://example.com/stocks.wsdl">http://example.com/stocks.wsdl</a>")
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> StockQuoteService <span class="bold"><strong>extends</strong></span> javax.xml.ws.Service 
{
   <span class="bold"><strong>public</strong></span> StockQuoteService() 
   {
      <span class="bold"><strong>super</strong></span>(<span class="bold"><strong>new</strong></span> URL("<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://example.com/stocks.wsdl">http://example.com/stocks.wsdl</a>"), <span class="bold"><strong>new</strong></span> QName("<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://example.com/stocks">http://example.com/stocks</a>", "StockQuoteService"));
   }
 
   <span class="bold"><strong>public</strong></span> StockQuoteService(String wsdlLocation, QName serviceName) 
   {
      <span class="bold"><strong>super</strong></span>(wsdlLocation, serviceName);
   }
 
   ...
}
</pre><p>Section <a href="#JBossWS-UserGuide_Dynamic_Proxy" title="2.1.3.2. Dynamic Proxy">Dynamic Proxy</a> explains how to obtain a port from the service and how to invoke an operation on the port. If you need to work with the XML payload directly or with the XML representation of the entire SOAP message, have a look at <a href="#JBossWS-UserGuide_Dispatch" title="2.1.3.4. Dispatch">Dispatch</a>.</p><p><span class="bold"><strong>Dynamic case</strong></span></p><p>In the dynamic case, when nothing is generated, a web service client uses <code class="computeroutput">Service.create</code> to create Service instances, the following code illustrates this process.</p><pre class="screen">   URL wsdlLocation = <span class="bold"><strong>new</strong></span> URL("<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://example.org/my.wsdl">http://example.org/my.wsdl</a>");
   QName serviceName = <span class="bold"><strong>new</strong></span> QName("<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://example.org/sample">http://example.org/sample</a>", "MyService");
   Service service = Service.create(wsdlLocation, serviceName);
</pre><p> </p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_Handler_Resolver"/>2.1.3.1.2. Handler Resolver</h5></div></div></div><p>JAX-WS provides a flexible plug-in framework for message processing modules, known as handlers, that may be used to extend the capabilities of a JAX-WS runtime system. <a href="#JBossWS-UserGuide_Handler_Framework" title="2.1.4.1. Handler Framework">Handler Framework</a> describes the handler framework in detail. A Service instance provides access to a HandlerResolver via a pair of getHandlerResolver/setHandlerResolver methods that may be used to configure a set of handlers on a per-service, per-port or per-protocol binding basis.</p><p>When a Service instance is used to create a proxy or a Dispatch instance then the handler resolver currently registered with the service is used to create the required handler chain. Subsequent changes to the handler resolver configured for a Service instance do not affect the handlers on previously created proxies, or Dispatch instances.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_Executor"/>2.1.3.1.3. Executor</h5></div></div></div><p>Service instances can be configured with a java.util.concurrent.Executor. The executor will then be used to invoke any asynchronous callbacks requested by the application. The setExecutor and getExecutor methods of Service can be used to modify and retrieve the executor configured for a service.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Dynamic_Proxy"/>2.1.3.2. Dynamic Proxy</h4></div></div></div><p>You can create an instance of a client proxy using one of getPort methods on the <a href="#JBossWS-UserGuide_Service" title="2.1.3.1. Service">Service</a>.</p><pre class="screen">   /** 
    * The getPort method returns a proxy. A service client
    * uses this proxy to invoke operations on the target
    * service endpoint. The &lt;code&gt;serviceEndpointInterface&lt;/code&gt;
    * specifies the service endpoint interface that is supported by
    * the created dynamic proxy instance.
    **/
   <span class="bold"><strong>public</strong></span> &lt;T&gt; T getPort(QName portName, Class&lt;T&gt; serviceEndpointInterface)
   {
      ...
   }
 
   /** 
    * The getPort method returns a proxy. The parameter
    * &lt;code&gt;serviceEndpointInterface&lt;/code&gt; specifies the service
    * endpoint interface that is supported by the returned proxy.
    * In the implementation of this method, the JAX-WS
    * runtime system takes the responsibility of selecting a protocol
    * binding (and a port) and configuring the proxy accordingly.
    * The returned proxy should not be reconfigured by the client.
    *
    **/
   <span class="bold"><strong>public</strong></span> &lt;T&gt; T getPort(Class&lt;T&gt; serviceEndpointInterface)
   {
      ...
   }
</pre><p>The service endpoint interface (SEI) is usually generated using tools. For details see <a href="#chap_JBossWS-JAX-WSTools" title="Chapter 4. JBossWS-JAX-WSTools">Top Down (WSDL to Java)</a></p><p>A generated static <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/Service">Service</a> usually also offers typed methods to get ports. These methods also return dynamic proxies that implement the SEI.</p><pre class="screen">@WebServiceClient(name = "TestEndpointService", targetNamespace = "<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/wsref">http://org.jboss.ws/wsref</a>", 
   wsdlLocation = "<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost.localdomain:8080/jaxws-samples-webserviceref?wsdl">http://localhost.localdomain:8080/jaxws-samples-webserviceref?wsdl</a>")
 
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> TestEndpointService <span class="bold"><strong>extends</strong></span> Service
{
    ...
 
    <span class="bold"><strong>public</strong></span> TestEndpointService(URL wsdlLocation, QName serviceName) {
        <span class="bold"><strong>super</strong></span>(wsdlLocation, serviceName);
    }
 
    @WebEndpoint(name = "TestEndpointPort")
    <span class="bold"><strong>public</strong></span> TestEndpoint getTestEndpointPort() 
    {
        <span class="bold"><strong>return</strong></span> (TestEndpoint)super.getPort(TESTENDPOINTPORT, TestEndpoint.class);
    }
}
</pre><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_WebServiceRef"/>2.1.3.3. WebServiceRef</h4></div></div></div><p>The WebServiceRef annotation is used to declare a reference to a Web service. It follows the resource pattern exemplified by the javax.annotation.Resource annotation in JSR-250.</p><p>There are two uses to the WebServiceRef annotation:</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p> To define a reference whose type is a generated service class. In this case, the type and value element will both refer to the generated service class type. Moreover, if the reference type can be inferred by the field/method declaration the annotation is applied to, the type and value elements MAY have the default value (Object.class, that is). If the type cannot be inferred, then at least the type element MUST be present with a non-default value. </p></li><li><p> To define a reference whose type is a SEI. In this case, the type element MAY be present with its default value if the type of the reference can be inferred from the annotated field/method declaration, but the value element MUST always be present and refer to a generated service class type (a subtype of javax.xml.ws.Service). The wsdlLocation element, if present, overrides theWSDL location information specified in the WebService annotation of the referenced generated service class. </p></li></ol></div><pre class="screen"><span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> EJB3Client <span class="bold"><strong>implements</strong></span> EJB3Remote
{
   @WebServiceRef
   <span class="bold"><strong>public</strong></span> TestEndpointService service4;
 
   @WebServiceRef
   <span class="bold"><strong>public</strong></span> TestEndpoint port3;
</pre><p><span class="bold"><strong>WebServiceRef Customization</strong></span></p><p>Starting from jboss-5.0.x we offer a number of overrides and extensions to the WebServiceRef annotation. These include</p><div class="itemizedlist"><ul><li><p> define the port that should be used to resolve a container-managed port </p></li><li><p> define default Stub property settings for Stub objects </p></li><li><p> define the URL of a final WSDL document to be used </p></li></ul></div><p>Example:</p><pre class="screen">  &lt;service-ref&gt;
   &lt;service-ref-name&gt;OrganizationService&lt;/service-ref-name&gt;
   &lt;wsdl-override&gt;file:/wsdlRepository/organization-service.wsdl&lt;/wsdl-override&gt;
  &lt;/service-ref&gt;

  &lt;service-ref&gt;
   &lt;service-ref-name&gt;OrganizationService&lt;/service-ref-name&gt;
   &lt;config-name&gt;Secure Client Config&lt;/config-name&gt;
   &lt;config-file&gt;META-INF/jbossws-client-config.xml&lt;/config-file&gt;
   &lt;handler-chain&gt;META-INF/jbossws-client-handlers.xml&lt;/handler-chain&gt;
  &lt;/service-ref&gt;
  
  &lt;service-ref&gt;
   &lt;service-ref-name&gt;SecureService&lt;/service-ref-name&gt;
   &lt;service-impl-class&gt;org.jboss.tests.ws.jaxws.webserviceref.SecureEndpointService&lt;/service-impl-class&gt;
   &lt;service-qname&gt;{http://org.jboss.ws/wsref}SecureEndpointService&lt;/service-qname&gt;
    &lt;port-component-ref&gt;
     &lt;service-endpoint-interface&gt;org.jboss.tests.ws.jaxws.webserviceref.SecureEndpoint&lt;/service-endpoint-interface&gt;
     &lt;port-qname&gt;{http://org.jboss.ws/wsref}SecureEndpointPort&lt;/port-qname&gt;
     &lt;stub-property&gt;
      &lt;prop-name&gt;javax.xml.ws.security.auth.username&lt;/prop-name&gt;
      &lt;prop-value&gt;kermit&lt;/prop-value&gt;
     &lt;/stub-property&gt;
     &lt;stub-property&gt;
      &lt;prop-name&gt;javax.xml.ws.security.auth.password&lt;/prop-name&gt;
      &lt;prop-value&gt;thefrog&lt;/prop-value&gt;
     &lt;/stub-property&gt;
   &lt;/port-component-ref&gt;
  &lt;/service-ref&gt;
</pre><p>For details please see <span class="bold"><strong>service-ref_5_0.dtd</strong></span> in the jboss docs directory.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Dispatch"/>2.1.3.4. Dispatch</h4></div></div></div><p>XMLWeb Services use XML messages for communication between services and service clients. The higher level JAX-WS APIs are designed to hide the details of converting between Java method invocations and the corresponding XML messages, but in some cases operating at the XML message level is desirable. The Dispatch interface provides support for this mode of interaction.</p><p>Dispatch supports two usage modes, identified by the constants javax.xml.ws.Service.Mode.MESSAGE and javax.xml.ws.Service.Mode.PAYLOAD respectively:</p><p><span class="bold"><strong>Message</strong></span> In this mode, client applications work directly with protocol-specific message structures. E.g., when used with a SOAP protocol binding, a client application would work directly with a SOAP message.</p><p><span class="bold"><strong>Message Payload</strong></span> In this mode, client applications work with the payload of messages rather than the messages themselves. E.g., when used with a SOAP protocol binding, a client application would work with the contents of the SOAP Body rather than the SOAP message as a whole.</p><p>Dispatch is a low level API that requires clients to construct messages or message payloads as XML and requires an intimate knowledge of the desired message or payload structure. Dispatch is a generic class that supports input and output of messages or message payloads of any type.</p><pre class="screen">      Service service = Service.create(wsdlURL, serviceName);
      Dispatch dispatch = service.createDispatch(portName, StreamSource.class, Mode.PAYLOAD);
 
      String payload = "&lt;ns1:ping xmlns:ns1='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://oneway.samples.jaxws.ws.test.jboss.org/'/">http://oneway.samples.jaxws.ws.test.jboss.org/'/</a>&gt;";
      dispatch.invokeOneWay(<span class="bold"><strong>new</strong></span> StreamSource(<span class="bold"><strong>new</strong></span> StringReader(payload)));
 
      payload = "&lt;ns1:feedback xmlns:ns1='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://oneway.samples.jaxws.ws.test.jboss.org/'/">http://oneway.samples.jaxws.ws.test.jboss.org/'/</a>&gt;";
      Source retObj = (Source)dispatch.invoke(<span class="bold"><strong>new</strong></span> StreamSource(<span class="bold"><strong>new</strong></span> StringReader(payload)));
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Asynchronous_Invocations"/>2.1.3.5. Asynchronous Invocations</h4></div></div></div><p>The BindingProvider interface represents a component that provides a protocol binding for use by clients, it is implemented by proxies and is extended by the Dispatch interface.</p><p>BindingProvider instances may provide asynchronous operation capabilities. When used, asynchronous operation invocations are decoupled from the BindingProvider instance at invocation time such that the response context is not updated when the operation completes. Instead a separate response context is made available using the Response interface.</p><pre class="screen">   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>void</strong></span> testInvokeAsync() <span class="bold"><strong>throws</strong></span> Exception
   {
      URL wsdlURL = <span class="bold"><strong>new</strong></span> URL("<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://">http://</a>" + getServerHost() + ":8080/jaxws-samples-asynchronous?wsdl");
      QName serviceName = <span class="bold"><strong>new</strong></span> QName(targetNS, "TestEndpointService");
      Service service = Service.create(wsdlURL, serviceName);
      TestEndpoint port = service.getPort(TestEndpoint.class);
 
      Response response = port.echoAsync("Async");
 
      // access future
      String retStr = (String) response.get();
      assertEquals("Async", retStr);
   }
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Oneway_Invocations"/>2.1.3.6. Oneway Invocations</h4></div></div></div><p>@Oneway indicates that the given web method has only an input message and no output. Typically, a oneway method returns the thread of control to the calling application prior to executing the actual business method.</p><pre class="screen">@WebService (name="PingEndpoint")
@SOAPBinding(style = SOAPBinding.Style.RPC)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> PingEndpointImpl
{
   <span class="bold"><strong>private</strong></span> <span class="bold"><strong>static</strong></span> String feedback;
   
   @WebMethod
   @Oneway
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>void</strong></span> ping()
   {
      log.info("ping");
      feedback = "ok";
   }
   
   @WebMethod
   <span class="bold"><strong>public</strong></span> String feedback()
   {
      log.info("feedback");
      <span class="bold"><strong>return</strong></span> feedback;
   }
}
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Oneway_Invocations_697545"/>2.1.3.7. Timeout Configuration</h4></div></div></div><p>There are two properties to configure the http connection timeout and client receive time out:</p><pre class="screen"> public void testConfigureTimeout() throws Exception    {   //Set timeout until a connection is established   ((BindingProvider) port).getRequestContext().          put("javax.xml.ws.client.connectionTimeout", "6000");  //Set timeout until the response is received         ((BindingProvider) port).getRequestContext().          put("javax.xml.ws.client.receiveTimeout", "1000");    port.echo("testTimeout");    }
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-UserGuide_Common_API"/>2.1.4. Common API</h3></div></div></div><p>This sections describes concepts that apply equally to <a href="#JBossWS-UserGuide_Web_Service_Endpoints" title="2.1.2. Web Service Endpoints">Web Service Endpoints</a> and <a href="#JBossWS-UserGuide_Web_Service_Clients" title="2.1.3. Web Service Clients">Web Service Clients</a>.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Handler_Framework"/>2.1.4.1. Handler Framework</h4></div></div></div><p>The handler framework is implemented by a JAX-WS protocol binding in both client and server side runtimes. Proxies, and Dispatch instances, known collectively as binding providers, each use protocol bindings to bind their abstract functionality to specific protocols.</p><p>Client and server-side handlers are organized into an ordered list known as a handler chain. The handlers within a handler chain are invoked each time a message is sent or received. Inbound messages are processed by handlers prior to binding provider processing. Outbound messages are processed by handlers after any binding provider processing.</p><p>Handlers are invoked with a message context that provides methods to access and modify inbound and outbound messages and to manage a set of properties. Message context properties may be used to facilitate communication between individual handlers and between handlers and client and service implementations. Different types of handlers are invoked with different types of message context.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_Logical_Handler"/>2.1.4.1.1. Logical Handler</h5></div></div></div><p>Handlers that only operate on message context properties and message payloads. Logical handlers are protocol agnostic and are unable to affect protocol specific parts of a message. Logical handlers are handlers that implement javax.xml.ws.handler.LogicalHandler.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_Protocol_Handler"/>2.1.4.1.2. Protocol Handler</h5></div></div></div><p>Handlers that operate on message context properties and protocol specific messages. Protocol handlers are specific to a particular protocol and may access and change protocol specific aspects of a message. Protocol handlers are handlers that implement any interface derived from javax.xml.ws.handler.Handler except javax.xml.ws.handler.LogicalHandler.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_Service_endpoint_handlers"/>2.1.4.1.3. Service endpoint handlers</h5></div></div></div><p>On the service endpoint, handlers are defined using the @HandlerChain annotation.</p><pre class="screen">@WebService
@HandlerChain(file = "jaxws-server-source-handlers.xml")
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> SOAPEndpointSourceImpl
{
   ...
}
</pre><p>The location of the handler chain file supports 2 formats</p><p>1. An absolute java.net.URL in externalForm. (ex: <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://myhandlers.foo.com/handlerfile1.xml">http://myhandlers.foo.com/handlerfile1.xml</a>)</p><p>2. A relative path from the source file or class file. (ex: bar/handlerfile1.xml)</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_Service_client_handlers"/>2.1.4.1.4. Service client handlers</h5></div></div></div><p>On the client side, handler can be configured using the @HandlerChain annotation on the SEI or dynamically using the API.</p><pre class="screen">      Service service = Service.create(wsdlURL, serviceName);
      Endpoint port = (Endpoint)service.getPort(Endpoint.class);
      
      BindingProvider bindingProvider = (BindingProvider)port;
      List&lt;Handler&gt; handlerChain = <span class="bold"><strong>new</strong></span> ArrayList&lt;Handler&gt;();
      handlerChain.add(<span class="bold"><strong>new</strong></span> LogHandler());
      handlerChain.add(<span class="bold"><strong>new</strong></span> AuthorizationHandler());
      handlerChain.add(<span class="bold"><strong>new</strong></span> RoutingHandler());
      bindingProvider.getBinding().setHandlerChain(handlerChain); // important!
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Message_Context"/>2.1.4.2. Message Context</h4></div></div></div><p>MessageContext is the super interface for all JAX-WS message contexts. It extends Map&lt;String,Object&gt; with additional methods and constants to manage a set of properties that enable handlers in a handler chain to share processing related state. For example, a handler may use the put method to insert a property in the message context that one or more other handlers in the handler chain may subsequently obtain via the get method.</p><p>Properties are scoped as either APPLICATION or HANDLER. All properties are available to all handlers for an instance of an MEP on a particular endpoint. E.g., if a logical handler puts a property in the message context, that property will also be available to any protocol handlers in the chain during the execution of an MEP instance. APPLICATION scoped properties are also made available to client applications (see section 4.2.1) and service endpoint implementations. The defaultscope for a property is HANDLER.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_Logical_Message_Context"/>2.1.4.2.1. Logical Message Context</h5></div></div></div><p><a href="#JBossWS-UserGuide_Logical_Handler" title="2.1.4.1.1. Logical Handler">Logical Handlers</a> are passed a message context of type LogicalMessageContext when invoked. LogicalMessageContext extends MessageContext with methods to obtain and modify the message payload, it does not provide access to the protocol specific aspects of amessage. A protocol binding defines what component of a message are available via a logical message context. The SOAP binding defines that a logical handler deployed in a SOAP binding can access the contents of the SOAP body but not the SOAP headers whereas the XML/HTTP binding defines that a logical handler can access the entire XML payload of a message.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_SOAP_Message_Context"/>2.1.4.2.2. SOAP Message Context</h5></div></div></div><p>SOAP handlers are passed a SOAPMessageContext when invoked. SOAPMessageContext extends MessageContext with methods to obtain and modify the SOAP message payload.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Fault_Handling"/>2.1.4.3. Fault Handling</h4></div></div></div><p>An implementation may thow a SOAPFaultException</p><pre class="screen">   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>void</strong></span> throwSoapFaultException()
   {
      SOAPFactory factory = SOAPFactory.newInstance();
      SOAPFault fault = factory.createFault("this is a fault string!", <span class="bold"><strong>new</strong></span> QName("<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://foo">http://foo</a>", "FooCode"));
      fault.setFaultActor("mr.actor");
      fault.addDetail().addChildElement("test");
      <span class="bold"><strong>throw</strong></span> <span class="bold"><strong>new</strong></span> SOAPFaultException(fault);
   }
</pre><p>or an application specific user exception</p><pre class="screen">   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>void</strong></span> throwApplicationException() <span class="bold"><strong>throws</strong></span> UserException
   {
      <span class="bold"><strong>throw</strong></span> <span class="bold"><strong>new</strong></span> UserException("validation", 123, "Some validation error");
   }
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><span class="bold"><strong>Note</strong></span></p><p>In case of the latter JBossWS generates the required fault wrapper beans at runtime if they are not part of the deployment</p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_JBossWS_Extensions"/>2.1.4.4. JBossWS Extensions</h4></div></div></div><p>This section describes propriatary JBoss extensions to JAX-WS, that works with all the supported stacks.</p><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="JBossWS-UserGuide_Proprietary_Annotations"/>2.1.4.4.1. Proprietary Annotations</h5></div></div></div><p>For the set of standard annotations, please have a look at <a href="#chap_JBossWS-JAX-WSAnnotations" title="Chapter 16. JBossWS-JAX-WSAnnotations">JAX-WS_Annotations</a>.</p><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h6 class="title"><a id="JBossWS-UserGuide_WebContext"/>2.1.4.4.1.1. WebContext</h6></div></div></div><pre class="screen">/**
 * Provides web context specific meta data to EJB based web service endpoints.
 *
 * @author <a xmlns:xlink="http://www.w3.org/1999/xlink" href="mailto:thomas.diesler@jboss.org">thomas.diesler@jboss.org</a>
 * @since 26-Apr-2005
 */
@Retention(value = RetentionPolicy.RUNTIME)
@Target(value = { ElementType.TYPE })
<span class="bold"><strong>public</strong></span> @<span class="bold"><strong>interface</strong></span> WebContext {
 
   /** 
    * The contextRoot element specifies the context root that the web service endpoint is deployed to.
    * If it is not specified it will be derived from the deployment short name.
    * 
    * Applies to server side port components only. 
    */
   String contextRoot() <span class="bold"><strong>default</strong></span> "";
   
   /** 
    * The virtual hosts that the web service endpoint is deployed to.
    * 
    * Applies to server side port components only.
    */
   String[] virtualHosts() <span class="bold"><strong>default</strong></span> {};
   
   /** 
    * Relative path that is appended to the contextRoot to form fully qualified
    * endpoint address for the web service endpoint.
    * 
    * Applies to server side port components only. 
    */
   String urlPattern() <span class="bold"><strong>default</strong></span> "";
 
   /**
    * The authMethod is used to configure the authentication mechanism for the web service. 
    * As a prerequisite to gaining access to any web service which are protected by an authorization
    * constraint, a user must have authenticated using the configured mechanism.
    *
    * Legal values for this element are "BASIC", or "CLIENT-CERT".
    */
   String authMethod() <span class="bold"><strong>default</strong></span> "";
 
   /**
    * The transportGuarantee specifies that the communication
    * between client and server should be NONE, INTEGRAL, or
    * CONFIDENTIAL. NONE means that the application does not require any
    * transport guarantees. A value of INTEGRAL means that the application
    * requires that the data sent between the client and server be sent in
    * such a way that it can't be changed in transit. CONFIDENTIAL means
    * that the application requires that the data be transmitted in a
    * fashion that prevents other entities from observing the contents of
    * the transmission. In most cases, the presence of the INTEGRAL or
    * CONFIDENTIAL flag will indicate that the use of SSL is required.
    */
   String transportGuarantee() <span class="bold"><strong>default</strong></span> "";
 
   /**
    * A secure endpoint does not secure wsdl access by default.
    * Explicitly setting secureWSDLAccess overrides this behaviour.
    * 
    * Protect access to WSDL. See <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.jboss.org/jira/browse/JBWS-723">http://jira.jboss.org/jira/browse/JBWS-723</a>   
    */
   <span class="bold"><strong>boolean</strong></span> secureWSDLAccess() <span class="bold"><strong>default</strong></span> <span class="bold"><strong>false</strong></span>;
}
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h6 class="title"><a id="JBossWS-UserGuide_SecurityDomain"/>2.1.4.4.1.2. SecurityDomain</h6></div></div></div><pre class="screen">/**
 * Annotation for specifying the JBoss security domain for an EJB
 * 
 * @author &lt;a href="mailto:<a xmlns:xlink="http://www.w3.org/1999/xlink" href="mailto:bill@jboss.org">bill@jboss.org</a>"&gt;Bill Burke&lt;/a&gt;
 **/
@Target(ElementType.TYPE) @Retention(RetentionPolicy.RUNTIME)
<span class="bold"><strong>public</strong></span> @<span class="bold"><strong>interface</strong></span> SecurityDomain
{
   /**
    * The required name for the security domain.
    * 
    * Do not use the JNDI name
    * 
    *    Good: "MyDomain"
    *    Bad:  "java:/jaas/MyDomain"
    */
   String value();
   
   /**
    * The name for the unauthenticated pricipal
    */
   String unauthenticatedPrincipal() <span class="bold"><strong>default</strong></span> "";
</pre></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_JAXB_Introductions"/>2.1.4.5. JAXB Introductions</h4></div></div></div><p>As Kohsuke Kawaguchi writes on <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://weblogs.java.net/blog/kohsuke/archive/2007/07/binding_3rd_par.html">his blog</a>, one common complaint from the JAXB users is the lack of support for binding 3rd party classes. The scenario is this  you are trying to annotate your classes with JAXB annotations to make it XML bindable, but some of the classes are coming from libraries and JDK, and thus you cannot put necessary JAXB annotations on it.</p><p>To solve this JAXB has been designed to provide hooks for programmatic introduction of annotations to the runtime.</p><p>This is currently leveraged by the JBoss JAXB Introductions project, using which users can define annotations in XML and make JAXB see those as if those were in the class files (perhaps coming from 3rd party libraries).</p><p> </p><p>JAXB Introductions are currently supported in JBossWS-Native (server side only, since 3.0.2.GA) and JBossWS-CXF (both server and client side, since 3.2.1.GA).</p><p>Take a look at the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/docs/DOC-10075">JAXB Introductions page</a> on the wiki and at the examples in the sources.</p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-UserGuide_Tools"/>2.1.5. Tools</h3></div></div></div><p>The JBossWS Web Service Framework provides unified tooling for all the supported stacks. This currently includes common JAX-WS tools for both contract-first and code-first development and common management tools.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_JAXWS_tools"/>2.1.5.1. JAX-WS tools</h4></div></div></div><p>Please refer to <a href="#chap_JBossWS-JAX-WSTools" title="Chapter 4. JBossWS-JAX-WSTools">JBossWS_JAX-WS_Tools</a> for details. This covers directions on web service contract generation (bottom-up development) and consumption (top-down and client development).</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Management_tools"/>2.1.5.2. Management tools</h4></div></div></div><p>JBoss and its web service framework come with some tools allowing WS endpoint management.</p><p>Please refer the <a href="#chap_JBossWS-Endpointmanagement" title="Chapter 10. JBossWS-Endpointmanagement">Endpoint management</a> page for an overview of the available tools. In particular the <a href="#chap_JBossWS-Recordsmanagement" title="Chapter 11. JBossWS-Recordsmanagement">JBossWS - Records management</a> gives administrators a means of performing custom analysis of their web service traffic as well as exporting communication logs.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Web_Service_console"/>2.1.5.3. Web Service console</h4></div></div></div><p>All supported stacks provide a web console for getting the list of the endpoints currently deployed on a given host as well as basic metrics regarding invocations to them. The console is available at <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost:8080/jbossws/services">http://localhost:8080/jbossws/services</a> assuming your application server is currently bound to localhost:8080.</p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-UserGuide_Configuration"/>2.1.6. Configuration</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-UserGuide_Address_rewrite"/>2.1.6.1. Address rewrite</h4></div></div></div><p>JBossWS allows users to configure the soap:address attribute in the wsdl contract of deployed services as well as wsdl address in the web service console. [due to a known issue this does not currently work with JBossWS-Metro, see: <a xmlns:xlink="http://www.w3.org/1999/xlink" href="https://jira.jboss.org/jira/browse/JBWS-2462">JBWS-2462</a>]</p><p> </p><p><span class="bold"><strong>Server configuration options</strong></span></p><p> </p><p>There're few attributes in the jbossws deployers configuration (currently in jbossws.deployer/META-INF/stack-agnostic-jboss-beans.xml) controlling the way the soap:address attribute in the wsdl is rewritten.</p><pre class="screen">&lt;bean name="WSServerConfig" class="org.jboss.webservices.integration.config.ServerConfigImpl"&gt;
    &lt;property name="mbeanServer"&gt;&lt;inject bean="WSMBeanServerLocator" property="mbeanServer"/&gt;&lt;/property&gt;

    &lt;property name="webServiceHost"&gt;${jboss.bind.address}&lt;/property&gt;
    &lt;property name="modifySOAPAddress"&gt;true&lt;/property&gt;

    &lt;!--
      &lt;property name="webServiceSecurePort"&gt;8443&lt;/property&gt;
      &lt;property name="webServicePort"&gt;8080&lt;/property&gt;
    --&gt;
  &lt;/bean&gt;
</pre><p> </p><p>If the content of <span class="emphasis"><em>&lt;soap:address&gt;</em></span> in the wsdl is a valid URL, JBossWS will not rewrite it unless <span class="emphasis"><em>modifySOAPAddress</em></span> is true. If the content of <span class="emphasis"><em>&lt;soap:address&gt;</em></span> is not a valid URL instead, JBossWS will always rewrite it using the attribute values given below. Please note that the variable <span class="emphasis"><em>${jboss.bind.address}</em></span> can be used to set the address which the application is bound to at each startup.</p><p> </p><p>The webServiceSecurePort and webServicePort attributes are used to explicitly define the ports to be used for rewriting the SOAP address. If these attributes are not set, the ports will be identified by querying the list of installed connectors. If multiple connectors are found the port of the first connector is used.</p><p> </p><p><span class="bold"><strong>Dynamic rewrite</strong></span></p><p> </p><p>When the application server is bound to multiple addresses or non-trivial real-world network architectures cause request for different external addresses to hit the same endpoint, a static rewrite of the soap:address may not be enough. JBossWS allows for both the soap:address in the wsdl and the wsdl address in the console to be rewritten with the host use in the client request. This way, users always get the right wsdl address assuming they're connecting to an instance having the endpoint they're looking for. To trigger this behaviour, the <span class="bold"><strong>jbossws.undefined.host</strong></span> value has to be specified for the <span class="emphasis"><em>webServiceHost</em></span> attribute.</p><pre class="screen">&lt;property name="webServiceHost"&gt;jbossws.undefined.host&lt;/property&gt;
&lt;property name="modifySOAPAddress"&gt;true&lt;/property&gt;</pre><p> </p><p>Of course, when a confidential transport address is required, the addresses are always rewritten using https protocol and the port currently configured for the https/ssl connector.</p></div></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-StackCXFUserGuide"/>Chapter 3. JBossWS-StackCXFUserGuide</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_JBossWS_CXF_Integration">3.1. JBossWS CXF Integration</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_Creating_a_Bus_instance">3.1.1. Creating a Bus instance</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_Server_Side_Integration_Customization">3.1.2. Server Side Integration Customization</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_Extended_Features">3.2. Extended Features</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSAddressing">3.2.1. WS-Addressing</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSReliableMessaging">3.2.2. WS-ReliableMessaging</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSPolicy">3.2.3. WS-Policy</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_WSSecurity">3.2.4. WS-Security</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_JMS_transport">3.2.5. JMS transport</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_HTTP_server_transport_setup">3.3. HTTP server transport setup</a></span></dt><dt><span class="section"><a href="#JBossWS-StackCXFUserGuide_SOAP_Message_Logging">3.4. SOAP Message Logging</a></span></dt></dl></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>This page covers features available in <span class="bold"><strong>JBossWS CXF stack only</strong></span>. <a href="#chap_JBossWS-UserGuide" title="Chapter 2. JBossWS-UserGuide">Please refer to the common user guide</a> for a basic introduction to JAX-WS programming as well as documentation on all features, tools, etc. the JBossWS Web Service Framework provides for every supported stack (including CXF stack).</p><p> </p><p> </p><p>Also please note this page does not go through the documentation of every feature, option, etc. provided by Apache CXF; on the countrary the only topics covered here are specific issues regarding integration with JBoss and stack specific features provided by JBossWS Web Service Framework for the CXF stack. A few tutorials are also provided for show how to leverage some WS technologies.</p><p> </p><p>The <span class="emphasis"><em>official Apache CXF documentation</em></span> is available <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org">here</a>.</p></div><p/><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-StackCXFUserGuide_JBossWS_CXF_Integration"/>3.1. JBossWS CXF Integration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-StackCXFUserGuide_Creating_a_Bus_instance"/>3.1.1. Creating a Bus instance</h3></div></div></div><p>Most of the Apache CXF features are configurable using the <span class="emphasis"><em>org.apache.cxf.Bus</em></span> class. New Bus instances are produced by the currently configured <span class="emphasis"><em>org.apache.cxf.BusFactory</em></span> implementation the following way:</p><pre class="screen">Bus bus = BusFactory.newInstance().createBus();
</pre><p>The algorithm for selecting the actual implementation of BusFactory to be used leverages the Service API, basically looking for optional configurations in META-INF/services/... location using the current classloader. JBossWS-CXF integration comes with his own implementation of BusFactory, <span class="emphasis"><em>org.jboss.wsf.stack.cxf.client.configuration.JBossWSBusFactory</em></span>, that allows for automatic detection of Spring availability as well as seamless setup of JBossWS customizations on top of Apache CXF. JBossWSBusFactory is <span class="emphasis"><em>automatically</em></span> retrieved by the BusFactory.newInstance() call above.</p><p> </p><p>JBossWS users willing to explicitely use functionalities of <span class="emphasis"><em>org.apache.cxf.bus.spring.SpringBusFactory</em></span> or <span class="emphasis"><em>org.apache.cxf.bus.CXFBusFactory,</em></span> get the same API with JBossWS additions through JBossWSBusFactory:</p><pre class="screen">String myConfigFile = ...
Bus bus = <span class="bold"><strong>new</strong></span> JBossWSBusFactory().createBus(myConfigFile);
</pre><p> </p><pre class="screen">Map&lt;Class, Object&gt; myExtensions = <span class="bold"><strong>new</strong></span> HashMap&lt;Class, Object&gt;();
myExtensions.put(...);
Bus bus = <span class="bold"><strong>new</strong></span> JBossWSBusFactory().createBus(myExtensions);
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-StackCXFUserGuide_Server_Side_Integration_Customization"/>3.1.2. Server Side Integration Customization</h3></div></div></div><p>It is possible to customize the JBossWS and CXF integration by incorporating the CXF configuration file to the endpoint deployment archive. In order for that to be possible, JBossWS-CXF requires Spring to be installed in the application server. The Spring Framework libraries installation can be perfomed using the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/docs/DOC-13545">JBossWS-CXF installation</a>.</p><p>The convention is the following:</p><div class="itemizedlist"><ul><li><p> file name must be <span class="bold"><strong>jbossws-cxf.xml</strong></span> </p></li><li><p> for POJO deployments it is located in <span class="bold"><strong>WEB-INF</strong></span> directory </p></li><li><p> for EJB3 deployments it is located in <span class="bold"><strong>META-INF</strong></span> directory </p></li></ul></div><p>If user do not provide its own CXF configuration file, a default one is automatically generated during the deployment.</p><p>For POJO deployments the generated <span class="bold"><strong>jbossws-cxf.xml</strong></span> has the following content:</p><pre class="screen">&lt;beans
  xmlns='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
  xmlns:xsi='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>'
  xmlns:beans='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
  xmlns:jaxws='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>'
  xsi:schemaLocation='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>
  <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beans/spring-beans.xsd</a>
  <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>
  <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/jaxws.xsd">http://cxf.apache.org/schemas/jaxws.xsd</a>'&gt;

  &lt;!-- one or more jaxws:endpoint POJO declarations --&gt;
  &lt;jaxws:endpoint
    id='POJOEndpoint'
    address='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost:8080/pojo_endpoint_archive_name">http://localhost:8080/pojo_endpoint_archive_name</a>'  
    implementor='my.package.POJOEndpointImpl'&gt;
    &lt;jaxws:invoker&gt;
      &lt;bean class='org.jboss.wsf.stack.cxf.InvokerJSE'/&gt;
    &lt;/jaxws:invoker&gt;
  &lt;/jaxws:endpoint&gt;&lt;/beans&gt;
</pre><p>For EJB3 deployments the generated <span class="bold"><strong>jbossws-cxf.xml</strong></span> has the following content:</p><pre class="screen">&lt;beans
  xmlns='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
  xmlns:xsi='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>'
  xmlns:beans='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
  xmlns:jaxws='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>'
  xsi:schemaLocation='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>
  <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beans/spring-beans.xsd</a>
  <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>
  <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/jaxws.xsd">http://cxf.apache.org/schemas/jaxws.xsd</a>'&gt;

  &lt;!-- one or more jaxws:endpoint EJB3 declarations --&gt;
  &lt;jaxws:endpoint
    id='EJB3Endpoint'
    address='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost:8080/ejb3_endpoint_archive_name">http://localhost:8080/ejb3_endpoint_archive_name</a>'  
    implementor='my.package.EJB3EndpointImpl'&gt;
    &lt;jaxws:invoker&gt;
      &lt;bean class='org.jboss.wsf.stack.cxf.InvokerEJB3'/&gt;
    &lt;/jaxws:invoker&gt;
  &lt;/jaxws:endpoint&gt;&lt;/beans&gt;
</pre><p>Providing custom CXF configuration to the endpoint deployment is useful in cases when users want to use features that are not part of standard JAX-WS specification but CXF implements them. For example see <a href="#chap_JBossWS-CXFWS-ReliableMessagingtutorial" title="Chapter 13. JBossWS-CXFWS-ReliableMessagingtutorial">CXF WS-RM tutorial</a> customization file. We are providing custom CXF endpoint configuration there to turn on WS-RM feature for endpoint.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><span class="emphasis"><em><span class="bold"><strong>Note</strong></span></em></span></p><p><span class="emphasis"><em>When user incorporates its own CXF configuration to the endpoint archive he must reference either <span class="bold"><strong>org.jboss.wsf.stack.cxf.InvokerJSE</strong></span> or <span class="bold"><strong>org.jboss.wsf.stack.cxf.InvokerEJB3</strong></span> jaxws invoker bean there for each jaxws endpoint.</em></span></p><p> </p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-StackCXFUserGuide_Extended_Features"/>3.2. Extended Features</h2></div></div></div><p><a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cwiki.apache.org/CXF20DOC/ws-support.html">Here</a> is the CXF documentation about supported WS-* specifications.</p><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-StackCXFUserGuide_WSAddressing"/>3.2.1. WS-Addressing</h3></div></div></div><p>Apache CXF has a thorough support for WS-Addressing; details are available at the following pages:</p><p><a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cwiki.apache.org/CXF20DOC/ws-addressing.html">CXF WS-Addressing documentation</a> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cwiki.apache.org/CXF20DOC/wsaconfiguration.html">CXF WS-Addressing configuration</a></p><p> </p><p>Given the JAXWS specification currently covers WS-Addressing basic fuctionalities, users simply needing to enable it can make use of the @Addressing annotation and AddressingFeature, as shown in the following JBossWS-CXF tutorial:</p><p><a href="#chap_JBossWS-CXFWS-Addressingtutorial" title="Chapter 12. JBossWS-CXFWS-Addressingtutorial">JBossWS-CXF WS-Addressing Tutorial</a></p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-StackCXFUserGuide_WSReliableMessaging"/>3.2.2. WS-ReliableMessaging</h3></div></div></div><p>The Apache CXF technical documentation on WS-RealiableMessaging is available as a reference at the following pages:</p><p><a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cwiki.apache.org/CXF20DOC/ws-reliablemessaging.html">CXF WS-ReliableMessaging documentation</a> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cwiki.apache.org/CXF20DOC/wsrmconfiguration.html">CXF WS-ReliableMessaging configuration</a></p><p> </p><p>For a complete tutorial on how to enable WS-ReliableMessaging in a user client-server application, please take a look at:</p><p><a href="#chap_JBossWS-CXFWS-ReliableMessagingtutorial" title="Chapter 13. JBossWS-CXFWS-ReliableMessagingtutorial">JBossWS-CXF WS-ReliableMessaging Tutorial</a></p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-StackCXFUserGuide_WSPolicy"/>3.2.3. WS-Policy</h3></div></div></div><p>Apache CXF technical documentation on the WS-Policy engine and its configuration is available at:</p><p><a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cwiki.apache.org/CXF20DOC/ws-policy.html">CXF WS-Policy documentation</a> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cwiki.apache.org/CXF20DOC/wspconfiguration.html">CXF WS-Policy configuration</a></p><p> </p><p>For a complete sample of WS-Policy usage, please take a look at the JBossWS-CXF WS-ReliableMessaging tutorial below, as WS-RM is implemented leveraging policies there:</p><p><a href="#chap_JBossWS-CXFWS-ReliableMessagingtutorial" title="Chapter 13. JBossWS-CXFWS-ReliableMessagingtutorial">JBossWS-CXF WS-Policy &amp; WS-ReliableMessaging Tutorial</a></p><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-StackCXFUserGuide_Note_on_PolicyEngine_setup"/>3.2.3.1. Note on PolicyEngine setup</h4></div></div></div><p>When building up the Bus without Spring libraries available on the classpath, JBossWSBusFactory still makes sure the PolicyEngine (as well as the RMManager) is properly setup. This allows users to leverage basic WS-Policy functionalities the same way they'd do with a full Spring-enabled Bus.</p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-StackCXFUserGuide_WSSecurity"/>3.2.4. WS-Security</h3></div></div></div><p><a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/">Apache CXF</a> leverages <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://ws.apache.org/wss4j/">WSS4J</a> to provide WS-Security functionalities. This means that thanks to the JBossWS-CXF integration, users can create web service applications using CXF - WSS4J implementation of WS-Security and deploy them on JBoss Application Server.</p><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-StackCXFUserGuide_WSS4J_security_on_JBoss"/>3.2.4.1. WSS4J security on JBoss</h4></div></div></div><p>The Apache CXF documentation features an brief chapter on <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cwiki.apache.org/CXF20DOC/ws-security.html">how to use WSS4J security in CXF</a>. Here below instead you'll find some explanations on how to create a simple application and what you need to do to leverage WSS4J security on JBoss.</p><p> </p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong>Creating the web service endpoint </strong></span></span></dt><dd/></dl></div><p>First of all you need to create the web service endpoint / client using JAX-WS. This can be achieved in many ways, for instance you might want to:</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p> write your endpoint implementation, then run the <span class="bold"><strong><span class="emphasis"><em>wsprovide</em></span></strong></span> JBoss commandline tool which generates the service contract (bottom-up approach); </p></li><li><p> run the <span class="bold"><strong><span class="emphasis"><em>wsconsume</em></span></strong></span> JBoss commandline tool to get the client artifacts from the service contract (top-down approach); </p></li><li><p> write your client implementation. </p></li></ol></div><p> </p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong>Turn on WS-Security </strong></span></span></dt><dd/></dl></div><p>WSS4J security is triggered through interceptors that are added to the service and/or client. These interceptors allows you to perform the most common WS-Security related process:</p><div class="itemizedlist"><ul><li><p> pass authentication tokens between services; </p></li><li><p> encrypt messages or parts of messages; </p></li><li><p> sign messages; </p></li><li><p> timestamp messages. </p></li></ul></div><p>Interceptors can be added either programmatically or through the Spring xml configuration of endpoints.</p><p>For instance, on server side, you can configure signature and encryption in the <span class="emphasis"><em>jboss-cxf.xml</em></span> file this way:</p><pre class="screen">&lt;beans
  xmlns='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
  xmlns:xsi='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>'
  xmlns:beans='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
  xmlns:jaxws='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>'
  xsi:schemaLocation='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/core">http://cxf.apache.org/core</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/core.xsd">http://cxf.apache.org/schemas/core.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">http://www.springframework.org/schema/beans/spring-beans-2.0.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/jaxws.xsd">http://cxf.apache.org/schemas/jaxws.xsd</a>'&gt;
  
  &lt;bean id="Sign_Request" class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor"&gt;
    &lt;constructor-arg&gt;
      &lt;map&gt;
        &lt;entry key="action" value="Timestamp Signature Encrypt"/&gt;
        &lt;entry key="signaturePropFile" value="bob.properties"/&gt;
        &lt;entry key="decryptionPropFile" value="bob.properties"/&gt;
        &lt;entry key="passwordCallbackClass" value="org.jboss.test.ws.jaxws.samples.wsse.KeystorePasswordCallback"/&gt;
      &lt;/map&gt;
    &lt;/constructor-arg&gt;
  &lt;/bean&gt;
  
  &lt;bean id="Sign_Response" class="org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor"&gt;
    &lt;constructor-arg&gt;
      &lt;map&gt;
        &lt;entry key="action" value="Timestamp Signature Encrypt"/&gt;
        &lt;entry key="user" value="bob"/&gt;
        &lt;entry key="signaturePropFile" value="bob.properties"/&gt;
        &lt;entry key="encryptionPropFile" value="bob.properties"/&gt;
        &lt;entry key="encryptionUser" value="Alice"/&gt;
        &lt;entry key="signatureKeyIdentifier" value="DirectReference"/&gt;
        &lt;entry key="passwordCallbackClass" value="org.jboss.test.ws.jaxws.samples.wsse.KeystorePasswordCallback"/&gt;
        &lt;entry key="signatureParts" value="{Element}{<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</a>}Timestamp;{Element}{<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a>}Body"/&gt;
        &lt;entry key="encryptionParts" value="{Element}{<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2000/09/xmldsig#">http://www.w3.org/2000/09/xmldsig#</a>}Signature;{Content}{<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a>}Body"/&gt;
        &lt;entry key="encryptionKeyTransportAlgorithm" value="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/04/xmlenc#rsa-1_5">http://www.w3.org/2001/04/xmlenc#rsa-1_5</a>"/&gt;
        &lt;entry key="encryptionSymAlgorithm" value="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/04/xmlenc#tripledes-cbc">http://www.w3.org/2001/04/xmlenc#tripledes-cbc</a>"/&gt;
      &lt;/map&gt;
    &lt;/constructor-arg&gt;
  &lt;/bean&gt;
  
  &lt;jaxws:endpoint
    id='ServiceImpl'
    address='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://@jboss.bind.address@:8080/jaxws-samples-wsse-sign-encrypt">http://@jboss.bind.address@:8080/jaxws-samples-wsse-sign-encrypt</a>'
    implementor='org.jboss.test.ws.jaxws.samples.wsse.ServiceImpl'&gt;
    &lt;jaxws:invoker&gt;
      &lt;bean class='org.jboss.wsf.stack.cxf.InvokerJSE'/&gt;
    &lt;/jaxws:invoker&gt;
    &lt;jaxws:outInterceptors&gt;
        &lt;bean class="org.apache.cxf.binding.soap.saaj.SAAJOutInterceptor"/&gt;
        &lt;ref bean="Sign_Response"/&gt;
    &lt;/jaxws:outInterceptors&gt;
    &lt;jaxws:inInterceptors&gt;
        &lt;ref bean="Sign_Request"/&gt;
        &lt;bean class="org.apache.cxf.binding.soap.saaj.SAAJInInterceptor"/&gt;
    &lt;/jaxws:inInterceptors&gt;
  &lt;/jaxws:endpoint&gt;
&lt;/beans&gt;
</pre><p>This specifies the whole security configuration (including algorithms and elements to be signed/encrypted); moreover it references a properties file (<span class="emphasis"><em>bob.properties</em></span>) providing the keystore-related information:</p><pre class="screen">org.apache.ws.security.crypto.provider=org.apache.ws.security.components.crypto.Merlin
org.apache.ws.security.crypto.merlin.keystore.type=jks
org.apache.ws.security.crypto.merlin.keystore.password=password
org.apache.ws.security.crypto.merlin.keystore.alias=bob
org.apache.ws.security.crypto.merlin.file=bob.jks
</pre><p>As you can see in the <span class="emphasis"><em>jbossws-cxf.xml</em></span> file above, a keystore password callback handler is also configured; while the properties file has the password for the keystore, this callback handler is used to set password for each key (it has to match the one used when each key was imported in the store). Here's a trivial example:</p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.wsse;
 
<span class="bold"><strong>import</strong></span> java.io.IOException;
<span class="bold"><strong>import</strong></span> java.util.HashMap;
<span class="bold"><strong>import</strong></span> java.util.Map;
 
<span class="bold"><strong>import</strong></span> javax.security.auth.callback.Callback;
<span class="bold"><strong>import</strong></span> javax.security.auth.callback.CallbackHandler;
<span class="bold"><strong>import</strong></span> javax.security.auth.callback.UnsupportedCallbackException;
<span class="bold"><strong>import</strong></span> org.apache.ws.security.WSPasswordCallback;
 
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> KeystorePasswordCallback <span class="bold"><strong>implements</strong></span> CallbackHandler
{
   <span class="bold"><strong>private</strong></span> Map&lt;String, String&gt; passwords = <span class="bold"><strong>new</strong></span> HashMap&lt;String, String&gt;();
 
   <span class="bold"><strong>public</strong></span> KeystorePasswordCallback()
   {
      passwords.put("alice", "password");
      passwords.put("bob", "password");
   }
 
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>void</strong></span> handle(Callback[] callbacks) <span class="bold"><strong>throws</strong></span> IOException, UnsupportedCallbackException
   {
      <span class="bold"><strong>for</strong></span> (<span class="bold"><strong>int</strong></span> i = 0; i &lt; callbacks.length; i++)
      {
         WSPasswordCallback pc = (WSPasswordCallback)callbacks[i];
         String pass = passwords.get(pc.getIdentifer());
         <span class="bold"><strong>if</strong></span> (pass != <span class="bold"><strong>null</strong></span>)
         {
            pc.setPassword(pass);
            <span class="bold"><strong>return</strong></span>;
         }
      }
   }
 
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>void</strong></span> setAliasPassword(String alias, String password)
   {
      passwords.put(alias, password);
   }
}
</pre><p>On client side, you can similarly setup the interceptors programmatically; here is an excerpt of the client for the above described endpoint (of course you can also leverage a proper Spring configuration for loading an already configured CXF Bus instance):</p><pre class="screen">Endpoint cxfEndpoint = client.getEndpoint();
Map&lt;String,Object&gt; outProps = <span class="bold"><strong>new</strong></span> HashMap&lt;String,Object&gt;();
outProps.put("action", "Timestamp Signature Encrypt");
outProps.put("user", "alice");
outProps.put("signaturePropFile", "META-INF/alice.properties");
outProps.put("signatureKeyIdentifier", "DirectReference");
outProps.put("passwordCallbackClass", "org.jboss.test.ws.jaxws.samples.wsse.KeystorePasswordCallback");
outProps.put("signatureParts", "{Element}{http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd}Timestamp;{Element}{http://schemas.xmlsoap.org/soap/envelope/}Body");
outProps.put("encryptionPropFile", "META-INF/alice.properties");
outProps.put("encryptionUser", "Bob");
outProps.put("encryptionParts", "{Element}{http://www.w3.org/2000/09/xmldsig#}Signature;{Content}{http://schemas.xmlsoap.org/soap/envelope/}Body");
outProps.put("encryptionSymAlgorithm", "http://www.w3.org/2001/04/xmlenc#tripledes-cbc");
outProps.put("encryptionKeyTransportAlgorithm", "http://www.w3.org/2001/04/xmlenc#rsa-1_5");
WSS4JOutInterceptor wssOut = <span class="bold"><strong>new</strong></span> WSS4JOutInterceptor(outProps); //request
cxfEndpoint.getOutInterceptors().add(wssOut);
cxfEndpoint.getOutInterceptors().add(<span class="bold"><strong>new</strong></span> SAAJOutInterceptor());
      
Map&lt;String,Object&gt; inProps= <span class="bold"><strong>new</strong></span> HashMap&lt;String,Object&gt;();
inProps.put("action", "Timestamp Signature Encrypt");
inProps.put("signaturePropFile", "META-INF/alice.properties");
inProps.put("passwordCallbackClass", "org.jboss.test.ws.jaxws.samples.wsse.KeystorePasswordCallback");
inProps.put("decryptionPropFile", "META-INF/alice.properties");
WSS4JInInterceptor wssIn = <span class="bold"><strong>new</strong></span> WSS4JInInterceptor(inProps); //response
cxfEndpoint.getInInterceptors().add(wssIn);
cxfEndpoint.getInInterceptors().add(<span class="bold"><strong>new</strong></span> SAAJInInterceptor());
</pre><div class="variablelist"><dl><dt><span class="term"/></dt><dd/><dt><span class="term"><span class="bold"><strong>Package and deploy </strong></span></span></dt><dd/></dl></div><p>To deploy your web service endpoint, you need to package the following files along with your service implementation and wsdl contract:</p><div class="itemizedlist"><ul><li><p> the jbossws-cxf.xml descriptor </p></li><li><p> the properties file </p></li><li><p> the keystore file (if required for signature/encryption) </p></li><li><p> the keystore password callback handler class </p></li></ul></div><p>For instance, here are the archive contents for the afore mentioned signature &amp; encryption sample (POJO endpoint):</p><pre class="screen">[alessio@localhost cxf-tests]$ jar -tvf target/test-libs/jaxws-samples-wsse-sign-encrypt.war 
   0 Tue Jun 03 19:41:26 CEST 2008 META-INF/
 106 Tue Jun 03 19:41:24 CEST 2008 META-INF/MANIFEST.MF
   0 Tue Jun 03 19:41:26 CEST 2008 WEB-INF/
   0 Tue Jun 03 19:41:26 CEST 2008 WEB-INF/classes/
   0 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/
   0 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/
   0 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/
   0 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/ws/
   0 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/
   0 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/
   0 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsse/
1628 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsse/KeystorePasswordCallback.class
 364 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsse/ServiceIface.class
 859 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsse/ServiceImpl.class
   0 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsse/jaxws/
 685 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsse/jaxws/SayHello.class
1049 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsse/jaxws/SayHelloResponse.class
2847 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/jbossws-cxf.xml
   0 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/wsdl/
1575 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/wsdl/SecurityService.wsdl
 641 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/wsdl/SecurityService_schema1.xsd
1820 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/bob.jks
 311 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/classes/bob.properties
 573 Tue Jun 03 19:41:24 CEST 2008 WEB-INF/web.xml
</pre><p>On client side, instead, you only need the properties and keystore files (assuming you setup the interceptors programmatically).</p><p>Check that JBossWS-CXF is installed on your current JBoss Application Server, deploy and test your WS-Security-enabled application.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-StackCXFUserGuide_WSSecurity_Policies"/>3.2.4.2. WS-Security Policies</h4></div></div></div><p> </p><p>Starting from JBossWS-CXF 3.1.1, WS-Security Policy implementation is available and can be used to configure WS-Security more easily.</p><p>Please refer to the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cwiki.apache.org/CXF20DOC/ws-securitypolicy.html">Apache CXF documentation</a>; basically instead of manually configuring interceptors in the client or through jbossws-cxf.xml descriptor, you simply provide the right policies in the WSDL contract.</p><pre class="screen">  ...
  &lt;binding name="SecurityServicePortBinding" type="tns:ServiceIface"&gt;
    &lt;wsp:PolicyReference URI="#SecurityServiceSignPolicy"/&gt;
  ...
  &lt;wsp:Policy wsu:Id="SecurityServiceSignPolicy"
    xmlns:sp="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">http://schemas.xmlsoap.org/ws/2005/07/securitypolicy</a>"&gt;
    &lt;wsp:ExactlyOne&gt;
        &lt;wsp:All&gt;
            &lt;sp:AsymmetricBinding xmlns:sp='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">http://schemas.xmlsoap.org/ws/2005/07/securitypolicy</a>'&gt;
                &lt;wsp:Policy&gt;
                    &lt;sp:InitiatorToken&gt;
                        &lt;wsp:Policy&gt;
                            &lt;sp:X509Token sp:IncludeToken='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient">http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient</a>'&gt;
                                &lt;wsp:Policy&gt;
                                    &lt;sp:WssX509V3Token10 /&gt;
                                &lt;/wsp:Policy&gt;
                            &lt;/sp:X509Token&gt;
                        &lt;/wsp:Policy&gt;
                    &lt;/sp:InitiatorToken&gt;
                    &lt;sp:RecipientToken&gt;
                        &lt;wsp:Policy&gt;
                            &lt;sp:X509Token sp:IncludeToken='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/Always">http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/Always</a>'&gt;
                                &lt;wsp:Policy&gt;
                                    &lt;sp:WssX509V3Token10 /&gt;
                                &lt;/wsp:Policy&gt;
                            &lt;/sp:X509Token&gt;
                        &lt;/wsp:Policy&gt;
                    &lt;/sp:RecipientToken&gt;
                    &lt;sp:AlgorithmSuite&gt;
                        &lt;wsp:Policy&gt;
                            &lt;sp:Basic256 /&gt;
                        &lt;/wsp:Policy&gt;
                    &lt;/sp:AlgorithmSuite&gt;
                    &lt;sp:Layout&gt;
                        &lt;wsp:Policy&gt;
                            &lt;sp:Strict /&gt;
                        &lt;/wsp:Policy&gt;
                    &lt;/sp:Layout&gt;
                    &lt;sp:OnlySignEntireHeadersAndBody /&gt;
                &lt;/wsp:Policy&gt;
            &lt;/sp:AsymmetricBinding&gt;
            &lt;sp:Wss10 xmlns:sp='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">http://schemas.xmlsoap.org/ws/2005/07/securitypolicy</a>'&gt;
                &lt;wsp:Policy&gt;
                    &lt;sp:MustSupportRefEmbeddedToken /&gt;
                &lt;/wsp:Policy&gt;
            &lt;/sp:Wss10&gt;
            &lt;sp:SignedParts xmlns:sp='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">http://schemas.xmlsoap.org/ws/2005/07/securitypolicy</a>'&gt;
                &lt;sp:Body /&gt;
            &lt;/sp:SignedParts&gt;
        &lt;/wsp:All&gt;
    &lt;/wsp:ExactlyOne&gt;
  &lt;/wsp:Policy&gt;
  ...
</pre><p>Just few properties are also required to be set either in the message context or in the jbossws-cxf.xml descriptor.</p><pre class="screen">((BindingProvider)proxy).getRequestContext().put(SecurityConstants.CALLBACK_HANDLER, <span class="bold"><strong>new</strong></span> KeystorePasswordCallback());
((BindingProvider)proxy).getRequestContext().put(SecurityConstants.SIGNATURE_PROPERTIES, Thread.currentThread().getContextClassLoader().getResource("META-INF/alice.properties"));
((BindingProvider)proxy).getRequestContext().put(SecurityConstants.ENCRYPT_PROPERTIES, Thread.currentThread().getContextClassLoader().getResource("META-INF/alice.properties"));
</pre><pre class="screen">&lt;beans
  xmlns='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
  xmlns:xsi='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>'
  xmlns:beans='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
  xmlns:jaxws='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>'
  xsi:schemaLocation='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/core">http://cxf.apache.org/core</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/core.xsd">http://cxf.apache.org/schemas/core.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">http://www.springframework.org/schema/beans/spring-beans-2.0.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/jaxws.xsd">http://cxf.apache.org/schemas/jaxws.xsd</a>'&gt;
  
  &lt;jaxws:endpoint
    id='ServiceImpl'
    address='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://@jboss.bind.address@:8080/jaxws-samples-wssePolicy-sign">http://@jboss.bind.address@:8080/jaxws-samples-wssePolicy-sign</a>'
    implementor='org.jboss.test.ws.jaxws.samples.wssePolicy.ServiceImpl'&gt;
    
    &lt;jaxws:properties&gt;
       &lt;entry key="ws-security.signature.properties" value="bob.properties"/&gt;
       &lt;entry key="ws-security.encryption.properties" value="bob.properties"/&gt;
       &lt;entry key="ws-security.callback-handler" value="org.jboss.test.ws.jaxws.samples.wssePolicy.KeystorePasswordCallback"/&gt;
    &lt;/jaxws:properties&gt;
  &lt;/jaxws:endpoint&gt;
&lt;/beans&gt;
</pre><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-StackCXFUserGuide_Authentication_and_authorization"/>3.2.4.3. Authentication and authorization</h4></div></div></div><p> </p><p>The Username Token Profile can of course be used to provide client's credentials to the target endpoint. Starting from JBossWS-CXF 3.3.0 (which includes Apache CXF 2.2.8), the username token information can be used for authentication and authorization on JBoss AS (JAAS integration).</p><p>On server side, you need to specify what follows (for instance using a <span class="emphasis"><em>jbossws-cxf.xml</em></span> descriptor):</p><div class="itemizedlist"><ul><li><p>an interceptor for performing authentication and populating a valid SecurityContext; the provided interceptor should extend org.apache.cxf.ws.security.wss4j.AbstractUsernameTokenAuthenticatingInterceptor, in particular JBossWS integration comes with <span class="emphasis"><em>org.jboss.wsf.stack.cxf.security.authentication.SubjectCreatingInterceptor</em></span> for this;</p></li><li><p>an interceptor for performing authorization; CXF requires that to extend org.apache.cxf.interceptor.security.AbstractAuthorizingInInterceptor, for instance the <span class="emphasis"><em>SimpleAuthorizingInterceptor</em></span> can be used for simply mapping endpoint operations to allowed roles.</p></li></ul></div><pre class="screen">&lt;beans
  xmlns='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
  xmlns:xsi='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>'
  xmlns:beans='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
  xmlns:jaxws='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>'
  xmlns:util='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/util">http://www.springframework.org/schema/util</a>'
  xsi:schemaLocation='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/core">http://cxf.apache.org/core</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/core.xsd">http://cxf.apache.org/schemas/core.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/util">http://www.springframework.org/schema/util</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/util/spring-util-2.0.xsd">http://www.springframework.org/schema/util/spring-util-2.0.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">http://www.springframework.org/schema/beans/spring-beans-2.0.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/jaxws.xsd">http://cxf.apache.org/schemas/jaxws.xsd</a>'&gt;
  
  &lt;bean id="SecurityContextIn"
     class="org.jboss.wsf.stack.cxf.security.authentication.SubjectCreatingInterceptor"&gt;
    &lt;constructor-arg&gt;
      &lt;map&gt;
        &lt;entry key="action" value="UsernameToken"/&gt; 
      &lt;/map&gt;
    &lt;/constructor-arg&gt;
  &lt;/bean&gt;
 
  &lt;util:map id="methodPermissions"&gt;
     &lt;entry key="sayHello" value="friend"/&gt; 
     &lt;entry key="greetMe" value="snoopies"/&gt; 
  &lt;/util:map&gt;
 
  &lt;bean id="AuthorizeIn"
    class="org.apache.cxf.interceptor.security.SimpleAuthorizingInterceptor"&gt;
   &lt;property name="methodRolesMap" ref="methodPermissions"/&gt; 
  &lt;/bean&gt;
  
  &lt;jaxws:endpoint
    id='ServiceImpl'
    address='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://@jboss.bind.address@:8080/jaxws-samples-wsse-username-authorize">http://@jboss.bind.address@:8080/jaxws-samples-wsse-username-authorize</a>'
    implementor='org.jboss.test.ws.jaxws.samples.wsse.ServiceImpl'&gt;
    &lt;jaxws:inInterceptors&gt;
        &lt;ref bean="SecurityContextIn"/&gt;
        &lt;ref bean="AuthorizeIn"/&gt;
        &lt;bean class="org.apache.cxf.binding.soap.saaj.SAAJInInterceptor"/&gt;
    &lt;/jaxws:inInterceptors&gt;
  &lt;/jaxws:endpoint&gt;
&lt;/beans&gt;</pre><p> </p><p>Authentication and authorization will simply be delegated to the security domain configured for the endpoint. Of course you can specify the login module you prefer for that security domain (refer the application server / security documentation for that).</p><p> </p><p>On client side, the username is provided through API (or a custom Spring configuration used to load the Bus):</p><p> </p><pre class="screen">Endpoint cxfEndpoint = client.getEndpoint();
Map&lt;String, Object&gt; outProps = <span class="bold"><strong>new</strong></span> HashMap&lt;String, Object&gt;();
outProps.put("action", "UsernameToken");
outProps.put("user", username);
outProps.put("passwordType", "PasswordText");
outProps.put("passwordCallbackClass", "org.jboss.test.ws.jaxws.samples.wsse.UsernamePasswordCallback");
WSS4JOutInterceptor wssOut = <span class="bold"><strong>new</strong></span> WSS4JOutInterceptor(outProps); //request
cxfEndpoint.getOutInterceptors().add(wssOut);
cxfEndpoint.getOutInterceptors().add(<span class="bold"><strong>new</strong></span> SAAJOutInterceptor());
</pre><p> </p><p>The password instead is provided through a password callback handler that needs to implement <span class="emphasis"><em>javax.security.auth.callback.CallbackHandler</em></span>, similarly to the keystore's password callback handler.</p><p> </p><p>If you're running an older JBossWS-CXF version, or you're not interested in the the application server auth integration, you can use a password callback handler on server side too, configured through a WSS4JInInterceptor:</p><p> </p><pre class="screen">&lt;bean id="UsernameToken_Request"&gt;
  &lt;constructor-arg&gt;
    &lt;map&gt;
      &lt;entry key="action" value="UsernameToken"/&gt; 
      &lt;entry key="passwordCallbackClass" value="org.jboss.test.ws.jaxws.samples.wsse.ServerUsernamePasswordCallback"/&gt; 
    &lt;/map&gt;
  &lt;/constructor-arg&gt;
&lt;/bean&gt;
</pre><p> </p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.wsse;
 
<span class="bold"><strong>import</strong></span> java.io.IOException;
<span class="bold"><strong>import</strong></span> javax.security.auth.callback.CallbackHandler;
<span class="bold"><strong>import</strong></span> javax.security.auth.callback.UnsupportedCallbackException;
<span class="bold"><strong>import</strong></span> org.apache.ws.security.WSPasswordCallback;
 
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> ServerUsernamePasswordCallback <span class="bold"><strong>implements</strong></span> CallbackHandler
{
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>void</strong></span> handle(Callback[] callbacks) <span class="bold"><strong>throws</strong></span> IOException, UnsupportedCallbackException
   {
      WSPasswordCallback pc = (WSPasswordCallback)callbacks[0];
      <span class="bold"><strong>if</strong></span> (!("kermit".equals(pc.getIdentifier()) &amp;&amp; "thefrog".equals(pc.getPassword())))
         <span class="bold"><strong>throw</strong></span> <span class="bold"><strong>new</strong></span> SecurityException("User '" + pc.getIdentifier() + "' with password '" + pc.getPassword() + "' not allowed.");
   }
}
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-StackCXFUserGuide_Further_information"/>3.2.4.4. Further information</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong>Samples </strong></span></span></dt><dd/></dl></div><p>The JBossWS-CXF source distribution comes with some samples using X.509 certificate signature and encryption as well as Username Token Profile. You can find them in package <span class="emphasis"><em>org.jboss.test.ws.jaxws.samples.wsse</em></span> .</p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong>Crypto algorithms </strong></span></span></dt><dd/></dl></div><p>When requiring encryption, you might need to install an additional JCE provider supporting the crypto algorithms Apache CXF uses. This usually means the Bouncy Castle provider need to be configured in your JRE. Please refer the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/docs/DOC-13532">Native stack user</a> guide for further information about this.</p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-StackCXFUserGuide_JMS_transport"/>3.2.5. JMS transport</h3></div></div></div><p><a href="#chap_JBossWS-CXFJMStransporttutorial" title="Chapter 14. JBossWS-CXFJMStransporttutorial">Here</a> is a tutorial on how to deploy and invoke a JMS endpoint using JBossWS-CXF.</p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-StackCXFUserGuide_HTTP_server_transport_setup"/>3.3. HTTP server transport setup</h2></div></div></div><p>Apache CXF comes with pluggable transport layers, allowing different transport modules to be used.</p><p> </p><p>The JBossWS-CXF integration leverages CXF servlet transport for the deployment of endpoints on top of the running JBoss Application Server.</p><p> </p><p>However, when users directly leverage the JAXWS <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://download.oracle.com/javase/6/docs/api/javax/xml/ws/Endpoint.html#publish%28java.lang.String%29">Endpoint.publish(String s)</a> API, endpoints are expected to be deployed on a standalone http server started just for serving the specified endpoint. Apache CXF currently defaults to using the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jetty.codehaus.org/jetty/">Jetty</a> based http transport. Starting <span class="emphasis"><em>from release 3.4.0</em></span>, the JBossWS-CXF integration instead uses a different http transport module based on the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://download.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html">http server</a> embedded in JDK6 distributions. Thanks to Apache CXF transport pluggability, users can still change the transport they want to use in this case by simply replacing the <span class="emphasis"><em>jbossws-cxf-transports-httpserver.jar</em></span> library with another http transport one, for instance the <span class="emphasis"><em>cxf-rt-transports-http-jetty.jar</em></span>.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-StackCXFUserGuide_SOAP_Message_Logging"/>3.4. SOAP Message Logging</h2></div></div></div><p>In the jbossws-cxf-client.jar[*] file you will find META-INF/cxf/cxf-extension-jbossws.xml, which contains the JBossWS extensions to the Apache CXF stack. In that file you need to enable</p><pre class="screen">  &lt;cxf:bus&gt;
    &lt;cxf:inInterceptors&gt;
      &lt;ref bean="logInbound"/&gt;
    &lt;/cxf:inInterceptors&gt;
    &lt;cxf:outInterceptors&gt;
      &lt;ref bean="logOutbound"/&gt;
    &lt;/cxf:outInterceptors&gt;
    &lt;cxf:inFaultInterceptors&gt;
      &lt;ref bean="logOutbound"/&gt;
    &lt;/cxf:inFaultInterceptors&gt;
  &lt;/cxf:bus&gt;
</pre><p> </p><p>Once you've uncommented the cxf-extension-jbossws.xml contents, you need to re-pack the jar/zip.</p><p> </p><p>[*] The cxf-extension-jbossws.xml is available from version 3.2.2; if you don't have that file, you can manually add it and link it in cxf.extensions file.</p><p> </p><p>Finally, please note that logging can be enabled in many ways with Apache CXF, see the following documentation pages for instance:</p><div class="itemizedlist"><ul><li><p><a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/docs/configuration.html">http://cxf.apache.org/docs/configuration.html</a></p></li><li><p><a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/docs/debugging-and-logging.html">http://cxf.apache.org/docs/debugging-and-logging.html</a></p></li></ul></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-JAX-WSTools"/>Chapter 4. JBossWS-JAX-WSTools</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-JAX-WSTools_Server_side">4.1. Server side</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-JAX-WSTools_BottomUp_Using_wsprovide">4.1.1. Bottom-Up (Using wsprovide)</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSTools_TopDown_Using_wsconsume">4.1.2. Top-Down (Using wsconsume)</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-JAX-WSTools_Client_Side">4.2. Client Side</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSTools_Commandline_Maven_Plugin_and_Ant_Task_Reference">4.3. Command-line, Maven Plugin and Ant Task Reference</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSTools_JAXWS_binding_customization">4.4. JAX-WS binding customization</a></span></dt></dl></div><p>The JAX-WS tools provided by JBossWS can be used in a variety of ways. First we will look at server-side development strategies, and then proceed to the client.</p><p/><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-JAX-WSTools_Server_side"/>4.1. Server side</h2></div></div></div><p>When developing a Web Service Endpoint (the server-side) you have the option of starting from Java (bottom-up development), or from the abstact contract (WSDL) that defines your service (top-down development). If this is a new service (no existing contract), the bottom-up approach is the fastest route; you only need to add a few annotations to your classes to get a service up and running. However, if you are developing a service with an already defined contract, it is far simpler to use the top-down approach, since the provided tool will generate the annotated code for you.</p><p>Bottom-up use cases:</p><div class="itemizedlist"><ul><li><p> Exposing an already existing EJB3 bean as a Web Service </p></li><li><p> Providing a new service, and you want the contract to be generated for you </p></li></ul></div><p>Top-down use cases:</p><div class="itemizedlist"><ul><li><p> Replacing the implementation of an existing Web Service, and you can't break compatibility with older clients </p></li><li><p> Exposing a service that conforms to a contract specified by a third party (e.g. a vender that calls you back using an already defined protocol). </p></li><li><p> Creating a service that adheres to the XML Schema and WSDL you developed by hand up front </p></li></ul></div><p>The following JAX-WS command line tools are included in JBossWS:</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><thead><tr><th> Command </th><th> Description </th></tr></thead><tbody><tr><td><p><a href="#chap_JBossWS-wsprovide" title="Chapter 6. JBossWS-wsprovide">JBossWS - wsprovide</a></p></td><td>Generates JAX-WS portable artifacts, and provides the abstract contract. Used for bottom-up development.</td></tr><tr><td><p><a href="#chap_JBossWS-wsconsume" title="Chapter 5. JBossWS-wsconsume">JBossWS - wsconsume</a></p></td><td>Consumes the abstract contract (WSDL and Schema files), and produces artifacts for both a server and client. Used for top-down and client development</td></tr><tr><td><p><a href="#chap_JBossWS-wsrunclient" title="Chapter 7. JBossWS-wsrunclient">JBossWS - wsrunclient</a></p></td><td>Executes a Java client (has a main method) using the JBossWS classpath.</td></tr></tbody></table></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSTools_BottomUp_Using_wsprovide"/>4.1.1. Bottom-Up (Using wsprovide)</h3></div></div></div><p>The bottom-up strategy involves developing the Java code for your service, and then annotating it using JAX-WS annotations. These annotations can be used to customize the contract that is generated for your service. For example, you can change the operation name to map to anything you like. However, all of the annotations have sensible defaults, so only the @WebService annotation is required.</p><p>This can be as simple as creating a single class:</p><pre class="screen"><span class="bold"><strong>package</strong></span> echo;
 
@javax.jws.WebService
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> Echo
{
   <span class="bold"><strong>public</strong></span> String echo(String input)
   {
      <span class="bold"><strong>return</strong></span> input;
   }
}
</pre><p>A JSE or EJB3 deployment can be built using this class, and it is the only Java code needed to deploy on JBossWS. The WSDL, and all other Java artifacts called "wrapper classes" will be generated for you at deploy time. This actually goes beyond the JAX-WS specification, which requires that wrapper classes be generated using an offline tool. The reason for this requirement is purely a vender implementation problem, and since we do not believe in burdening a developer with a bunch of additional steps, we generate these as well. However, if you want your deployment to be portable to other application servers, you will unfortunately need to use a tool and add the generated classes to your deployment.</p><p>This is the primary purpose of the <a href="#chap_JBossWS-wsprovide" title="Chapter 6. JBossWS-wsprovide">JBossWS - wsprovide</a>tool, to generate portable JAX-WS artifacts. Additionally, it can be used to "provide" the abstract contract (WSDL file) for your service. This can be obtained by invoking <a href="#chap_JBossWS-wsprovide" title="Chapter 6. JBossWS-wsprovide">JBossWS - wsprovide</a> using the "-w" option:</p><pre class="screen">$ javac -d . -classpath jboss-jaxws.jar Echo.java
$ wsprovide -w echo.Echo
Generating WSDL:
EchoService.wsdl
Writing Classes:
echo/jaxws/Echo.class
echo/jaxws/EchoResponse.class
</pre><p>Inspecting the WSDL reveals a service called EchoService:</p><pre class="screen">&lt;service name='EchoService'&gt;&lt;port binding='tns:EchoBinding' name='EchoPort'&gt;
  &lt;soap:address location='REPLACE_WITH_ACTUAL_URL'/&gt;&lt;/port&gt;
&lt;/service&gt;
</pre><p>As expected, this service defines one operation, "echo":</p><pre class="screen">&lt;portType name='Echo'&gt;&lt;operation name='echo' parameterOrder='echo'&gt;
  &lt;input message='tns:Echo_echo'/&gt;
  &lt;output message='tns:Echo_echoResponse'/&gt;&lt;/operation&gt;
&lt;/portType&gt;
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><span class="emphasis"><em><span class="bold"><strong>Note</strong></span></em></span></p><p><span class="emphasis"><em>Remember that <span class="bold"><strong>when deploying on JBossWS you do not need to run this tool.</strong></span> You only need it for generating portable artifacts and/or the abstract contract for your service.</em></span></p></div><p>Let's create a POJO endpoint for deployment on JBoss AS. A simple web.xml needs to be created:</p><pre class="screen">&lt;web-app xmlns="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/xml/ns/j2ee">http://java.sun.com/xml/ns/j2ee</a>"
  xmlns:xsi="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"
  xsi:schemaLocation="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/xml/ns/j2ee">http://java.sun.com/xml/ns/j2ee</a> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd</a>"
  version="2.4"&gt;

  &lt;servlet&gt;
    &lt;servlet-name&gt;Echo&lt;/servlet-name&gt;
    &lt;servlet-class&gt;echo.Echo&lt;/servlet-class&gt;
  &lt;/servlet&gt;

  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Echo&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/Echo&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</pre><p>The web.xml and the single class can now be used to create a war:</p><pre class="screen">$ mkdir -p WEB-INF/classes
$ cp -rp echo WEB-INF/classes/
$ cp web.xml WEB-INF
$ jar cvf echo.war WEB-INF
added manifest
adding: WEB-INF/(in = 0) (out= 0)(stored 0%)
adding: WEB-INF/classes/(in = 0) (out= 0)(stored 0%)
adding: WEB-INF/classes/echo/(in = 0) (out= 0)(stored 0%)
adding: WEB-INF/classes/echo/Echo.class(in = 340) (out= 247)(deflated 27%)
adding: WEB-INF/web.xml(in = 576) (out= 271)(deflated 52%)
</pre><p>The war can then be deployed:</p><pre class="screen">cp echo.war /usr/local/jboss-4.2.0.GA-ejb3/server/default/deploy
</pre><p>This will internally invoke <a href="#chap_JBossWS-wsprovide" title="Chapter 6. JBossWS-wsprovide">JBossWS - wsprovide</a>, which will generate the WSDL. If deployment was successful, and you are using the default settings, it should be available here: <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost:8080/echo/Echo?wsdl">http://localhost:8080/echo/Echo?wsdl</a></p><p>For a portable JAX-WS deployment, the wrapper classes generated earlier could be added to the deployment.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSTools_TopDown_Using_wsconsume"/>4.1.2. Top-Down (Using wsconsume)</h3></div></div></div><p>The top-down development strategy begins with the abstract contract for the service, which includes the WSDL file and zero or more schema files. The <a href="#chap_JBossWS-wsconsume" title="Chapter 5. JBossWS-wsconsume">JBossWS - wsconsume</a> tool is then used to consume this contract, and produce annotated Java classes (and optionally sources) that define it.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><span class="bold"><strong>Note</strong></span></p><p>wsconsume seems to have a problem with symlinks on unix systems</p></div><p>Using the WSDL file from the bottom-up example, a new Java implementation that adheres to this service can be generated. The "-k" option is passed to <a href="#chap_JBossWS-wsconsume" title="Chapter 5. JBossWS-wsconsume">JBossWS - wsconsume</a> to preserve the Java source files that are generated, instead of providing just classes:</p><pre class="screen"> 
$ wsconsume -k EchoService.wsdl
echo/Echo.java
echo/EchoResponse.java
echo/EchoService.java
echo/Echo_Type.java
echo/ObjectFactory.java
echo/package-info.java
echo/Echo.java
echo/EchoResponse.java
echo/EchoService.java
echo/Echo_Type.java
echo/ObjectFactory.java
echo/package-info.java
</pre><p>The following table shows the purpose of each generated file:</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><thead><tr><th> File </th><th> Purpose </th></tr></thead><tbody><tr><td>Echo.java</td><td>Service Endpoint Interface</td></tr><tr><td>Echo_Type.java</td><td>Wrapper bean for request message</td></tr><tr><td>EchoResponse.java</td><td>Wrapper bean for response message</td></tr><tr><td>ObjectFactory.java</td><td>JAXB XML Registry</td></tr><tr><td>package-info.java</td><td>Holder for JAXB package annotations</td></tr><tr><td>EchoService.java</td><td>Used only by JAX-WS clients</td></tr></tbody></table></div><p>Examining the Service Endpoint Interface reveals annotations that are more explicit than in the class written by hand in the bottom-up example, however, these evaluate to the same contract:</p><pre class="screen">@WebService(name = "Echo", targetNamespace = "http://echo/")
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>interface</strong></span> Echo {
    @WebMethod
    @WebResult(targetNamespace = "")
    @RequestWrapper(localName = "echo", targetNamespace = "http://echo/", className = "echo.Echo_Type")
    @ResponseWrapper(localName = "echoResponse", targetNamespace = "http://echo/", className = "echo.EchoResponse")
    <span class="bold"><strong>public</strong></span> String echo(
        @WebParam(name = "arg0", targetNamespace = "")
        String arg0);
 
}
</pre><p>The only missing piece (besides the packaging) is the implementation class, which can now be written, using the above interface.</p><pre class="screen"><span class="bold"><strong>package</strong></span> echo;
 
@javax.jws.WebService(endpointInterface="echo.Echo")
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> EchoImpl <span class="bold"><strong>implements</strong></span> Echo
{
   <span class="bold"><strong>public</strong></span> String echo(String arg0)
   {
      <span class="bold"><strong>return</strong></span> arg0;
   }
}
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-JAX-WSTools_Client_Side"/>4.2. Client Side</h2></div></div></div><p>Before going to detail on the client-side it is important to understand the decoupling concept that is central to Web Services. Web Services are not the best fit for internal RPC, even though they can be used in this way. There are much better technologies for this (CORBA, and RMI for example). Web Services were designed specifically for interoperable coarse-grained correspondence. There is no expectation or guarantee that any party participating in a Web Service interaction will be at any particular location, running on any particular OS, or written in any particular programming language. So because of this, it is important to clearly separate client and server implementations. The only thing they should have in common is the abstract contract definition. If, for whatever reason, your software does not adhere to this principal, then you should not be using Web Services. For the above reasons, the <span class="emphasis"><em><span class="bold"><strong>recommended methodology for developing a client is</strong></span></em></span> to follow <span class="emphasis"><em><span class="bold"><strong>the top-down approach</strong></span></em></span>, even if the client is running on the same server.</p><p>Let's repeat the process of the top-down section, although using the deployed WSDL, instead of the one generated offline by <a href="#chap_JBossWS-wsprovide" title="Chapter 6. JBossWS-wsprovide">JBossWS - wsprovide</a>. The reason why we do this is just to get the right value for soap:address. This value must be computed at deploy time, since it is based on container configuration specifics. You could of course edit the WSDL file yourself, although you need to ensure that the path is correct.</p><p>Offline version:</p><pre class="screen">&lt;service name='EchoService'&gt;
  &lt;port binding='tns:EchoBinding' name='EchoPort'&gt;
   &lt;soap:address location='REPLACE_WITH_ACTUAL_URL'/&gt;
  &lt;/port&gt;&lt;/service&gt;
</pre><p>Online version:</p><pre class="screen">&lt;service name="EchoService"&gt;
  &lt;port binding="tns:EchoBinding" name="EchoPort"&gt;
    &lt;soap:address location="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost.localdomain:8080/echo/Echo">http://localhost.localdomain:8080/echo/Echo</a>"/&gt;
  &lt;/port&gt;
&lt;/service&gt;
</pre><p>Using the online deployed version with <a href="#chap_JBossWS-wsconsume" title="Chapter 5. JBossWS-wsconsume">JBossWS - wsconsume</a>:</p><pre class="screen">$ wsconsume -k http://localhost:8080/echo/Echo?wsdl
echo/Echo.java
echo/EchoResponse.java
echo/EchoService.java
echo/Echo_Type.java
echo/ObjectFactory.java
echo/package-info.java
echo/Echo.java
echo/EchoResponse.java
echo/EchoService.java
echo/Echo_Type.java
echo/ObjectFactory.java
echo/package-info.java
</pre><p>The one class that was not examined in the top-down section, was EchoService.java. Notice how it stores the location the WSDL was obtained from.</p><pre class="screen">@WebServiceClient(name = "EchoService", targetNamespace = "http://echo/", wsdlLocation = "http://localhost:8080/echo/Echo?wsdl")
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> EchoService <span class="bold"><strong>extends</strong></span> Service
{
    <span class="bold"><strong>private</strong></span> <span class="bold"><strong>final</strong></span> <span class="bold"><strong>static</strong></span> URL ECHOSERVICE_WSDL_LOCATION;
 
    <span class="bold"><strong>static</strong></span> {
        URL url = <span class="bold"><strong>null</strong></span>;
        <span class="bold"><strong>try</strong></span> {
            url = <span class="bold"><strong>new</strong></span> URL("http://localhost:8080/echo/Echo?wsdl");
        } <span class="bold"><strong>catch</strong></span> (MalformedURLException e) {
            e.printStackTrace();
        }
        ECHOSERVICE_WSDL_LOCATION = url;
    }
 
    <span class="bold"><strong>public</strong></span> EchoService(URL wsdlLocation, QName serviceName) {
        <span class="bold"><strong>super</strong></span>(wsdlLocation, serviceName);
    }
 
    <span class="bold"><strong>public</strong></span> EchoService() {
        <span class="bold"><strong>super</strong></span>(ECHOSERVICE_WSDL_LOCATION, <span class="bold"><strong>new</strong></span> QName("http://echo/", "EchoService"));
    }
 
    @WebEndpoint(name = "EchoPort")
    <span class="bold"><strong>public</strong></span> Echo getEchoPort() {
        <span class="bold"><strong>return</strong></span> (Echo)super.getPort(<span class="bold"><strong>new</strong></span> QName("http://echo/", "EchoPort"), Echo.class);
    }
}
</pre><p>As you can see, this generated class extends the main client entry point in JAX-WS, javax.xml.ws.Service. While you can use Service directly, this is far simpler since it provides the configuration info for you. The only method we really care about is the getEchoPort() method, which returns an instance of our Service Endpoint Interface. Any WS operation can then be called by just invoking a method on the returned interface.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><span class="emphasis"><em><span class="bold"><strong>Note</strong></span></em></span></p><p><span class="emphasis"><em>It's not recommended to refer to a remote WSDL URL in a production application. This causes network I/O every time you instantiate the Service Object. Instead, use the tool on a saved local copy, or use the URL version of the constructor to provide a new WSDL location.</em></span></p></div><p>All that is left to do, is write and compile the client:</p><pre class="screen"><span class="bold"><strong>import</strong></span> echo.*;
 
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> EchoClient
{
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>static</strong></span> <span class="bold"><strong>void</strong></span> main(String args[])
   {
      <span class="bold"><strong>if</strong></span> (args.length != 1)
      {
         System.err.println("usage: EchoClient &lt;message&gt;");
         System.exit(1);
      }
       
      EchoService service = <span class="bold"><strong>new</strong></span> EchoService();
      Echo echo = service.getEchoPort();
      System.out.println("Server said: " + echo.echo(args[0]));
   }}
</pre><p>It can then be easily executed using the <a href="#chap_JBossWS-wsrunclient" title="Chapter 7. JBossWS-wsrunclient">JBossWS - wsrunclient</a> tool. This is just a convenience tool that invokes java with the needed classpath:</p><pre class="screen">$ wsrunclient EchoClient 'Hello World!'
Server said: Hello World!
</pre><p>It is easy to change the endpoint address of your operation at runtime, setting the ENDPOINT_ADDRESS_PROPERTY as shown below:</p><pre class="screen">...
      EchoService service = <span class="bold"><strong>new</strong></span> EchoService();
      Echo echo = service.getEchoPort();
 
      /* Set NEW Endpoint Location */
      String endpointURL = "http://NEW_ENDPOINT_URL";
      BindingProvider bp = (BindingProvider)echo;
      bp.getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, endpointURL);
 
      System.out.println("Server said: " + echo.echo(args[0]));
...
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-JAX-WSTools_Commandline_Maven_Plugin_and_Ant_Task_Reference"/>4.3. Command-line, Maven Plugin and Ant Task Reference</h2></div></div></div><div class="itemizedlist"><ul><li><p> <a href="#chap_JBossWS-wsconsume" title="Chapter 5. JBossWS-wsconsume">JBossWS - wsconsume</a> reference page </p></li><li><p> <a href="#chap_JBossWS-wsprovide" title="Chapter 6. JBossWS-wsprovide">JBossWS - wsprovide</a> reference page </p></li><li><p> <a href="#chap_JBossWS-wsrunclient" title="Chapter 7. JBossWS-wsrunclient">JBossWS - wsrunclient</a> reference page</p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-JAX-WSTools_JAXWS_binding_customization"/>4.4. JAX-WS binding customization</h2></div></div></div><p>An introduction to binding customizations:</p><div class="itemizedlist"><ul><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/webservices/docs/2.0/jaxws/customizations.html">http://java.sun.com/webservices/docs/2.0/jaxws/customizations.html</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="https://jax-ws.dev.java.net/source/browse/jax-ws/guide/docs/wsdl-customization.xsd?rev=1.2&amp;view=log">binding schema</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="https://jax-ws.dev.java.net/nonav/guide/customizations/">xnsdoc</a> </p></li></ul></div><p>The schema for the binding customization files can be found here:</p><div class="itemizedlist"><ul><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="https://jax-ws.dev.java.net/source/browse/jax-ws/guide/docs/wsdl-customization.xsd?rev=1.2&amp;view=log">https://jax-ws.dev.java.net/source/browse/jax-ws/guide/docs/wsdl-customization.xsd?rev=1.2&amp;view=log</a> </p></li></ul></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-wsconsume"/>Chapter 5. JBossWS-wsconsume</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Command_Line_Tool">5.1. Command Line Tool</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Examples">5.1.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsconsume_Maven_Plugin">5.2. Maven Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Examples_187752">5.2.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsconsume_Ant_Task">5.3. Ant Task</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsconsume_Examples_184359">5.3.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsconsume_Related_information">5.4. Related information</a></span></dt></dl></div><p>wsconsume is a command line tool and ant task that "consumes" the abstract contract (WSDL file) and produces portable JAX-WS service and client artifacts. For a more detailed overview, see <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/docs/DOC-13544#TopDown_Using_wsconsume">"Using wsconsume"</a>.</p><p/><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-wsconsume_Command_Line_Tool"/>5.1. Command Line Tool</h2></div></div></div><p>The command line tool has the following usage:</p><pre class="screen">usage: wsconsume [options] &lt;wsdl-url&gt;
options: 
  -h, --help                  Show this help message
  -b, --binding=&lt;file&gt;        One or more JAX-WS or JAXB binding files
  -k, --keep                  Keep/Generate Java source
  -c  --catalog=&lt;file&gt;        Oasis XML Catalog file for entity resolution
  -p  --package=&lt;name&gt;        The target package for generated source
  -w  --wsdlLocation=&lt;loc&gt;    Value to use for @WebServiceClient.wsdlLocation
  -o, --output=&lt;directory&gt;    The directory to put generated artifacts
  -s, --source=&lt;directory&gt;    The directory to put Java source
  -t, --target=&lt;2.0|2.1|2.2&gt;  The JAX-WS specification target
  -q, --quiet                 Be somewhat more quiet
  -v, --verbose               Show full exception stack traces
  -l, --load-consumer         Load the consumer and exit (debug utility)
  -e, --extension             Enable SOAP 1.2 binding extension
  -a, --additionalHeaders     Enables processing of implicit SOAP headers</pre><p> </p><p><span class="bold"><strong>Note</strong></span> : The wsdlLocation is used when creating the Service to be used by clients and will be added to the @WebServiceClient annotation, for an endpoint implementation based on the generated service endpoint interface you will need to manually add the wsdlLocation to the @WebService annotation on your web service implementation and not the service endpoint interface.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-wsconsume_Examples"/>5.1.1. Examples</h3></div></div></div><p>Generate artifacts in Java class form only:</p><pre class="screen">wsconsume Example.wsdl
</pre><p>Generate source and class files:</p><pre class="screen">wsconsume -k Example.wsdl
</pre><p>Generate source and class files in a custom directory:</p><pre class="screen">wsconsume -k -o custom Example.wsdl
</pre><p>Generate source and class files in the org.foo package:</p><pre class="screen">wsconsume -k -p org.foo Example.wsdl
</pre><p>Generate source and class files using multiple binding files:</p><pre class="screen">wsconsume -k -b wsdl-binding.xml -b schema1-binding.xml -b schema2-binding.xml</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-wsconsume_Maven_Plugin"/>5.2. Maven Plugin</h2></div></div></div><p>The wsconsume tools is included in the <span class="bold"><strong>org.jboss.ws.plugins:maven-jaxws-tools-plugin</strong></span> plugin. The plugin has two goals for running the tool, <span class="emphasis"><em>wsconsume</em></span> and <span class="emphasis"><em>wsconsume-test</em></span>, which basically do the same during different maven build phases (the former triggers the sources generation during <span class="emphasis"><em>generate-sources</em></span> phase, the latter during the <span class="emphasis"><em>generate-test-sources</em></span> one).</p><p>The wsconsume plugin has the following parameters:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th>Attribute</th><th>Description</th><th>Default </th></tr></thead><tbody><tr><td>bindingFiles</td><td>JAXWS or JAXB binding file</td><td>true</td></tr><tr><td>classpathElements</td><td><p>Each classpathElement provides a</p><p>library file to be added to classpath</p></td><td><p>${project.compileClasspathElements}</p><p>or</p><p>${project.testClasspathElements}</p></td></tr><tr><td>catalog</td><td>Oasis XML Catalog file for entity resolution</td><td>none</td></tr><tr><td>targetPackage</td><td>The target Java package for generated code.</td><td>generated</td></tr><tr><td>bindingFiles</td><td>One or more JAX-WS or JAXB binding file</td><td>none</td></tr><tr><td>wsdlLocation</td><td>Value to use for @WebServiceClient.wsdlLocation</td><td>generated</td></tr><tr><td>outputDirectory</td><td>The output directory for generated artifacts.</td><td><p>${project.build.outputDirectory}</p><p>or</p><p>${project.build.testOutputDirectory}</p></td></tr><tr><td>sourceDirectory</td><td>The output directory for Java source.</td><td>${project.build.directory}/wsconsume/java</td></tr><tr><td>verbose</td><td>Enables more informational output about command progress.</td><td>false</td></tr><tr><td>wsdls</td><td>The WSDL files or URLs to consume</td><td>n/a</td></tr><tr><td>extension</td><td>Enable SOAP 1.2 binding extension.</td><td>false</td></tr></tbody></table></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-wsconsume_Examples_187752"/>5.2.1. Examples</h3></div></div></div><p>You can use wsconsume in your own project build simply referencing the <span class="emphasis"><em>maven-jaxws-tools-plugin</em></span> in the configured plugins in your pom.xml file.</p><p>The following example makes the plugin consume the test.wsdl file and generate SEI and wrappers' java sources. The generated sources are then compiled together with the other project classes.</p><pre class="screen">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.jboss.ws.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-jaxws-tools-plugin&lt;/artifactId&gt;
      &lt;version&gt;1.0.0.GA&lt;/version&gt;
      &lt;configuration&gt;
        &lt;wsdls&gt;
          &lt;wsdl&gt;${basedir}/test.wsdl&lt;/wsdl&gt;
        &lt;/wsdls&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;wsconsume&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</pre><p> </p><p>You can also specify multiple wsdl files, as well as force the target package, enable SOAP 1.2 binding and turn the tool's verbose mode on:</p><p> </p><pre class="screen">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.jboss.ws.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-jaxws-tools-plugin&lt;/artifactId&gt;
      &lt;version&gt;1.0.0.GA&lt;/version&gt;
      &lt;configuration&gt;
        &lt;wsdls&gt;
          &lt;wsdl&gt;${basedir}/test.wsdl&lt;/wsdl&gt;
          &lt;wsdl&gt;${basedir}/test2.wsdl&lt;/wsdl&gt;
        &lt;/wsdls&gt;
        &lt;targetPackage&gt;foo.bar&lt;/targetPackage&gt;
        &lt;extension&gt;true&lt;/extension&gt;
        &lt;verbose&gt;true&lt;/verbose&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;wsconsume&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</pre><p> </p><p>Finally, if the wsconsume invocation is required for consuming a wsdl to be used in your testsuite only, you might want to use the <span class="emphasis"><em>wsconsume-test</em></span> goal as follows:</p><p> </p><pre class="screen">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.jboss.ws.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-jaxws-tools-plugin&lt;/artifactId&gt;
      &lt;version&gt;1.0.0.GA&lt;/version&gt;
      &lt;configuration&gt;
        &lt;wsdls&gt;
          &lt;wsdl&gt;${basedir}/test.wsdl&lt;/wsdl&gt;
        &lt;/wsdls&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;wsconsume-test&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-wsconsume_Ant_Task"/>5.3. Ant Task</h2></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><span class="emphasis"><em><span class="bold"><strong>Note</strong></span></em></span></p><p><span class="emphasis"><em>With 2.0.GA the task was renamed to org.jboss.wsf.spi.tools.ant.WSConsumeTask. Also put streamBuffer.jar and stax-ex.jar in the classpath of the ant task to generate the appropriate artefacts. Both jar files are in the jbossws lib directory. For jbossws-native-2.0.3.GA these files are not automatically installed if you run jboss-deployXX.</em></span></p></div><p>The wsconsume ant task has the following attributes:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th>Attribute</th><th>Description</th><th>Default </th></tr></thead><tbody><tr><td>fork</td><td>Whether or not to run the generation task in a separate VM.</td><td>true</td></tr><tr><td>keep</td><td>Keep/Enable Java source code generation.</td><td>false</td></tr><tr><td>catalog</td><td>Oasis XML Catalog file for entity resolution</td><td>none</td></tr><tr><td>package</td><td>The target Java package for generated code.</td><td>generated</td></tr><tr><td>binding</td><td>A JAX-WS or JAXB binding file</td><td>none</td></tr><tr><td>wsdlLocation</td><td>Value to use for @WebServiceClient.wsdlLocation</td><td>generated</td></tr><tr><td>destdir</td><td>The output directory for generated artifacts.</td><td>"output"</td></tr><tr><td>sourcedestdir</td><td>The output directory for Java source.</td><td>value of destdir</td></tr><tr><td>target</td><td>The JAX-WS specification target. Allowed values are 2.0, 2.1 and 2.2</td><td> </td></tr><tr><td>verbose</td><td>Enables more informational output about command progress.</td><td>false</td></tr><tr><td>wsdl</td><td>The WSDL file or URL</td><td>n/a</td></tr><tr><td>extension</td><td>Enable SOAP 1.2 binding extension.</td><td><p>false</p></td></tr><tr><td>additionalHeaders</td><td>Enables processing of implicit SOAP headers</td><td>false</td></tr></tbody></table></div><p><span class="bold"><strong>Note</strong></span> : The wsdlLocation is used when creating the Service to be used by clients and will be added to the @WebServiceClient annotation, for an endpoint implementation based on the generated service endpoint interface you will need to manually add the wsdlLocation to the @WebService annotation on your web service implementation and not the service endpoint interface.</p><p> </p><p>Also, the following nested elements are supported:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th>Element</th><th>Description</th><th>Default </th></tr></thead><tbody><tr><td>binding</td><td>A JAXWS or JAXB binding file</td><td>none</td></tr><tr><td>jvmarg</td><td>Allows setting of custom jvm arguments</td><td> </td></tr></tbody></table></div><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-wsconsume_Examples_184359"/>5.3.1. Examples</h3></div></div></div><p>Generate JAX-WS source and classes in a separate JVM with separate directories, a custom wsdl location attribute, and a list of binding files from foo.wsdl:</p><pre class="screen">&lt;wsconsume 
  fork="true"
  verbose="true"
  destdir="output"
  sourcedestdir="gen-src"
  keep="true"
  wsdllocation="handEdited.wsdl" 
  wsdl="foo.wsdl"&gt;
  &lt;binding dir="binding-files" includes="*.xml" excludes="bad.xml"/&gt;
&lt;/wsconsume&gt;</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-wsconsume_Related_information"/>5.4. Related information</h2></div></div></div><div class="itemizedlist"><ul><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/webservices/docs/2.0/jaxws/customizations.html">JAX-WS binding customization</a> </p></li></ul></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-wsprovide"/>Chapter 6. JBossWS-wsprovide</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Command_Line_Tool">6.1. Command Line Tool</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Examples">6.1.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsprovide_Maven_Plugin">6.2. Maven Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Examples_147019">6.2.1. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-wsprovide_Ant_Task">6.3. Ant Task</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-wsprovide_Examples_860945">6.3.1. Examples</a></span></dt></dl></dd></dl></div><p>wsprovide is a command line tool and ant task that generates portable JAX-WS artifacts for a service endpoint implementation. It also has the option to "provide" the abstract  contract for offline usage. See <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/docs/DOC-13544#BottomUp_Using_wsprovide">"Using wsprovide"</a> for a detailed walk-through.</p><p/><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-wsprovide_Command_Line_Tool"/>6.1. Command Line Tool</h2></div></div></div><p>The command line tool has the following usage:</p><pre class="screen">  usage: wsprovide [options] &lt;endpoint class name&gt;
  options: 
  -h, --help                  Show this help message
  -k, --keep                  Keep/Generate Java source
  -w, --wsdl                  Enable WSDL file generation
  -c. --classpath=&lt;path&lt;      The classpath that contains the endpoint
  -o, --output=&lt;directory&gt;    The directory to put generated artifacts
  -r, --resource=&lt;directory&gt;  The directory to put resource artifacts
  -s, --source=&lt;directory&gt;    The directory to put Java source
  -e, --extension             Enable SOAP 1.2 binding extension
  -q, --quiet                 Be somewhat more quiet
  -t, --show-traces           Show full exception stack traces</pre><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-wsprovide_Examples"/>6.1.1. Examples</h3></div></div></div><p>Generating wrapper classes for portable artifacts in the "generated" directory:</p><pre class="screen">wsprovide -o generated foo.Endpoint
</pre><p>Generating wrapper classes and WSDL in the "generated" directory</p><pre class="screen">wsprovide -o generated -w foo.Endpoint
</pre><p>Using an endpoint that references other jars</p><pre class="screen">wsprovide -o generated -c application1.jar:application2.jar foo.Endpoint</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-wsprovide_Maven_Plugin"/>6.2. Maven Plugin</h2></div></div></div><p>The wsprovide tools is included in the <span class="bold"><strong>org.jboss.ws.plugins:maven-jaxws-tools-plugin</strong></span> plugin. The plugin has two goals for running the tool, <span class="emphasis"><em>wsprovide</em></span> and <span class="emphasis"><em>wsprovide-test</em></span>, which basically do the same during different maven build phases (the former triggers the sources generation during <span class="emphasis"><em>process-classes</em></span> phase, the latter during the <span class="emphasis"><em>process-test-classes</em></span> one).</p><p>The wsprovide plugin has the following parameters:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Attribute </th><th> Description </th><th> Default </th></tr></thead><tbody><tr><td>testClasspathElements</td><td><p>Each classpathElement provides a</p><p>library file to be added to classpath</p></td><td><p>${project.compileClasspathElements}</p><p>or</p><p>${project.testClasspathElements}</p></td></tr><tr><td>outputDirectory</td><td>The output directory for generated artifacts.</td><td><p>${project.build.outputDirectory}</p><p>or</p><p>${project.build.testOutputDirectory}</p></td></tr><tr><td>resourceDirectory</td><td>The output directory for resource artifacts (WSDL/XSD).</td><td>${project.build.directory}/wsprovide/resources</td></tr><tr><td>sourceDirectory</td><td>The output directory for Java source.</td><td>${project.build.directory}/wsprovide/java</td></tr><tr><td>extension</td><td>Enable SOAP 1.2 binding extension.</td><td>false</td></tr><tr><td>generateWsdl</td><td>Whether or not to generate WSDL.</td><td>false</td></tr><tr><td>verbose</td><td>Enables more informational output about command progress.</td><td>false</td></tr><tr><td><span class="bold"><strong>endpointClass</strong></span></td><td><span class="bold"><strong>Service Endpoint Implementation.</strong></span></td><td class="auto-generated"> </td></tr></tbody></table></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-wsprovide_Examples_147019"/>6.2.1. Examples</h3></div></div></div><p>You can use wsprovide in your own project build simply referencing the <span class="emphasis"><em>maven-jaxws-tools-plugin</em></span> in the configured plugins in your pom.xml file.</p><p>The following example makes the plugin provide the wsdl file and artifact sources for the specified endpoint class:</p><pre class="screen">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.jboss.ws.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-jaxws-tools-plugin&lt;/artifactId&gt;
      &lt;version&gt;@pom.version@&lt;/version&gt;
      &lt;configuration&gt;
        &lt;verbose&gt;true&lt;/verbose&gt;
        &lt;endpointClass&gt;org.jboss.test.ws.plugins.tools.wsprovide.TestEndpoint&lt;/endpointClass&gt;
        &lt;generateWsdl&gt;true&lt;/generateWsdl&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;wsprovide&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</pre><p> </p><p>The following example does the same, but is meant for use in your own testsuite:</p><pre class="screen">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.jboss.ws.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-jaxws-tools-plugin&lt;/artifactId&gt;
      &lt;version&gt;@pom.version@&lt;/version&gt;
      &lt;configuration&gt;
        &lt;verbose&gt;true&lt;/verbose&gt;
        &lt;endpointClass&gt;org.jboss.test.ws.plugins.tools.wsprovide.TestEndpoint2&lt;/endpointClass&gt;
        &lt;generateWsdl&gt;true&lt;/generateWsdl&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;wsprovide-test&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</pre><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-wsprovide_Ant_Task"/>6.3. Ant Task</h2></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><span class="emphasis"><em><span class="bold"><strong>Note</strong></span></em></span></p><p><span class="emphasis"><em>With 2.0.GA the task was renamed to org.jboss.wsf.spi.tools.ant.WSProvideTask</em></span></p></div><p>The wsprovide ant task has the following attributes:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th> Attribute </th><th> Description </th><th> Default </th></tr></thead><tbody><tr><td>fork</td><td>Whether or not to run the generation task in a separate VM.</td><td>true</td></tr><tr><td>keep</td><td>Keep/Enable Java source code generation.</td><td>false</td></tr><tr><td>destdir</td><td>The output directory for generated artifacts.</td><td>"output"</td></tr><tr><td>resourcedestdir</td><td>The output directory for resource artifacts (WSDL/XSD).</td><td>value of destdir</td></tr><tr><td>sourcedestdir</td><td>The output directory for Java source.</td><td>value of destdir</td></tr><tr><td>extension</td><td>Enable SOAP 1.2 binding extension.</td><td>false</td></tr><tr><td>genwsdl</td><td>Whether or not to generate WSDL.</td><td>false</td></tr><tr><td>verbose</td><td>Enables more informational output about command progress.</td><td>false</td></tr><tr><td><span class="bold"><strong>sei</strong></span></td><td><span class="bold"><strong>Service Endpoint Implementation.</strong></span></td><td class="auto-generated"> </td></tr><tr><td>classpath</td><td>The classpath that contains the service endpoint implementation.</td><td>"."</td></tr></tbody></table></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-wsprovide_Examples_860945"/>6.3.1. Examples</h3></div></div></div><p>Executing wsprovide in verbose mode with separate output directories for source, resources, and classes:</p><pre class="screen">&lt;target name="test-wsproivde" depends="init"&gt;
  &lt;taskdef name="wsprovide" classname="org.jboss.wsf.spi.tools.ant.WSProvideTask"&gt;
    &lt;classpath refid="core.classpath"/&gt;
  &lt;/taskdef&gt;
  &lt;wsprovide
    fork="false"
    keep="true"
    destdir="out"
    resourcedestdir="out-resource"
    sourcedestdir="out-source"
    genwsdl="true" 
    verbose="true"
    sei="org.jboss.test.ws.jaxws.jsr181.soapbinding.DocWrappedServiceImpl"&gt;
    &lt;classpath&gt;
      &lt;pathelement path="${tests.output.dir}/classes"/&gt;
    &lt;/classpath&gt;
  &lt;/wsprovide&gt;
&lt;/target&gt;
</pre></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-wsrunclient"/>Chapter 7. JBossWS-wsrunclient</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e3470">7.1. Usage</a></span></dt><dt><span class="section"><a href="#d0e3475">7.2. Examples</a></span></dt></dl></div><p>wsrunclient is a command line tool that invokes a JBossWS JAX-WS Web Service client. It builds the correct classpath and endorsed libs for you. Feel free to use the code for this script to make your own shell scripts. It is open source after all.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3470"/>7.1. Usage</h2></div></div></div><pre class="screen"> wsrunclient [-classpath &lt;additional class path&gt;] &lt;java-main-class&gt; [arguments...]
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3475"/>7.2. Examples</h2></div></div></div><p>Invoking a standalone JAX-WS client:</p><pre class="screen">wsrunclient echo.EchoClient</pre><p>Invoking a standalone JAX-WS client that uses external jars:</p><pre class="screen">wsrunclient -classpath jar1.jar:jar2.jar echo.EchoClient

</pre></div></div></div><div class="part" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="Additional documentation"/>Part II. Additional documentation</h1></div></div></div><div class="partintro" lang="en-US"><div/><p>
        This section of the book provides documentation on common additional user requirements, like enabling authentication, securing the transport, etc.
      </p><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#chap_JBossWS-Authentication">8. JBossWS-Authentication</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3514">8.1. Define the security domain</a></span></dt><dt><span class="section"><a href="#d0e3546">8.2. Use BindingProvider to set principal/credential</a></span></dt><dt><span class="section"><a href="#d0e3559">8.3. Using HTTP Basic Auth for security</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-Securetransport">9. JBossWS-Securetransport</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Securetransport_Client_side">9.1. Client side</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-Endpointmanagement">10. JBossWS-Endpointmanagement</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Getting_the_information">10.1. Getting the information</a></span></dt><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Metrics">10.2. Metrics</a></span></dt><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Records">10.3. Records</a></span></dt><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Snapshots_and_threshold_monitors">10.4. Snapshots and threshold monitors</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-Recordsmanagement">11. JBossWS-Recordsmanagement</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_What_is_recorded">11.1. What is recorded</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Use_cases">11.2. Use cases</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_How_it_works_and_how_to_use_it">11.3. How it works and how to use it</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Server_side">11.3.1. Server side</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Client_side">11.3.2. Client side</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Advanced_hints">11.4. Advanced hints</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Adding_custom_recorders">11.4.1. Adding custom recorders</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Handlers_position">11.4.2. Handler's position</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Multiple_handlers">11.4.3. Multiple handlers</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Future_extensions">11.5. Future extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Database_recorder">11.5.1. Database recorder</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Custom_log_writer">11.5.2. Custom log writer</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-Recordsmanagement_References">11.6. References</a></span></dt></dl></dd></dl></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-Authentication"/>Chapter 8. JBossWS-Authentication</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e3514">8.1. Define the security domain</a></span></dt><dt><span class="section"><a href="#d0e3546">8.2. Use BindingProvider to set principal/credential</a></span></dt><dt><span class="section"><a href="#d0e3559">8.3. Using HTTP Basic Auth for security</a></span></dt></dl></div><p>This page explains the simplest way to authenticate a web service user with JBossWS.</p><p>First we secure the access to the SLSB as we would do for normal (non web service) invocations: this can be easily done through the @RolesAllowed, @PermitAll, @DenyAll annotation. The allowed user roles can be set with these annotations both on the bean class and on any of its business methods.</p><pre class="screen">@Stateless
@RolesAllowed("friend")
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> EndpointEJB <span class="bold"><strong>implements</strong></span> EndpointInterface
{
  ...
}
</pre><p>Similarly POJO endpoints are secured the same way as we do for normal web applications in web.xml:</p><pre class="screen">  &lt;security-constraint&gt;
    &lt;web-resource-collection&gt;
      &lt;web-resource-name&gt;All resources&lt;/web-resource-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
      &lt;role-name&gt;friend&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
  &lt;/security-constraint&gt;

  &lt;security-role&gt;
    &lt;role-name&gt;friend&lt;/role-name&gt;
  &lt;/security-role&gt;</pre><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3514"/>8.1. Define the security domain</h2></div></div></div><p>Next, define the security domain for this deployment. This is performed using the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/docs/DOC-13972#SecurityDomain">@SecurityDomain</a> annotation for EJB3 endpoints</p><pre class="screen">@Stateless
@SecurityDomain("JBossWS")
@RolesAllowed("friend")
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> EndpointEJB <span class="bold"><strong>implements</strong></span> EndpointInterface
{
  ...
}
</pre><p>or modifying the jboss-web.xml for POJO endpoints</p><pre class="screen">&lt;jboss-web&gt;
  &lt;security-domain&gt;java:/jaas/JBossWS&lt;/security-domain&gt;
&lt;/jboss-web&gt;
</pre><p>The JBossWS security context is configured in login-config.xml and uses the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://wiki.jboss.org/wiki/Wiki.jsp?page=UsersRolesLoginModule">UsersRolesLoginModule</a>. As a matter of fact login-config.xml, that lives in the server config dir, contains this security domain definition:</p><pre class="screen">  &lt;!-- 
    A template configuration for the JBossWS security domain.
    This defaults to the UsersRolesLoginModule the same as other and should be
    changed to a stronger authentication mechanism as required.
  --&gt;
  &lt;application-policy name="JBossWS"&gt;
    &lt;authentication&gt;
      &lt;login-module code="org.jboss.security.auth.spi.UsersRolesLoginModule"
        flag="required"&gt;
        &lt;module-option name="usersProperties"&gt;props/jbossws-users.properties&lt;/module-option&gt;
        &lt;module-option name="rolesProperties"&gt;props/jbossws-roles.properties&lt;/module-option&gt;
        &lt;module-option name="unauthenticatedIdentity"&gt;anonymous&lt;/module-option&gt;
      &lt;/login-module&gt;
    &lt;/authentication&gt;
  &lt;/application-policy&gt;
</pre><p>Of course you can define and use your own security domain as well as your login module (in order to check for users' identity querying a database for example).</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3546"/>8.2. Use BindingProvider to set principal/credential</h2></div></div></div><p>A web service client may use the javax.xml.ws.BindingProvider interface to set the username/password combination</p><pre class="screen">URL wsdlURL = <span class="bold"><strong>new</strong></span> File("resources/jaxws/samples/context/WEB-INF/wsdl/TestEndpoint.wsdl").toURL();
QName qname = <span class="bold"><strong>new</strong></span> QName("http://org.jboss.ws/jaxws/context", "TestEndpointService");
Service service = Service.create(wsdlURL, qname);
port = (TestEndpoint)service.getPort(TestEndpoint.class);
 
BindingProvider bp = (BindingProvider)port;
bp.getRequestContext().put(BindingProvider.USERNAME_PROPERTY, "kermit");
bp.getRequestContext().put(BindingProvider.PASSWORD_PROPERTY, "thefrog");
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3559"/>8.3. Using HTTP Basic Auth for security</h2></div></div></div><p>To enable HTTP Basic authentication you use the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/docs/DOC-13972#WebContext">@WebContext</a> annotation on the bean class</p><pre class="screen">@Stateless
@SecurityDomain("JBossWS")
@RolesAllowed("friend")
@WebContext(contextRoot="/my-cxt", urlPattern="/*", authMethod="BASIC", transportGuarantee="NONE", secureWSDLAccess=<span class="bold"><strong>false</strong></span>)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> EndpointEJB <span class="bold"><strong>implements</strong></span> EndpointInterface
{
  ...
}
</pre><p>For POJO endpoints, we modify the web.xml adding the auth-method element:</p><pre class="screen">  &lt;login-config&gt;
    &lt;auth-method&gt;BASIC&lt;/auth-method&gt;
    &lt;realm-name&gt;Test Realm&lt;/realm-name&gt;
  &lt;/login-config&gt;
</pre></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-Securetransport"/>Chapter 9. JBossWS-Securetransport</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-Securetransport_Client_side">9.1. Client side</a></span></dt></dl></div><p/><p>JBossWS allows you to require that requests to a given endpoint use SSL by specifying the <span class="emphasis"><em>transportGuarantee</em></span> attribute in the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/docs/DOC-13972#WebContext">@WebContext</a> annotation.</p><p>Here is an example using a SLSB endpoint:</p><pre class="screen">@Stateless
@SecurityDomain("JBossWS")
@RolesAllowed("friend")
@WebContext
(
  contextRoot="/my-cxt",
  urlPattern="/*",
  authMethod="BASIC",
  transportGuarantee="CONFIDENTIAL",
  secureWSDLAccess=<span class="bold"><strong>false</strong></span>
)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> EndpointEJB <span class="bold"><strong>implements</strong></span> EndpointInterface
{
  ...
}
</pre><p>Similarly to enforce the same requirement on POJO endpoints, you need to edit web.xml and add a user-data-constraint element to your security-constraint element:</p><pre class="screen">  &lt;security-constraint&gt;
    &lt;web-resource-collection&gt;
      &lt;web-resource-name&gt;All resources&lt;/web-resource-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
      &lt;role-name&gt;friend&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
    &lt;user-data-constraint&gt;
      &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;
    &lt;/user-data-constraint&gt;
  &lt;/security-constraint&gt;

  &lt;security-role&gt;
    &lt;role-name&gt;friend&lt;/role-name&gt;
  &lt;/security-role&gt;
</pre><p>If you're manually creating your service contract, make sure that the endpoint address in your WSDL file uses a secure protocol. The easiest way is to add "<a xmlns:xlink="http://www.w3.org/1999/xlink" href="https://">https://</a>" to the SOAP Address entry:</p><pre class="screen">   &lt;service name="MyService"&gt;
    &lt;port name="BasicSecuredPort" binding="tns:MyBinding"&gt;
     &lt;soap:address location="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="https://localhost:8443/my-ctx/SecureEndpoint">https://localhost:8443/my-ctx/SecureEndpoint</a>"/&gt;
    &lt;/port&gt;
   &lt;/service&gt;
</pre><p>For this to work the Tomcat+SSL connector must be enabled:</p><pre class="screen">   &lt;Connector port="8443" address="${jboss.bind.address}"
        maxThreads="100" minSpareThreads="5" maxSpareThreads="15"
        scheme="https" secure="true" clientAuth="want"
        keystoreFile="${jboss.server.home.dir}/conf/keystores/wsse.keystore" 
        keystorePass="jbossws"
        truststoreFile="${jboss.server.home.dir}/conf/keystores/wsse.keystore" 
        truststorePass="jbossws"
        sslProtocol = "TLS" /&gt;
</pre><p>Please refer the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://tomcat.apache.org/tomcat-5.5-doc/ssl-howto.html">Tomcat-5.5 SSL Configuration HOWTO</a> for further details.</p><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Securetransport_Client_side"/>9.1. Client side</h2></div></div></div><p>On the client side the truststore must be installed:</p><pre class="screen">      &lt;sysproperty key="javax.net.ssl.keyStore" value="${test.resources.dir}/wsse/wsse.keystore"/&gt;
      &lt;sysproperty key="javax.net.ssl.trustStore" value="${test.resources.dir}/wsse/wsse.truststore"/&gt;
      &lt;sysproperty key="javax.net.ssl.keyStorePassword" value="jbossws"/&gt;
      &lt;sysproperty key="javax.net.ssl.trustStorePassword" value="jbossws"/&gt;
      &lt;sysproperty key="javax.net.ssl.keyStoreType" value="jks"/&gt;
      &lt;sysproperty key="javax.net.ssl.trustStoreType" value="jks"/&gt;</pre><p>As you can see, this requires you to setup the environment specifying both the location and type of your truststore.</p><p>Finally, in case you see the following exception:</p><pre class="screen">  java.io.IOException: HTTPS hostname wrong:  should be &lt;localhost&gt;
    at sun.net.www.protocol.https.HttpsClient.checkURLSpoofing(HttpsClient.java:493)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:418)
</pre><p>you should disable URL checking on the client side:</p><pre class="screen">   &lt;sysproperty key="org.jboss.security.ignoreHttpsHost" value="true"/&gt;</pre></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-Endpointmanagement"/>Chapter 10. JBossWS-Endpointmanagement</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Getting_the_information">10.1. Getting the information</a></span></dt><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Metrics">10.2. Metrics</a></span></dt><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Records">10.3. Records</a></span></dt><dt><span class="section"><a href="#JBossWS-Endpointmanagement_Snapshots_and_threshold_monitors">10.4. Snapshots and threshold monitors</a></span></dt></dl></div><p>JBossWS registers MBeans that users can leverage to manage every webservice endpoint. Apart from the obvious start/stop functionalities, they provide valuable information and statistics about messages processed by the endpoints.</p><p/><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Endpointmanagement_Getting_the_information"/>10.1. Getting the information</h2></div></div></div><p>JBoss ships with a JMX-Console with all the application server MBeans. It is usually available at URL <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost:8080/jmx-console">http://localhost:8080/jmx-console</a>. For endpoint management you might be interested in the MBeans belonging to the jboss.ws domain.</p><p>The application server also has an applet based web-console which basically has the same data as the JMX-Console plus some advanced features including snapshot graphics.</p><p>Of course you can access an MBean programmatically too. Please refer to the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://wiki.jboss.org/wiki/Wiki.jsp?page=FAQJBossJMX">JBoss JMX faq</a> for further details; here is a brief code snippet you might want to start from in order to access a ManagedEndpointMBean from the same virtual machine:</p><pre class="screen"><span class="bold"><strong>try</strong></span>
{
  MBeanServer server = MBeanServerLocator.locate();
  ManagedEndpointMBean mep = (ManagedEndpointMBean)MBeanProxyExt.create(
            ManagedEndpointMBean.class,
            "jboss.ws:context=my-ctx,endpoint=MyEndpoit",
            server);
  ...
}
<span class="bold"><strong>catch</strong></span> (Exception e)
{
  e.printStackTrace();
}
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Endpointmanagement_Metrics"/>10.2. Metrics</h2></div></div></div><p>For each deployed endpoint you'll find an <span class="emphasis"><em>org.jboss.wsf.framework.management.ManagedEndpoint</em></span> MBean providing basic start/stop functionalities and metrics. Calling a stopped endpoint will always result in a SOAP fault message.</p><p>The metrics available for each managed endpoint are:</p><div class="itemizedlist"><ul><li><p> Min, max, average and total processing time: processing includes both the WS stack plus application server work and the user business logic </p></li><li><p> Last start and stop time </p></li><li><p> Request, response and fault count</p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Endpointmanagement_Records"/>10.3. Records</h2></div></div></div><p>JBossWS features a highly configurable records' collection and management system. Each record is basically composed of a message plus additional information (for example the caller address and the called endpoint operation).</p><p>Endpoints can be configured with record processors that are invoked whenever a message flow is detected and records are thus created.</p><p>Every deployed endpoint is configured with default record processors. However custom processors as well as record filters can be easily plugged in and managed at any time through JMX. This gives users the chance of performing advanced analysis of the webservice traffic according to their business requirements.</p><p>Please refer to the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jbossws.jboss.org/mediawiki/index.php?title=Records_management">records management page</a> for further details.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Endpointmanagement_Snapshots_and_threshold_monitors"/>10.4. Snapshots and threshold monitors</h2></div></div></div><p>As previously said, the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://wiki.jboss.org/wiki/Wiki.jsp?page=WebConsole">JBoss Web Console</a> has interesting features including <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://wiki.jboss.org/wiki/Wiki.jsp?page=WebConsoleSnapshots">snapshots</a> and <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://wiki.jboss.org/wiki/Wiki.jsp?page=WebConsoleMonitoring">threshold monitors</a>.</p><p>Snapshots allow users to record changes of a given MBean attribute within a defined time interval. Data are sampled at a given rate and may be plotted to graphs with a few clicks. Snapshots are listed in the Web console and can be created simply browsing to <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost:8080/web-console/createSnapshot.jsp">http://localhost:8080/web-console/createSnapshot.jsp</a> .</p><p>Threshold monitors allow users to be notified whenever a given MBean attribute exceed a certain range of values. The threshold monitor's creation and management processes are similar to those mentioned above for the snapshots. Simply browse to <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost:8080/web-console/createThresholdMonitor.jsp">http://localhost:8080/web-console/createThresholdMonitor.jsp</a> .</p><p>Speaking of WS availability and SLA, this all becomes interesting because users can monitor and take snapshots of critical attributes like the average/max processing time of a managed endpoint. Moreover, advanced analysis can be performed leveraging ad-hoc attributes of custom <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jbossws.jboss.org/mediawiki/index.php?title=Endpoint_management#Records">record processors</a>.</p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-Recordsmanagement"/>Chapter 11. JBossWS-Recordsmanagement</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_What_is_recorded">11.1. What is recorded</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Use_cases">11.2. Use cases</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_How_it_works_and_how_to_use_it">11.3. How it works and how to use it</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Server_side">11.3.1. Server side</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Client_side">11.3.2. Client side</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Advanced_hints">11.4. Advanced hints</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Adding_custom_recorders">11.4.1. Adding custom recorders</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Handlers_position">11.4.2. Handler's position</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Multiple_handlers">11.4.3. Multiple handlers</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Future_extensions">11.5. Future extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Database_recorder">11.5.1. Database recorder</a></span></dt><dt><span class="section"><a href="#JBossWS-Recordsmanagement_Custom_log_writer">11.5.2. Custom log writer</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-Recordsmanagement_References">11.6. References</a></span></dt></dl></div><p>JBossWS records' collection and management system gives administrators a means of performing custom analysis of their webservice traffic as well as exporting communication logs.</p><p/><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Recordsmanagement_What_is_recorded"/>11.1. What is recorded</h2></div></div></div><p>Each record is basically composed of a message plus additional information; here are the current record attributes:</p><div class="itemizedlist"><ul><li><p> Creation date </p></li><li><p> Source host </p></li><li><p> Destination host </p></li><li><p> Message type (in/out) </p></li><li><p> Invoked endpoint operation </p></li><li><p> Message envelope (including both soap:header and soap:body for SOAP messages) </p></li><li><p> Http headers </p></li><li><p> Record group ID (allowing records belonging to the same message flow to be linked together) </p></li></ul></div><p>Of course records may also have meaningful values for a subset of the afore mentioned record attributes.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Recordsmanagement_Use_cases"/>11.2. Use cases</h2></div></div></div><p>What are records useful for? In spite of <a href="#chap_JBossWS-Endpointmanagement" title="Chapter 10. JBossWS-Endpointmanagement">endpoint metrics</a> that provide response time information and counts of invocations, records provide users with rich data about the content of the exchanged messages and their sender/receiver. The record system allows fine grained management and is customizable according to the users need; some of the use cases supported by the default configuration are:</p><div class="itemizedlist"><ul><li><p> Logging request and response messages: being able to record messages received from and sent to a given service consumer without stopping the provider may be really useful. You just need to set the <span class="emphasis"><em>recording</em></span> attribute of their endpoint's LogRecorder to true. The added value of this logging solution comes from the use of filters through which messages coming from a given address and related to a given wsdl operation only can be logged. </p></li><li><p> Accountability: service providers may want to know which consumers are actually hitting a given service. This can be done for example using the <span class="emphasis"><em>getClientHosts</em></span> functionality of the MemoryBufferRecorder once it has been switched to recording state. </p></li><li><p> Getting statistics, filtering records: service administrators might want to see the last records related to a given endpoint or operation, the last records related to messages coming from a given customer and the response the system gave them, etc. These information can be obtained using the <span class="emphasis"><em>getRecordsByOperation</em></span>, <span class="emphasis"><em>getRecordsByClientHost</em></span> or the more general <span class="emphasis"><em>getMatchingRecords</em></span> functionality of the MemoryBufferRecorder.</p></li></ul></div><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Recordsmanagement_How_it_works_and_how_to_use_it"/>11.3. How it works and how to use it</h2></div></div></div><p>The recording system is composed of</p><div class="itemizedlist"><ul><li><p> JAX-WS handlers intercepting inbound and outbound communication </p></li><li><p> Record processors plugged into deployed endpoints; handlers collect records and send them to every processors through the current endpoint. Processors may store records, convert them, log them, ... </p></li><li><p> MBean views of processors that can be used to configure and fine tune recording at runtime </p></li><li><p> Record filters allowing selection of information to be recorded as well as providing means of performing custom queries on the saved records.</p></li></ul></div><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-Recordsmanagement_Server_side"/>11.3.1. Server side</h3></div></div></div><p>On server side records are collected by JAX-WS handlers and passed to the configured processors. JBossWS comes with two default record processors that are plugged into every endpoint during the deployment:</p><div class="itemizedlist"><ul><li><p> LogRecorder: a simple record processor that writes records to the configured log. </p></li><li><p> MemoryBufferRecorder: a record processor that keeps the last received records in memory and allows user to search / get statistics on them. </p></li></ul></div><p>Every processors can be fine tuned to process some record attributes only according to the user and/or performance requirements. Default processors are not in recording mode upon creation, thus you need to switch them to recording mode through their MBean interfaces (see the <span class="emphasis"><em>Recording</em></span> flag in the jmx-console).</p><p>Common processor properties and their respective defaults values are:</p><div class="itemizedlist"><ul><li><p> processDestinationHost (true) </p></li><li><p> processSourceHost (true) </p></li><li><p> processHeaders (true) </p></li><li><p> processEnvelope (true) </p></li><li><p> processMessageType (true) </p></li><li><p> processOperation (true) </p></li><li><p> processDate (true) </p></li><li><p> recording (false) </p></li></ul></div><p>The recorders can be configured in the stacks bean configuration</p><pre class="screen">  &lt;!-- Installed Record Processors--&gt;
  &lt;bean name="WSMemoryBufferRecorder" class="org.jboss.wsf.framework.management.recording.MemoryBufferRecorder"&gt;
    &lt;property name="recording"&gt;false&lt;/property&gt;
  &lt;/bean&gt;
  &lt;bean name="WSLogRecorder" class="org.jboss.wsf.framework.management.recording.LogRecorder"&gt;
    &lt;property name="recording"&gt;false&lt;/property&gt;
  &lt;/bean&gt;
</pre><p>The recording system is available for all the JBossWS supported stacks. However slightly different procedure is required to enable it depending on the used stack.</p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong>Native stack</strong></span> </span></dt><dd/></dl></div><p>Native stack comes with <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://community.jboss.org/docs/DOC-13512">JBossWS - JAX-WS Endpoint Configuration</a>. The default standard endpoint already has the server side recording handler:</p><pre class="screen">  &lt;endpoint-config&gt;
    &lt;config-name&gt;Standard Endpoint&lt;/config-name&gt;
    &lt;pre-handler-chains&gt;
      &lt;javaee:handler-chain&gt;
        &lt;javaee:protocol-bindings&gt;##SOAP11_HTTP&lt;/javaee:protocol-bindings&gt;
        &lt;javaee:handler&gt;
          &lt;javaee:handler-name&gt;Recording Handler&lt;/javaee:handler-name&gt;
          &lt;javaee:handler-class&gt;org.jboss.wsf.framework.invocation.RecordingServerHandler&lt;/javaee:handler-class&gt;
        &lt;/javaee:handler&gt;
      &lt;/javaee:handler-chain&gt;
    &lt;/pre-handler-chains&gt;
  &lt;/endpoint-config&gt;
</pre><p>thus nothing is required to use it since it is automatically installed in the pre-handler-chain. Of course you might want to add it to other endpoint configurations you're using.</p><div class="variablelist"><dl><dt><span class="term"><span class="bold"><strong>Metro and CXF stacks </strong></span></span></dt><dd/></dl></div><p>Other stacks require users to manually add the <span class="emphasis"><em>org.jboss.wsf.framework.invocation.RecordingServerHandler</em></span> to their endpoint handler chain. This can be done <a href="#chap_JBossWS-UserGuide" title="Chapter 2. JBossWS-UserGuide">the same way common user handlers are added</a>.</p><p>Once the handler is properly added to the chain, log recording configuration is agnostic to the used stack. Users just need to tune the processors parameters though their MBean interfaces.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-Recordsmanagement_Client_side"/>11.3.2. Client side</h3></div></div></div><p>JMX management of processors is of course available on server side only. However users might also be interested in collecting and processing records on client side. Since handlers can be set on client side too, customer handlers could be configured to capture messages almost like the <span class="emphasis"><em>RecordingServerHandler</em></span> does. This is left to the users since it is directly linked to their custom needs. For instance a common use could be to pass client side collected records to the LogRecorder.</p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Recordsmanagement_Advanced_hints"/>11.4. Advanced hints</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-Recordsmanagement_Adding_custom_recorders"/>11.4.1. Adding custom recorders</h3></div></div></div><p>As previously said, the recording system is extensible: JBossWS users can write their own processors and plug them at runtime into their deployed endpoints through the <span class="emphasis"><em>addRecordProcessor</em></span> functionality of the ManagedEndpoint MBean. Every processor needs to implement the <span class="emphasis"><em>org.jboss.wsf.spi.management.recording.RecordProcessor</em></span> interface. Then you can choose one of the two following options:</p><div class="itemizedlist"><ul><li><p> Give you record processor an MBean interface declaring the manageable attributes: the recording system will plug your processor to the endpoint and register a management MBean for it using your interface. This allows you to create highly configurable custom processors. For an example of this development option, take a look at the <span class="emphasis"><em>org.jboss.wsf.framework.management.recording.MemoryBufferRecorder</em></span>. </p></li><li><p> Add your record processor to the managed endpoint as is: the recording system will plug it to the endpoint and register a standard management MBean for its basic processing configuration. The <span class="emphasis"><em>org.jboss.wsf.framework.management.recording.LogRecorder</em></span> is an example of this development option. </p></li></ul></div><p>A code snippet showing how to get the MBeanProxy instance which you can invoke MBean with can be found <a href="#chap_JBossWS-Endpointmanagement" title="Chapter 10. JBossWS-Endpointmanagement">here</a>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-Recordsmanagement_Handlers_position"/>11.4.2. Handler's position</h3></div></div></div><p>Of course the recording handler's position in the handler chain influences the collected records. As a matter of fact some information may or may not be available at a given point of the handler chain execution. The standard endpoint configuration declares the RecordingServerHandler into the pre-handler-chain. Speaking of the native stack, this means for example that you'll get the invoked operation data and that decrypted messages will be recorded if using WS-Security, since the WS-Security handler runs in the post-handler-chain. Users might want to change the recording handler's position in the chain according to their requirements.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-Recordsmanagement_Multiple_handlers"/>11.4.3. Multiple handlers</h3></div></div></div><p>Records attributes include a record group ID that is meant to link records whose messages belong to the same message flow (a request-response for example). In order to set the right group ID to the records, the current ID is associated to the thread that is processing the endpoint invocation. This means that multiple related records can be linked together and extracted together from a processor.</p><p>For this reason, you might want to install multiple recording handlers into different points of the handler chain. For instance, it could make sense to record messages both before and after encryption/decryption when using WS-Security.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Recordsmanagement_Future_extensions"/>11.5. Future extensions</h2></div></div></div><p>This paragraph covers eventual future extensions and/or idea JBossWS users may want to leverage for their own business.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-Recordsmanagement_Database_recorder"/>11.5.1. Database recorder</h3></div></div></div><p>The MemoryBufferRecorder provides interesting functionalities to query the collected records set. For obvious reasons, records are discarded once a given size of the buffer is reached.</p><p>A DB based recorder could be developed; it should work the same way the MemoryBufferRecorder does, except for records that should be saved through a given datasource. This will provide persistence of data even in case of application server reboot and webservice application redeploy. It will also allow records coming from different node of a cluster to be stored together. Finally this would allow administrators to directly query the database, which might be far more efficient.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-Recordsmanagement_Custom_log_writer"/>11.5.2. Custom log writer</h3></div></div></div><p>The idea of getting statistics from collected records could be further exploited getting custom logs from the records. These logs could be outputted by a custom processor in standard or proprietary formats allowing them to be imported into eventual third-party log processing tools which might offer complex/funky graphic or statistic functionalities and so on.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-Recordsmanagement_References"/>11.6. References</h2></div></div></div><p>You might want to take a look at the <span class="emphasis"><em>org.jboss.wsf.framework.management.recording</em></span> and <span class="emphasis"><em>org.jboss.wsf.spi.management.recording</em></span> packages in the source code to better understand how all this works and can be used.</p></div></div></div><div class="part" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="Samples, Tutorials, references"/>Part III. Samples &amp; Tutorials</h1></div></div></div><div class="partintro" lang="en-US"><div/><p>
        Below you find few tutorials on WS-* technologies usage as well as a brief list of reference links and the list of supported JAX-WS annotations.
      </p><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#chap_JBossWS-CXFWS-Addressingtutorial">12. JBossWS-CXFWS-Addressingtutorial</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_The_Service">12.1. The Service</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Generating_WSDL_and_JAXWS_Endpoint_Artifacts">12.2. Generating WSDL and JAX-WS Endpoint Artifacts</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Writing_Regular_JAXWS_Client">12.3. Writing Regular JAX-WS Client</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Turning_on_WSAddressing_10">12.4. Turning on WS-Addressing 1.0</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Updating_Endpoint_Code_to_Configure_WSAddressing">12.4.1. Updating Endpoint Code to Configure WS-Addressing</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Updating_Client_Code_to_Configure_WSAddressing">12.4.2. Updating Client Code to Configure WS-Addressing</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Leveraging_WSAddressing_Policy">12.4.3. Leveraging WS-Addressing Policy</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Sample_Sources">12.5. Sample Sources</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-CXFWS-ReliableMessagingtutorial">13. JBossWS-CXFWS-ReliableMessagingtutorial</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_The_service">13.1. The service</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Generating_WSDL_and_JAXWS_Endpoint_Artifacts">13.2. Generating WSDL and JAX-WS Endpoint Artifacts</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Generating_JAXWS_Client_Artifacts">13.3. Generating JAX-WS Client Artifacts</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Writing_Regular_JAXWS_Client">13.4. Writing Regular JAX-WS Client</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Turning_on_WSRM_10">13.5. Turning on WS-RM 1.0</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Extending_WSDL_Using_WSPolicy">13.5.1. Extending WSDL Using WS-Policy</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Basic_WSRM_configuration">13.5.2. Basic WS-RM configuration</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Advanced_WSRM_configuration">13.5.3. Advanced WS-RM configuration</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Sample_Sources">13.6. Sample Sources</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-CXFJMStransporttutorial">14. JBossWS-CXFJMStransporttutorial</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_WSDL">14.1. WSDL</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_Service_Implementation">14.2. Service Implementation</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_webxml">14.3. web.xml</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_jbosswscxfxml">14.4. jbossws-cxf.xml</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-Articlesandspecs">15. JBossWS-Articlesandspecs</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4901">15.1. J2EE-5.0 Web Services Specifications</a></span></dt><dt><span class="section"><a href="#d0e5006">15.2. J2EE-1.4 Web Services Specifications</a></span></dt><dt><span class="section"><a href="#d0e5093">15.3. Optional advanced Web Services specifications</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap_JBossWS-JAX-WSAnnotations">16. JBossWS-JAX-WSAnnotations</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_JAXWS_Annotations">16.1. JAX-WS Annotations</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsServiceMode">16.1.1. javax.xml.ws.ServiceMode</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebFault">16.1.2. javax.xml.ws.WebFault</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsRequestWrapper">16.1.3. javax.xml.ws.RequestWrapper</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsResponseWrapper">16.1.4. javax.xml.ws.ResponseWrapper</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceClient">16.1.5. javax.xml.ws.WebServiceClient</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebEndpoint">16.1.6. javax.xml.ws.WebEndpoint</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceProvider">16.1.7. javax.xml.ws.WebServiceProvider</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsBindingType">16.1.8. javax.xml.ws.BindingType</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceRef">16.1.9. javax.xml.ws.WebServiceRef</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceRefs">16.1.10. javax.xml.ws.WebServiceRefs</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsAction">16.1.11. javax.xml.ws.Action</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsFaultAction">16.1.12. javax.xml.ws.FaultAction</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_Annotations_Defined_by_JSR181">16.1.13. Annotations Defined by JSR-181</a></span></dt></dl></dd></dl></dd></dl></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-CXFWS-Addressingtutorial"/>Chapter 12. JBossWS-CXFWS-Addressingtutorial</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_The_Service">12.1. The Service</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Generating_WSDL_and_JAXWS_Endpoint_Artifacts">12.2. Generating WSDL and JAX-WS Endpoint Artifacts</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Writing_Regular_JAXWS_Client">12.3. Writing Regular JAX-WS Client</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Turning_on_WSAddressing_10">12.4. Turning on WS-Addressing 1.0</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Updating_Endpoint_Code_to_Configure_WSAddressing">12.4.1. Updating Endpoint Code to Configure WS-Addressing</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Updating_Client_Code_to_Configure_WSAddressing">12.4.2. Updating Client Code to Configure WS-Addressing</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Leveraging_WSAddressing_Policy">12.4.3. Leveraging WS-Addressing Policy</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-CXFWS-Addressingtutorial_Sample_Sources">12.5. Sample Sources</a></span></dt></dl></div><p><a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://incubator.apache.org/cxf/">Apache CXF</a> comes with support for <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/ws-addr-core/">WS-Addressing 1.0</a>. In this sample we will show how to create client and endpoint communicating each other using this feature.</p><p>Creating WS-Addressing based service and client is very simple. User needs to create regular JAX-WS service and client first. The last step is to configure the addressing on both sides.</p><p> </p><p/><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-Addressingtutorial_The_Service"/>12.1. The Service</h2></div></div></div><p>We will start with the following endpoint implementation (bottom-up approach):</p><p> </p><pre class="screen">@WebService
(
   portName = "AddressingServicePort",
   serviceName = "AddressingService",
   targetNamespace = "http://www.jboss.org/jbossws/ws-extensions/wsaddressing",
   endpointInterface = "org.jboss.test.ws.jaxws.samples.wsa.ServiceIface"
)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> ServiceImpl <span class="bold"><strong>implements</strong></span> ServiceIface
{
   <span class="bold"><strong>public</strong></span> String sayHello()
   {
      <span class="bold"><strong>return</strong></span> "Hello World!";
   }
}
</pre><p>The endpoint implements the following endpoint interface:</p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.wsa;
 
<span class="bold"><strong>import</strong></span> javax.jws.WebMethod;
<span class="bold"><strong>import</strong></span> javax.jws.WebService;
 
@WebService
(
   targetNamespace = "http://www.jboss.org/jbossws/ws-extensions/wsaddressing"
)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>interface</strong></span> ServiceIface
{
   @WebMethod
   String sayHello();
}
</pre><p>Let's say that compiled endpoint and interface classes are located in directory <span class="bold"><strong>/home/username/wsa/cxf/classes</strong></span>. Our next step is to generate JAX-WS artifacts and WSDL that will be part of endpoint archive.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-Addressingtutorial_Generating_WSDL_and_JAXWS_Endpoint_Artifacts"/>12.2. Generating WSDL and JAX-WS Endpoint Artifacts</h2></div></div></div><p>We will use <span class="bold"><strong>wsprovide</strong></span>  commandline tool to generate WSDL and JAX-WS artifacts. Here's the command:</p><pre class="screen">cd JBOSS_HOME/bin

./wsprovide.sh --keep --wsdl \
   --classpath=/home/username/wsa/cxf/classes \
   --output=/home/username/wsa/cxf/wsprovide/generated/classes \
   --resource=/home/username/wsa/cxf/wsprovide/generated/wsdl \
   --source=/home/username/wsa/cxf/wsprovide/generated/src \
   org.jboss.test.ws.jaxws.samples.wsa.ServiceImpl
</pre><p>The above command generates the following artifacts:</p><pre class="screen"># compiled classes
ls /home/username/wsa/cxf/wsprovide/generated/classes/org/jboss/test/ws/jaxws/samples/wsa/jaxws
SayHello.class  SayHelloResponse.class

# java sources
ls /home/username/wsa/cxf/wsprovide/generated/src/org/jboss/test/ws/jaxws/samples/wsa/jaxws
SayHello.java  SayHelloResponse.java

# contract artifacts
ls /home/username/wsa/cxf/wsprovide/generated/wsdl/
AddressingService.wsdl</pre><p>All aforementioned generated artifacts will be part of endpoint archive. But before we will create the endpoint archive we need to reference generated WSDL from endpoint. To achieve that we will use <span class="bold"><strong>wsdlLocation</strong></span> annotation attribute. Here's the updated endpoint implementation before packaging it to the war file:</p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.wsa;
 
<span class="bold"><strong>import</strong></span> javax.jws.WebService;
 
@WebService
(
   portName = "AddressingServicePort",
   serviceName = "AddressingService",
   wsdlLocation = "WEB-INF/wsdl/AddressingService.wsdl",
   targetNamespace = "http://www.jboss.org/jbossws/ws-extensions/wsaddressing",
   endpointInterface = "org.jboss.test.ws.jaxws.samples.wsa.ServiceIface"
)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> ServiceImpl <span class="bold"><strong>implements</strong></span> ServiceIface
{
   <span class="bold"><strong>public</strong></span> String sayHello()
   {
      <span class="bold"><strong>return</strong></span> "Hello World!";
   }
}
</pre><p> </p><p>Created endpoint war archive consists of the following entries:</p><p> </p><pre class="screen">jar -tvf jaxws-samples-wsa.war 
     0 Mon Apr 21 20:39:30 CEST 2008 META-INF/
   106 Mon Apr 21 20:39:28 CEST 2008 META-INF/MANIFEST.MF
     0 Mon Apr 21 20:39:30 CEST 2008 WEB-INF/
   593 Mon Apr 21 20:39:28 CEST 2008 WEB-INF/web.xml
     0 Mon Apr 21 20:39:30 CEST 2008 WEB-INF/classes/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/
   374 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/ServiceIface.class
   954 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/ServiceImpl.class
     0 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/jaxws/
   703 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/jaxws/SayHello.class
  1074 Mon Apr 21 20:39:26 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsa/jaxws/SayHelloResponse.class
     0 Mon Apr 21 20:39:30 CEST 2008 WEB-INF/wsdl/
  2378 Mon Apr 21 20:39:28 CEST 2008 WEB-INF/wsdl/AddressingService.wsdl
</pre><p>The content of web.xml file is:</p><pre class="screen">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app
   version="2.5" xmlns="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/xml/ns/javaee">http://java.sun.com/xml/ns/javaee</a>" 
   xmlns:xsi="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>" 
   xsi:schemaLocation="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/xml/ns/javaee">http://java.sun.com/xml/ns/javaee</a> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd</a>"&gt;
   &lt;servlet&gt;
      &lt;servlet-name&gt;AddressingService&lt;/servlet-name&gt;
      &lt;servlet-class&gt;org.jboss.test.ws.jaxws.samples.wsa.ServiceImpl&lt;/servlet-class&gt;
   &lt;/servlet&gt;
   &lt;servlet-mapping&gt;
      &lt;servlet-name&gt;AddressingService&lt;/servlet-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-Addressingtutorial_Writing_Regular_JAXWS_Client"/>12.3. Writing Regular JAX-WS Client</h2></div></div></div><p>The following is the regular JAX-WS client using endpoint interface to lookup the webservice:</p><p> </p><p>package org.jboss.test.ws.jaxws.samples.wsa;</p><pre class="screen">import java.net.URL;import javax.xml.namespace.QName;import javax.xml.ws.Service;public final class SimpleServiceTestCase{   private final String serviceURL = "http://" + getServerHost() + ":8080/jaxws-samples-wsa/AddressingService";      public static void main(String[] args) throws Exception   {      // create service      QName serviceName = new QName("http://www.jboss.org/jbossws/ws-extensions/wsaddressing", "AddressingService");      URL wsdlURL = new URL(serviceURL + "?wsdl");      Service service = Service.create(wsdlURL, serviceName);      ServiceIface proxy = (ServiceIface)service.getPort(ServiceIface.class);            // invoke method      proxy.sayHello();   }   }</pre><p>Now we have both endpoint and client implementation but without WS-Addressing in place. Our next goal is to turn on the WS-Addressing feature.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-Addressingtutorial_Turning_on_WSAddressing_10"/>12.4. Turning on WS-Addressing 1.0</h2></div></div></div><p>In order to turn on WS-Addressing in JBossWS-CXF integration the last two steps are remaining:</p><div class="itemizedlist"><ul><li><p>annotate service endpoint with @Addressing annotation</p></li><li><p>modify client to configure WS-Addressing using JAX-WS webservice feature</p></li></ul></div><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-CXFWS-Addressingtutorial_Updating_Endpoint_Code_to_Configure_WSAddressing"/>12.4.1. Updating Endpoint Code to Configure WS-Addressing</h3></div></div></div><p>Now we need to update endpoint implementation to configure WS-Addressing. Here's the updated endpoint code:</p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.wsa;
 
<span class="bold"><strong>import</strong></span> javax.jws.WebService;
<span class="bold"><strong>import</strong></span> javax.xml.ws.soap.Addressing;
 
@WebService
(
   portName = "AddressingServicePort",
   serviceName = "AddressingService",
   wsdlLocation = "WEB-INF/wsdl/AddressingService.wsdl",
   targetNamespace = "http://www.jboss.org/jbossws/ws-extensions/wsaddressing",
   endpointInterface = "org.jboss.test.ws.jaxws.samples.wsa.ServiceIface"
)
@Addressing(enabled=true, required=<span class="bold"><strong>true</strong></span>)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> ServiceImpl <span class="bold"><strong>implements</strong></span> ServiceIface
{
   <span class="bold"><strong>public</strong></span> String sayHello()
   {
      <span class="bold"><strong>return</strong></span> "Hello World!";
   }
}
</pre><p>As users can see we added JAX-WS 2.1  <span class="bold"><strong>Addressing</strong></span> annotation to configure WS-Addressing. The next step is to repackage the endpoint archive to apply this change.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-CXFWS-Addressingtutorial_Updating_Client_Code_to_Configure_WSAddressing"/>12.4.2. Updating Client Code to Configure WS-Addressing</h3></div></div></div><p>Now we need to update client implementation as well to configure WS-Addressing. Here's the updated client code:</p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.wsa;
 
<span class="bold"><strong>import</strong></span> java.net.URL;
<span class="bold"><strong>import</strong></span> javax.xml.namespace.QName;
<span class="bold"><strong>import</strong></span> javax.xml.ws.Service;
<span class="bold"><strong>import</strong></span> javax.xml.ws.soap.AddressingFeature;
 
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>final</strong></span> <span class="bold"><strong>class</strong></span> AddressingTestCase
{
   <span class="bold"><strong>private</strong></span> <span class="bold"><strong>final</strong></span> String serviceURL = "http://" + getServerHost() + ":8080/jaxws-samples-wsa/AddressingService";
   
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>static</strong></span> <span class="bold"><strong>void</strong></span> main(String[] args) <span class="bold"><strong>throws</strong></span> Exception
   {
      // construct proxy
      QName serviceName = <span class="bold"><strong>new</strong></span> QName("http://www.jboss.org/jbossws/ws-extensions/wsaddressing", "AddressingService");
      URL wsdlURL = <span class="bold"><strong>new</strong></span> URL(serviceURL + "?wsdl");
      Service service = Service.create(wsdlURL, serviceName);
      ServiceIface proxy = (ServiceIface)service.getPort(ServiceIface.class,  <span class="bold"><strong>new</strong></span> AddressingFeature());
      // invoke method
      assertEquals("Hello World!", proxy.sayHello());
   }
   
}
</pre><p>And that's all. Now we have both JAX-WS client and endpoint communicating each other using WS-Addressing feature.</p><p> </p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-CXFWS-Addressingtutorial_Leveraging_WSAddressing_Policy"/>12.4.3. Leveraging WS-Addressing Policy</h3></div></div></div><p>An option you can also evaluate to simplify both client and server deployment, is to let the server engine generate and publish the wsdl contract instead of using the one mentioned above: (please note the removal of wsdlLocation attribute in the @WebService annotation)</p><p> </p><pre class="screen">@WebService
(
   portName = "AddressingServicePort",
   serviceName = "AddressingService",
   targetNamespace = "http://www.jboss.org/jbossws/ws-extensions/wsaddressing",
   endpointInterface = "org.jboss.test.ws.jaxws.samples.wsa.ServiceIface"
)
@Addressing(enabled=true, required=<span class="bold"><strong>true</strong></span>)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> ServiceImpl <span class="bold"><strong>implements</strong></span> ServiceIface
{
     ...
}
</pre><p> </p><p>This way the endpoint is published with a contract containing a WS-Addressing Policy that tells clients addressing needs to be on.</p><p> </p><pre class="screen">&lt;wsp:Policy wsu:Id="AddressingServiceSoapBinding_WSAM_Addressing_Policy"&gt;
  &lt;wsam:Addressing&gt;
    &lt;wsp:Policy/&gt;
  &lt;/wsam:Addressing&gt;
&lt;/wsp:Policy&gt;</pre><p> </p><p>The client can then simply do as follows:</p><p> </p><pre class="screen">Service service = Service.create(wsdlURL, serviceName);
ServiceIface proxy = (ServiceIface)service.getPort(ServiceIface.class);
// invoke method
</pre><p> </p><p>No need for setting the AddressingFeature, the policy engine takes care of enabling WS-Addressing to match the policy advertised by the server.</p><p> </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-Addressingtutorial_Sample_Sources"/>12.5. Sample Sources</h2></div></div></div><p>All sources from this tutorial are part of JBossWS-CXF testsuite.</p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-CXFWS-ReliableMessagingtutorial"/>Chapter 13. JBossWS-CXFWS-ReliableMessagingtutorial</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_The_service">13.1. The service</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Generating_WSDL_and_JAXWS_Endpoint_Artifacts">13.2. Generating WSDL and JAX-WS Endpoint Artifacts</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Generating_JAXWS_Client_Artifacts">13.3. Generating JAX-WS Client Artifacts</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Writing_Regular_JAXWS_Client">13.4. Writing Regular JAX-WS Client</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Turning_on_WSRM_10">13.5. Turning on WS-RM 1.0</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Extending_WSDL_Using_WSPolicy">13.5.1. Extending WSDL Using WS-Policy</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Basic_WSRM_configuration">13.5.2. Basic WS-RM configuration</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Advanced_WSRM_configuration">13.5.3. Advanced WS-RM configuration</a></span></dt></dl></dd><dt><span class="section"><a href="#JBossWS-CXFWS-ReliableMessagingtutorial_Sample_Sources">13.6. Sample Sources</a></span></dt></dl></div><p><a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://incubator.apache.org/cxf/">Apache CXF</a> comes with support for <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://specs.xmlsoap.org/ws/2005/02/rm/ws-reliablemessaging.pdf">WS-RM 1.0</a>. In this sample we will show how to create client and endpoint communicating each other using WS-RM 1.0. The sample uses <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2006/07/ws-policy/">WS-Policy</a> specification to configure WS-RM.</p><p>Creating the WS-RM based service and client is very simple. User needs to create regular JAX-WS service and client first. The last step is to configure WSRM.</p><p/><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_The_service"/>13.1. The service</h2></div></div></div><p>We will start with the following endpoint implementation (bottom-up approach):</p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.wsrm.service;
 
<span class="bold"><strong>import</strong></span> javax.jws.Oneway;
<span class="bold"><strong>import</strong></span> javax.jws.WebMethod;
<span class="bold"><strong>import</strong></span> javax.jws.WebService;
 
@WebService
(
   name = "SimpleService",
   serviceName = "SimpleService",
   targetNamespace = "http://www.jboss.org/jbossws/ws-extensions/wsrm"
)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> SimpleServiceImpl
{
   @Oneway
   @WebMethod
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>void</strong></span> ping()
   {
      System.out.println("ping()");
   }
 
   @WebMethod
   <span class="bold"><strong>public</strong></span> String echo(String s)
   {
      System.out.println("echo(" + s + ")");
      <span class="bold"><strong>return</strong></span> s;
   }
}
</pre><p>Let's say that compiled endpoint class is in directory <span class="bold"><strong>/home/username/wsrm/cxf/classes</strong></span>. Our next step is to generate JAX-WS artifacts and WSDL.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_Generating_WSDL_and_JAXWS_Endpoint_Artifacts"/>13.2. Generating WSDL and JAX-WS Endpoint Artifacts</h2></div></div></div><p>We will use <span class="bold"><strong>wsprovide</strong></span> commandline tool to generate WSDL and JAX-WS artifacts. Here's the command:</p><pre class="screen">cd $JBOSS_HOME/bin

./wsprovide.sh --keep --wsdl \
   --classpath=/home/username/wsrm/cxf/classes \
   --output=/home/username/wsrm/cxf/wsprovide/generated/classes \
   --resource=/home/username/wsrm/cxf/wsprovide/generated/wsdl \
   --source=/home/username/wsrm/cxf/wsprovide/generated/src \
   org.jboss.test.ws.jaxws.samples.wsrm.service.SimpleServiceImpl
</pre><p>The above command generates the following artifacts:</p><pre class="screen"># compiled classes
ls /home/username/wsrm/cxf/wsprovide/generated/classes/org/jboss/test/ws/jaxws/samples/wsrm/service/jaxws/
Echo.class  EchoResponse.class  Ping.class

# java sources
ls /home/username/wsrm/cxf/wsprovide/generated/src/org/jboss/test/ws/jaxws/samples/wsrm/service/jaxws/
Echo.java  EchoResponse.java  Ping.java

# contract artifacts
ls /home/username/wsrm/cxf/wsprovide/generated/wsdl/
SimpleService.wsdl
</pre><p>All aforementioned generated artifacts will be part of endpoint archive. But before we will create the endpoint archive we need to reference generated WSDL from endpoint. To achieve that we will use <span class="bold"><strong>wsdlLocation</strong></span> annotation attribute. Here's the updated endpoint implementation before packaging it to the war file:</p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.wsrm.service;
 
<span class="bold"><strong>import</strong></span> javax.jws.Oneway;
<span class="bold"><strong>import</strong></span> javax.jws.WebMethod;
<span class="bold"><strong>import</strong></span> javax.jws.WebService;
 
@WebService
(
   name = "SimpleService",
   serviceName = "SimpleService",
   wsdlLocation = "WEB-INF/wsdl/SimpleService.wsdl",
   targetNamespace = "http://www.jboss.org/jbossws/ws-extensions/wsrm"
)
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> SimpleServiceImpl
{
   @Oneway
   @WebMethod
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>void</strong></span> ping()
   {
      System.out.println("ping()");
   }
 
   @WebMethod
   <span class="bold"><strong>public</strong></span> String echo(String s)
   {
      System.out.println("echo(" + s + ")");
      <span class="bold"><strong>return</strong></span> s;
   }
}
</pre><p>Created endpoint war archive consists of the following entries:</p><pre class="screen">jar -tvf jaxws-samples-wsrm.war 
     0 Wed Apr 16 14:39:22 CEST 2008 META-INF/
   106 Wed Apr 16 14:39:20 CEST 2008 META-INF/MANIFEST.MF
     0 Wed Apr 16 14:39:22 CEST 2008 WEB-INF/
   591 Wed Apr 16 14:39:20 CEST 2008 WEB-INF/web.xml
     0 Wed Apr 16 14:39:22 CEST 2008 WEB-INF/classes/
     0 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/
     0 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/jboss/
     0 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/jboss/test/
     0 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/jboss/test/ws/
     0 Wed Apr 16 14:39:20 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/
     0 Wed Apr 16 14:39:20 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/
     0 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsrm/
     0 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsrm/service/
     0 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsrm/service/jaxws/
  1235 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsrm/service/SimpleServiceImpl.class
   997 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsrm/service/jaxws/Echo.class
  1050 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsrm/service/jaxws/EchoResponse.class
   679 Wed Apr 16 14:39:18 CEST 2008 WEB-INF/classes/org/jboss/test/ws/jaxws/samples/wsrm/service/jaxws/Ping.class
     0 Wed Apr 16 14:39:22 CEST 2008 WEB-INF/wsdl/
  2799 Wed Apr 16 14:39:20 CEST 2008 WEB-INF/wsdl/SimpleService.wsdl
</pre><p>The content of web.xml file is:</p><pre class="screen">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;web-app
   version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"&gt;
   &lt;servlet&gt;
      &lt;servlet-name&gt;SimpleService&lt;/servlet-name&gt;
      &lt;servlet-class&gt;org.jboss.test.ws.jaxws.samples.wsrm.service.SimpleServiceImpl&lt;/servlet-class&gt;
   &lt;/servlet&gt;
   &lt;servlet-mapping&gt;
      &lt;servlet-name&gt;SimpleService&lt;/servlet-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_Generating_JAXWS_Client_Artifacts"/>13.3. Generating JAX-WS Client Artifacts</h2></div></div></div><p>Before we will write regular JAX-WS client we need to generate client artifacts from WSDL. Here's the command to achieve that:</p><pre class="screen">cd $JBOSS_HOME/bin

./wsconsume.sh --keep \
   --package=org.jboss.test.ws.jaxws.samples.wsrm.generated \
   --output=/home/username/wsrm/cxf/wsconsume/generated/classes \
   --source=/home/username/wsrm/cxf/wsconsume/generated/src \
   /home/username/wsrm/cxf/wsprovide/generated/wsdl/SimpleService.wsdl
</pre><p>The above command generates the following artifacts:</p><pre class="screen"># compiled classes
ls /home/username/wsrm/cxf/wsconsume/generated/classes/org/jboss/test/ws/jaxws/samples/wsrm/generated/
Echo.class          ObjectFactory.class  Ping.class           SimpleService_Service.class
EchoResponse.class  package-info.class   SimpleService.class  SimpleService_SimpleServicePort_Client.class

# java sources
ls /home/username/wsrm/cxf/wsconsume/generated/src/org/jboss/test/ws/jaxws/samples/wsrm/generated/
Echo.java          ObjectFactory.java  Ping.java           SimpleService_Service.java
EchoResponse.java  package-info.java   SimpleService.java  SimpleService_SimpleServicePort_Client.java
</pre><p>Now the last step is to write the regular JAX-WS client using generated artifacts.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_Writing_Regular_JAXWS_Client"/>13.4. Writing Regular JAX-WS Client</h2></div></div></div><p>The following is the regular JAX-WS client using generated artifacts:</p><pre class="screen">package org.jboss.test.ws.jaxws.samples.wsrm.client;

import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import org.jboss.test.ws.jaxws.samples.wsrm.generated.SimpleService;

public final class SimpleServiceTestCase
{

   private static final String serviceURL = "http://localhost:8080/jaxws-samples-wsrm/SimpleService";
   
   public static void main(String[] args) throws Exception
   {
      // create service
      QName serviceName = new QName("http://www.jboss.org/jbossws/ws-extensions/wsrm", "SimpleService");
      URL wsdlURL = new URL(serviceURL + "?wsdl");
      Service service = Service.create(wsdlURL, serviceName);
      SimpleService proxy = (SimpleService)service.getPort(SimpleService.class);
      
      // invoke methods
      proxy.ping(); // one way call
      proxy.echo("Hello World!"); // request responce call
   }
   
}
</pre><p>Now we have both endpoint and client implementation but without WSRM in place. Our next goal is to turn on the WS-RM feature.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_Turning_on_WSRM_10"/>13.5. Turning on WS-RM 1.0</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_Extending_WSDL_Using_WSPolicy"/>13.5.1. Extending WSDL Using WS-Policy</h3></div></div></div><p>To activate WSRM on server side we need to extend the WSDL with WSRM and addressing policies. Here is how it looks like:</p><pre class="screen">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;wsdl:definitions name="SimpleService" targetNamespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jboss.org/jbossws/ws-extensions/wsrm">http://www.jboss.org/jbossws/ws-extensions/wsrm</a>" xmlns:tns="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jboss.org/jbossws/ws-extensions/wsrm">http://www.jboss.org/jbossws/ws-extensions/wsrm</a>" xmlns:xsd="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>" xmlns:soap="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/wsdl/soap/">http://schemas.xmlsoap.org/wsdl/soap/</a>" xmlns:wsdl="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/wsdl/">http://schemas.xmlsoap.org/wsdl/</a>" xmlns:wsp="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2006/07/ws-policy">http://www.w3.org/2006/07/ws-policy</a>"&gt;
&lt;wsdl:types&gt;
&lt;xsd:schema xmlns:xsd="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>" xmlns:tns="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jboss.org/jbossws/ws-extensions/wsrm">http://www.jboss.org/jbossws/ws-extensions/wsrm</a>" attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jboss.org/jbossws/ws-extensions/wsrm">http://www.jboss.org/jbossws/ws-extensions/wsrm</a>"&gt;
&lt;xsd:element name="ping" type="tns:ping"/&gt;
&lt;xsd:complexType name="ping"&gt;
&lt;xsd:sequence/&gt;
&lt;/xsd:complexType&gt;
&lt;xsd:element name="echo" type="tns:echo"/&gt;
&lt;xsd:complexType name="echo"&gt;
&lt;xsd:sequence&gt;
&lt;xsd:element minOccurs="0" name="arg0" type="xsd:string"/&gt;
&lt;/xsd:sequence&gt;
&lt;/xsd:complexType&gt;
&lt;xsd:element name="echoResponse" type="tns:echoResponse"/&gt;
&lt;xsd:complexType name="echoResponse"&gt;
&lt;xsd:sequence&gt;
&lt;xsd:element minOccurs="0" name="return" type="xsd:string"/&gt;
&lt;/xsd:sequence&gt;
&lt;/xsd:complexType&gt;
&lt;/xsd:schema&gt;
  &lt;/wsdl:types&gt;
  &lt;wsdl:message name="echoResponse"&gt;
    &lt;wsdl:part name="parameters" element="tns:echoResponse"&gt;
    &lt;/wsdl:part&gt;
  &lt;/wsdl:message&gt;
  &lt;wsdl:message name="echo"&gt;
    &lt;wsdl:part name="parameters" element="tns:echo"&gt;
    &lt;/wsdl:part&gt;
  &lt;/wsdl:message&gt;
  &lt;wsdl:message name="ping"&gt;
    &lt;wsdl:part name="parameters" element="tns:ping"&gt;
    &lt;/wsdl:part&gt;
  &lt;/wsdl:message&gt;
  &lt;wsdl:portType name="SimpleService"&gt;
    &lt;wsdl:operation name="ping"&gt;
      &lt;wsdl:input name="ping" message="tns:ping"&gt;
    &lt;/wsdl:input&gt;
    &lt;/wsdl:operation&gt;
    &lt;wsdl:operation name="echo"&gt;
      &lt;wsdl:input name="echo" message="tns:echo"&gt;
    &lt;/wsdl:input&gt;
      &lt;wsdl:output name="echoResponse" message="tns:echoResponse"&gt;
    &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
  &lt;/wsdl:portType&gt;
  &lt;wsdl:binding name="SimpleServiceSoapBinding" type="tns:SimpleService"&gt;

    &lt;!-- - - - - - - - - - - - - - - - - - - - - - - - - - --&gt;
    &lt;!-- Created WS-Policy with WSRM addressing assertions --&gt;
    &lt;!-- - - - - - - - - - - - - - - - - - - - - - - - - - --&gt;&lt;wsp:Policy&gt;
      &lt;wswa:UsingAddressing xmlns:wswa="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2006/05/addressing/wsdl">http://www.w3.org/2006/05/addressing/wsdl</a>"/&gt;
      &lt;wsrmp:RMAssertion xmlns:wsrmp="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/ws/2005/02/rm/policy">http://schemas.xmlsoap.org/ws/2005/02/rm/policy</a>"/&gt;
    &lt;/wsp:Policy&gt;

    &lt;soap:binding style="document" transport="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/soap/http">http://schemas.xmlsoap.org/soap/http</a>"/&gt;
    &lt;wsdl:operation name="ping"&gt;
      &lt;soap:operation soapAction="" style="document"/&gt;
      &lt;wsdl:input name="ping"&gt;
        &lt;soap:body use="literal"/&gt;
      &lt;/wsdl:input&gt;
    &lt;/wsdl:operation&gt;
    &lt;wsdl:operation name="echo"&gt;
      &lt;soap:operation soapAction="" style="document"/&gt;
      &lt;wsdl:input name="echo"&gt;
        &lt;soap:body use="literal"/&gt;
      &lt;/wsdl:input&gt;
      &lt;wsdl:output name="echoResponse"&gt;
        &lt;soap:body use="literal"/&gt;
      &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
  &lt;/wsdl:binding&gt;
  &lt;wsdl:service name="SimpleService"&gt;
    &lt;wsdl:port name="SimpleServicePort" binding="tns:SimpleServiceSoapBinding"&gt;
      &lt;soap:address location="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://localhost:9090/hello">http://localhost:9090/hello</a>"/&gt;
    &lt;/wsdl:port&gt;
  &lt;/wsdl:service&gt;
&lt;/wsdl:definitions&gt;
</pre><p> </p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_Basic_WSRM_configuration"/>13.5.2. Basic WS-RM configuration</h3></div></div></div><p>Once the endpoint wsdl is properly updated with the policies elements, the JBossWS-CXF stack is <span class="emphasis"><em>automatically</em></span> able to detect the need for the WS-Policy engine to be used, both on client and server side, for enabling WS-Reliable Messaging.</p><p>The endpoint advertises RM capabilities through the published wsdl and the client is required to also enable WS-RM for successfully exchanging messages with the server.</p><p>The regular jaxws client above is enough if the user does not need to tune any specific detail of the RM subsystem (acknowledgment / retransmission intervals, thresholds, ...)</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_Advanced_WSRM_configuration"/>13.5.3. Advanced WS-RM configuration</h3></div></div></div><p>When users want to have full control over the way WS-RM communication is established, the current CXF Bus needs to be properly configured. This can be done through a CXF Spring configuration.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_Providing_Client_CXF_Configuration"/>13.5.3.1. Providing Client CXF Configuration</h4></div></div></div><p>Next step is to create the client CXF configuration file that will be used by client. The following file was copied/pasted from CXF 2.0.5 ws_rm sample. It simply activates the WSRM protocol for CXF client. We will name this file <span class="bold"><strong>cxf.xml</strong></span> in our sample. Here's the content of this file:</p><pre class="screen">&lt;beans
  xmlns="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>"
  xmlns:xsi="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"
  xmlns:cxf="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/core">http://cxf.apache.org/core</a>"
  xmlns:wsa="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/ws/addressing">http://cxf.apache.org/ws/addressing</a>"
  xmlns:http="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/transports/http/configuration">http://cxf.apache.org/transports/http/configuration</a>"
  xmlns:wsrm-policy="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/ws/2005/02/rm/policy">http://schemas.xmlsoap.org/ws/2005/02/rm/policy</a>"
  xmlns:wsrm-mgr="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/ws/rm/manager">http://cxf.apache.org/ws/rm/manager</a>"
  xsi:schemaLocation="
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/core">http://cxf.apache.org/core</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/core.xsd">http://cxf.apache.org/schemas/core.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/transports/http/configuration">http://cxf.apache.org/transports/http/configuration</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/configuration/http-conf.xsd">http://cxf.apache.org/schemas/configuration/http-conf.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/ws/2005/02/rm/policy">http://schemas.xmlsoap.org/ws/2005/02/rm/policy</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/ws/2005/02/rm/wsrm-policy.xsd">http://schemas.xmlsoap.org/ws/2005/02/rm/wsrm-policy.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/ws/rm/manager">http://cxf.apache.org/ws/rm/manager</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/configuration/wsrm-manager.xsd">http://cxf.apache.org/schemas/configuration/wsrm-manager.xsd</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>
    <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beans/spring-beans.xsd</a>"&gt;
 
  &lt;cxf:bus&gt;
    &lt;cxf:features&gt;
      &lt;cxf:logging/&gt;
      &lt;wsa:addressing/&gt;
      &lt;wsrm-mgr:reliableMessaging&gt;
        &lt;wsrm-policy:RMAssertion&gt;
          &lt;wsrm-policy:BaseRetransmissionInterval Milliseconds="4000"/&gt;           
          &lt;wsrm-policy:AcknowledgementInterval Milliseconds="2000"/&gt;          
        &lt;/wsrm-policy:RMAssertion&gt;
        &lt;wsrm-mgr:destinationPolicy&gt;
          &lt;wsrm-mgr:acksPolicy intraMessageThreshold="0" /&gt;
        &lt;/wsrm-mgr:destinationPolicy&gt;
      &lt;/wsrm-mgr:reliableMessaging&gt;
    &lt;/cxf:features&gt;
  &lt;/cxf:bus&gt;
    
&lt;/beans&gt;
</pre><p>And that's almost all. The client configuration needs to picked up by the client classloader; in order to achieve that the cxf.xml file has to be put in the META-INF directory of client jar. That jar should then be provided when setting the class loader.</p><p>Alternatively the bus configuration can also be read programmatically as follows:</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_Updating_Client_Code_to_Read_Bus_Configuration_File"/>13.5.3.2. Updating Client Code to Read Bus Configuration File</h4></div></div></div><p>And here's the last piece the updated CXF client:</p><pre class="screen"><span class="bold"><strong>package</strong></span> org.jboss.test.ws.jaxws.samples.wsrm.client;
 
<span class="bold"><strong>import</strong></span> java.net.URL;
<span class="bold"><strong>import</strong></span> java.io.File;
<span class="bold"><strong>import</strong></span> javax.xml.namespace.QName;
<span class="bold"><strong>import</strong></span> javax.xml.ws.Service;
<span class="bold"><strong>import</strong></span> org.apache.cxf.Bus;
<span class="bold"><strong>import</strong></span> org.apache.cxf.BusFactory;
<span class="bold"><strong>import</strong></span> org.apache.cxf.bus.spring.SpringBusFactory;
<span class="bold"><strong>import</strong></span> org.jboss.test.ws.jaxws.samples.wsrm.generated.SimpleService;
 
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>final</strong></span> <span class="bold"><strong>class</strong></span> SimpleServiceTestCase
{
 
   <span class="bold"><strong>private</strong></span> <span class="bold"><strong>static</strong></span> <span class="bold"><strong>final</strong></span> String serviceURL = "http://localhost:8080/jaxws-samples-wsrm/SimpleService";
   
   <span class="bold"><strong>public</strong></span> <span class="bold"><strong>static</strong></span> <span class="bold"><strong>void</strong></span> main(String[] args) <span class="bold"><strong>throws</strong></span> Exception
   {
      // create bus
      SpringBusFactory busFactory = <span class="bold"><strong>new</strong></span> SpringBusFactory();
      URL cxfConfig = <span class="bold"><strong>new</strong></span> File("resources/jaxws/samples/wsrm/cxf.xml").toURL();
      Bus bus = busFactory.createBus(cxfConfig);
      busFactory.setDefaultBus(bus);
 
      // create service
      QName serviceName = <span class="bold"><strong>new</strong></span> QName("http://www.jboss.org/jbossws/ws-extensions/wsrm", "SimpleService");
      URL wsdlURL = <span class="bold"><strong>new</strong></span> URL(serviceURL + "?wsdl");
      Service service = Service.create(wsdlURL, serviceName);
      SimpleService proxy = (SimpleService)service.getPort(SimpleService.class);
      
      // invoke methods
      proxy.ping(); // one way call
      proxy.echo("Hello World!"); // request responce call
 
      // shutdown bus
      bus.shutdown(<span class="bold"><strong>true</strong></span>);
   }
   
}
</pre></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFWS-ReliableMessagingtutorial_Sample_Sources"/>13.6. Sample Sources</h2></div></div></div><p>All sources from this tutorial are part of JBossWS-CXF distribution.</p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-CXFJMStransporttutorial"/>Chapter 14. JBossWS-CXFJMStransporttutorial</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_WSDL">14.1. WSDL</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_Service_Implementation">14.2. Service Implementation</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_webxml">14.3. web.xml</a></span></dt><dt><span class="section"><a href="#JBossWS-CXFJMStransporttutorial_jbosswscxfxml">14.4. jbossws-cxf.xml</a></span></dt></dl></div><p>JBossWS-CXF supports JMS Transport to transfer SOAP messages. There is a testcase in the codebase to demonstrate this ability, available <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://anonsvn.jboss.org/repos/jbossws/stack/cxf/tags/jbossws-cxf-3.4.0.CR2/modules/testsuite/cxf-spring-tests/src/test/java/org/jboss/test/ws/jaxws/samples/jmstransport/">here</a>. In this tutorial, we will use a wsdl first web service example to show you how to enable this feature in JBossWS.</p><p> </p><p/><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFJMStransporttutorial_WSDL"/>14.1. WSDL</h2></div></div></div><pre class="screen">
&lt;wsdl:definitions name="OrganizationJMSEndpointService" targetNamespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/jmstransport">http://org.jboss.ws/samples/jmstransport</a>" xmlns:jms="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/transports/jms">http://cxf.apache.org/transports/jms</a>" xmlns:ns1="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/wsdl/soap/http">http://schemas.xmlsoap.org/wsdl/soap/http</a>" xmlns:soap="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/wsdl/soap/">http://schemas.xmlsoap.org/wsdl/soap/</a>" xmlns:tns="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/jmstransport">http://org.jboss.ws/samples/jmstransport</a>" xmlns:wsdl="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/wsdl/">http://schemas.xmlsoap.org/wsdl/</a>" xmlns:xsd="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>"&gt;
  &lt;wsdl:message name="getContactInfoResponse"&gt;
    &lt;wsdl:part name="return" type="xsd:string"&gt;
    &lt;/wsdl:part&gt;
  &lt;/wsdl:message&gt;
  &lt;wsdl:message name="getContactInfo"&gt;
    &lt;wsdl:part name="arg0" type="xsd:string"&gt;
    &lt;/wsdl:part&gt;
  &lt;/wsdl:message&gt;
  &lt;wsdl:portType name="Organization"&gt;
    &lt;wsdl:operation name="getContactInfo"&gt;
      &lt;wsdl:input message="tns:getContactInfo" name="getContactInfo"&gt;
    &lt;/wsdl:input&gt;
      &lt;wsdl:output message="tns:getContactInfoResponse" name="getContactInfoResponse"&gt;
    &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
  &lt;/wsdl:portType&gt;
  &lt;wsdl:binding name="HTTPSoapBinding" type="tns:Organization"&gt;
    &lt;soap:binding style="rpc" transport="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/soap/http">http://schemas.xmlsoap.org/soap/http</a>"/&gt;
    &lt;wsdl:operation name="getContactInfo"&gt;
      &lt;soap:operation soapAction="" style="rpc"/&gt;
      &lt;wsdl:input name="getContactInfo"&gt;
        &lt;soap:body namespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/jmstransport">http://org.jboss.ws/samples/jmstransport</a>" use="literal"/&gt;
      &lt;/wsdl:input&gt;
      &lt;wsdl:output name="getContactInfoResponse"&gt;
        &lt;soap:body namespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/jmstransport">http://org.jboss.ws/samples/jmstransport</a>" use="literal"/&gt;
      &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
  &lt;/wsdl:binding&gt;

  &lt;wsdl:binding name="JMSSoapBinding" type="tns:Organization"&gt;
    &lt;soap:binding style="rpc" transport="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/transports/jms">http://cxf.apache.org/transports/jms</a>"/&gt;
    &lt;wsdl:operation name="getContactInfo"&gt;
      &lt;soap:operation soapAction="" style="rpc"/&gt;
      &lt;wsdl:input name="getContactInfo"&gt;
        &lt;soap:body namespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/jmstransport">http://org.jboss.ws/samples/jmstransport</a>" use="literal"/&gt;
      &lt;/wsdl:input&gt;
      &lt;wsdl:output name="getContactInfoResponse"&gt;
        &lt;soap:body namespace="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://org.jboss.ws/samples/jmstransport">http://org.jboss.ws/samples/jmstransport</a>" use="literal"/&gt;
      &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
  &lt;/wsdl:binding&gt;


  &lt;wsdl:service name="OrganizationService"&gt;
    &lt;wsdl:port binding='tns:HTTPSoapBinding' name='HttpEndpointPort'&gt;
      &lt;soap:address location='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://@jboss.bind.address@:8080/jaxws-samples-jmstransport'/">http://@jboss.bind.address@:8080/jaxws-samples-jmstransport'/</a>&gt;
    &lt;/wsdl:port&gt;
    &lt;wsdl:port binding="tns:JMSSoapBinding" name="JmsEndpointPort"&gt;
           &lt;jms:address
                   destinationStyle="queue"
                   jndiConnectionFactoryName="ConnectionFactory" 
                   jndiDestinationName="queue/RequestQueue"
                   jndiReplyDestinationName="queue/ResponseQueue"&gt;
                   &gt;                   
                &lt;/jms:address&gt;    
        &lt;/wsdl:port&gt;
  &lt;/wsdl:service&gt;
&lt;/wsdl:definitions&gt;</pre><p> </p><p>Apache CXF defines the jms wsdl extension, so the jms queue name or other information about jms in wsdl port can be parsed to send or receive jms message. Check this wiki page to see what jms attributes you can defined in WSDL.  In this wsdl, we define two queues to send and receive the soap message. CXF uses JNDI to look up the jms ConnectionFactory, so we may also need to provide the JNDI properties as the following example :</p><p> </p><pre class="screen">&lt;jms:address
    destinationStyle="queue"
    jndiConnectionFactoryName="ConnectionFactory" 
    jndiDestinationName="queue/RequestQueue"
    jndiReplyDestinationName="queue/ResponseQueue"
    &gt;
    &lt;jms:JMSNamingProperty name="java.naming.factory.initial"
                           value="org.jnp.interfaces.NamingContextFactory"/&gt;
    &lt;jms:JMSNamingProperty name="java.naming.provider.url"
                           value="jnp://localhost:1099"/&gt;
&lt;/jms:address&gt;</pre><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFJMStransporttutorial_Service_Implementation"/>14.2. Service Implementation</h2></div></div></div><p> </p><p>After generated code from this wsdl , we wrote two class to implement this interface for this two ports . We annotate the portName in annotation to tell web service stack which transport this service uses :</p><p> </p><pre class="screen">@WebService (serviceName="OrganizationService", portName="HttpEndpointPort",wsdlLocation = "WEB-INF/wsdl/jmstransport.wsdl",targetNamespace = "http://org.jboss.ws/samples/jmstransport", endpointInterface="org.jboss.test.ws.jaxws.samples.jmstransport.Organization")
@SOAPBinding(style = SOAPBinding.Style.RPC)
 
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> OrganizationHttpEndpoint <span class="bold"><strong>implements</strong></span> Organization
{ 
   @WebMethod
   <span class="bold"><strong>public</strong></span> String getContactInfo(String organization)
   {
      <span class="bold"><strong>return</strong></span> "The '" + organization + "' boss is currently out of office, please call again.";
   }
}
 
 
 
 
</pre><p> </p><p> </p><p> </p><pre class="screen">@WebService (serviceName="OrganizationService",portName="JmsEndpointPort", wsdlLocation = "WEB-INF/wsdl/jmstransport.wsdl", targetNamespace = "http://org.jboss.ws/samples/jmstransport", endpointInterface="org.jboss.test.ws.jaxws.samples.jmstransport.Organization")
@SOAPBinding(style = SOAPBinding.Style.RPC)
 
<span class="bold"><strong>public</strong></span> <span class="bold"><strong>class</strong></span> OrganizationJmsEndpoint <span class="bold"><strong>implements</strong></span> Organization
{ 
   @WebMethod
   <span class="bold"><strong>public</strong></span> String getContactInfo(String organization)
   {
      <span class="bold"><strong>return</strong></span> "The '" + organization + "' boss is currently out of office, please call again.";
   }
}
 
 
 
 
</pre><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFJMStransporttutorial_webxml"/>14.3. web.xml</h2></div></div></div><p> </p><pre class="screen">&lt;web-app xmlns="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/xml/ns/j2ee">http://java.sun.com/xml/ns/j2ee</a>"
  xmlns:xsi="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"
  xsi:schemaLocation="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/xml/ns/j2ee">http://java.sun.com/xml/ns/j2ee</a> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd</a>"
  version="2.4"&gt;

  &lt;servlet&gt;
    &lt;servlet-name&gt;OrganizationService&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.jboss.test.ws.jaxws.samples.jmstransport.OrganizationHttpEndpoint&lt;/servlet-class&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
  &lt;/servlet&gt;

  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;OrganizationService&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;&lt;/web-app&gt;</pre><p> </p><p>It is almost the same as the usual web.xml to deploy a web service except the &lt;load-on-startup&gt; servlet initializeparameter. This is for jms service start ready when deployment, no need to wait until the first servlet request to start the jms endpoint.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-CXFJMStransporttutorial_jbosswscxfxml"/>14.4. jbossws-cxf.xml</h2></div></div></div><p>In addition to web.xml,  the jbossws-cxf.xml is needed to actually pass in cxf to start this two port.</p><p> </p><pre class="screen">&lt;beans xmlns='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
    xmlns:xsi='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>' xmlns:beans='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>'
        xmlns:jms="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/transports/jms">http://cxf.apache.org/transports/jms</a>"
    xmlns:jaxws='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a>'
    xsi:schemaLocation='<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">http://www.springframework.org/schema/beans/spring-beans-2.0.xsd</a>
  <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2006/07/ws-policy">http://www.w3.org/2006/07/ws-policy</a> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2006/07/ws-policy.xsd">http://www.w3.org/2006/07/ws-policy.xsd</a> 
  <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/jaxws.xsd">http://cxf.apache.org/schemas/jaxws.xsd</a>
  <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/transports/jms">http://cxf.apache.org/transports/jms</a> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/schemas/configuration/jms.xsd">http://cxf.apache.org/schemas/configuration/jms.xsd</a>'&gt;

        &lt;import resource="classpath:META-INF/cxf/cxf-extension-jms.xml"/&gt;    
    &lt;jaxws:endpoint id='SOAPQueryService'
        implementor='org.jboss.test.ws.jaxws.samples.jmstransport.OrganizationHttpEndpoint'
                &gt;
        &lt;jaxws:invoker&gt;
            &lt;bean class='org.jboss.wsf.stack.cxf.InvokerJSE'/&gt;
        &lt;/jaxws:invoker&gt;
    &lt;/jaxws:endpoint&gt;

    &lt;jaxws:endpoint id='JMSQueryService'
        implementor='org.jboss.test.ws.jaxws.samples.jmstransport.OrganizationJmsEndpoint'
                transportId="<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://cxf.apache.org/transports/jms">http://cxf.apache.org/transports/jms</a>"&gt;
    &lt;/jaxws:endpoint&gt;
&lt;/beans&gt;</pre><p> </p><p><span class="bold"><strong>Note: </strong></span>the import resource is the JmsTransportFactory configuration . It is required to jms transport enablement .</p><p> </p><p>Below gives the war file directory structure to make it more clear what inside :</p><pre class="screen">
|-- jmstransport-sample.war 
`-- WEB-INF
    |-- classes
    |   `-- org
    |       `-- jboss
    |           `-- test
    |               `-- ws
    |                   `-- jaxws
    |                       `-- samples
    |                           `-- jmstransport
    |                               |-- JMSTransportTestCase$ResponseListener.class
    |                               |-- JMSTransportTestCase.class
    |                               |-- Organization.class
    |                               |-- OrganizationHttpEndpoint.class
    |                               `-- OrganizationJmsEndpoint.class
    |-- jboss-web.xml
    |-- jbossws-cxf.xml
    |-- web.xml
    `-- wsdl
        `-- jmstransport.wsdl</pre></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-Articlesandspecs"/>Chapter 15. JBossWS-Articlesandspecs</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e4901">15.1. J2EE-5.0 Web Services Specifications</a></span></dt><dt><span class="section"><a href="#d0e5006">15.2. J2EE-1.4 Web Services Specifications</a></span></dt><dt><span class="section"><a href="#d0e5093">15.3. Optional advanced Web Services specifications</a></span></dt></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4901"/>15.1. J2EE-5.0 Web Services Specifications</h2></div></div></div><div class="itemizedlist"><ul><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=244">J2EE-5.0 - Java2 Enterprise Edition Specification (JSR244)</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=921">WS4EE-1.1 - Enterprise Web Services (JSR921)</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=220">EJB-3.0 - Enterprise Java Beans (JSR220)</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=224">JAXWS-2.0 - Java API for XML-Based Web Services (JSR224)</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=222">JAXB-2.0 - Java Architecture for XML Binding (JSR222)</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/soap12-part1">SOAP-1.2 - SOAP Messaging Framework</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/soap12-part0">SOAP-1.2 Primer</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://schemas.xmlsoap.org/wsdl/soap12">WSDL 1.1 Binding Extension for SOAP 1.2</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/wsdl20">WSDL-2.0 - Part 1: Core Language</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/wsdl20-extensions">WSDL-2.0 - Part 2: Predefined Extensions</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/wsdl20-bindings">WSDL-2.0 - Part 3: Bindings</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/2002/ws/desc/wsdl20-primer">WSDL-2.0 Primer</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.ws-i.org/Profiles/BasicProfile-1.1.html">BP-1.1 - Basic Profile</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=181">JSR181 - Web Services Metadata</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.ws-i.org/Profiles/AttachmentsProfile-1.0.html">WS-I Attachments Profile 1.0</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/soap12-mtom/">SOAP Message Transmission Optimization Mechanism (MTOM)</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/xop10/">XML-binary Optimized Packaging (XOP)</a></p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5006"/>15.2. J2EE-1.4 Web Services Specifications</h2></div></div></div><div class="itemizedlist"><ul><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://java.sun.com/j2ee/1.4/index.jsp">J2EE-1.4 - Java 2 Platform, Enterprise Edition (J2EE) 1.4</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=921">WS4EE-1.1 - Enterprise Web Services</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=153">EJB-2.1 - Enterprise Java Beans</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=101">JAXRPC-1.1 - Java API for XML-based RPC</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=67">SAAJ-1.2 - SOAP with Attachments</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=93">JAXR-1.0 - Java API for XML Registries</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/2000/NOTE-SOAP-20000508">SOAP-1.1 - Simple Object Access Protocol</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/wsdl">WSDL-1.1 - Web Services Description Language</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/REC-xml/">XML-1.0 - Extensible Markup Language</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/xmlschema-1/">XMLSchema - Structures</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/xmlschema-2/">XMLSchema - Data Types</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/xmlschema-0">XMLSchema Primer</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.w3.org/TR/REC-xml-names">XMLNS - Namespaces in XML</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.ws-i.org/Profiles/BasicProfile-1.0.html">BP-1.0 - Basic Profile</a></p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5093"/>15.3. Optional advanced Web Services specifications</h2></div></div></div><div class="itemizedlist"><ul><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnglobspec/html/wsspecsover.asp">MSDN Web Services Specifications Index Page</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.jboss.com/jira/browse/JBWS-330">WS-Distributed Managment</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.jboss.com/jira/browse/JBWS-326">WS-Notification</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.jboss.com/jira/browse/JBWS-76">WS-ReliableMessaging</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.jboss.com/jira/browse/JBWS-329">WS-Resource</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.jboss.com/jira/browse/JBWS-36">WS-Transaction</a> </p></li><li><p> <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.jboss.org/jira/browse/JBWS-447">WS-BPEL</a></p></li></ul></div><div class="variablelist"><dl/></div><p>Please provide feedback on your needs of these optional WS specifications as this will influence what we will put on the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.jboss.org/jira/browse/JBWS?report=com.atlassian.jira.plugin.system.project:roadmap-panel">JBossWS roadmap</a>.</p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap_JBossWS-JAX-WSAnnotations"/>Chapter 16. JBossWS-JAX-WSAnnotations</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_JAXWS_Annotations">16.1. JAX-WS Annotations</a></span></dt><dd><dl><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsServiceMode">16.1.1. javax.xml.ws.ServiceMode</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebFault">16.1.2. javax.xml.ws.WebFault</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsRequestWrapper">16.1.3. javax.xml.ws.RequestWrapper</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsResponseWrapper">16.1.4. javax.xml.ws.ResponseWrapper</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceClient">16.1.5. javax.xml.ws.WebServiceClient</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebEndpoint">16.1.6. javax.xml.ws.WebEndpoint</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceProvider">16.1.7. javax.xml.ws.WebServiceProvider</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsBindingType">16.1.8. javax.xml.ws.BindingType</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceRef">16.1.9. javax.xml.ws.WebServiceRef</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceRefs">16.1.10. javax.xml.ws.WebServiceRefs</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsAction">16.1.11. javax.xml.ws.Action</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_javaxxmlwsFaultAction">16.1.12. javax.xml.ws.FaultAction</a></span></dt><dt><span class="section"><a href="#JBossWS-JAX-WSAnnotations_Annotations_Defined_by_JSR181">16.1.13. Annotations Defined by JSR-181</a></span></dt></dl></dd></dl></div><p/><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="JBossWS-JAX-WSAnnotations_JAXWS_Annotations"/>16.1. JAX-WS Annotations</h2></div></div></div><p>For details, see <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.jcp.org/en/jsr/detail?id=224">JSR-224 - Java API for XML-Based Web Services (JAX-WS) 2.0</a></p><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsServiceMode"/>16.1.1. javax.xml.ws.ServiceMode</h3></div></div></div><p>The ServiceMode annotation is used to specify the mode for a provider class, i.e. whether a provider wants to have access to protocol message payloads (e.g. a SOAP body) or the entire protocol messages (e.g. a SOAP envelope).</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsWebFault"/>16.1.2. javax.xml.ws.WebFault</h3></div></div></div><p>The WebFault annotation is used when mapping WSDL faults to Java exceptions, see section 2.5. It is used to capture the name of the fault element used when marshalling the JAXB type generated from the global element referenced by the WSDL fault message. It can also be used to customize the mapping of service specific exceptions to WSDL faults.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsRequestWrapper"/>16.1.3. javax.xml.ws.RequestWrapper</h3></div></div></div><p>The RequestWrapper annotation is applied to the methods of an SEI. It is used to capture the JAXB generated request wrapper bean and the element name and namespace for marshalling / unmarshalling the bean. The default value of localName element is the operationName as defined in WebMethod annotation and the default value for the targetNamespace element is the target namespace of the SEI.When starting from Java, this annotation is used to resolve overloading conflicts in document literal mode. Only the className element is required in this case.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsResponseWrapper"/>16.1.4. javax.xml.ws.ResponseWrapper</h3></div></div></div><p>The ResponseWrapper annotation is applied to the methods of an SEI. It is used to capture the JAXB generated response wrapper bean and the element name and namespace for marshalling / unmarshalling the bean. The default value of the localName element is the operationName as defined in the WebMethod appended with ”Response” and the default value of the targetNamespace element is the target namespace of the SEI. When starting from Java, this annotation is used to resolve overloading conflicts in document literal mode. Only the className element is required in this case.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceClient"/>16.1.5. javax.xml.ws.WebServiceClient</h3></div></div></div><p>The WebServiceClient annotation is specified on a generated service class (see 2.7). It is used to associate a class with a specific Web service, identify by a URL to a WSDL document and the qualified name of a wsdl:service element.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsWebEndpoint"/>16.1.6. javax.xml.ws.WebEndpoint</h3></div></div></div><p>The WebEndpoint annotation is specified on the getPortName() methods of a generated service class (see 2.7). It is used to associate a get method with a specific wsdl:port, identified by its local name (a NCName).</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceProvider"/>16.1.7. javax.xml.ws.WebServiceProvider</h3></div></div></div><p>The WebServiceProvider annotation is specified on classes that implement a strongly typed javax- .xml.ws.Provider. It is used to declare that a class that satisfies the requirements for a provider (see 5.1) does indeed define a Web service endpoint, much like the WebService annotation does for SEI-based endpoints.</p><p>The WebServiceProvider and WebService annotations are mutually exclusive.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsBindingType"/>16.1.8. javax.xml.ws.BindingType</h3></div></div></div><p>The BindingType annotation is applied to an endpoint implementation class. It specifies the binding to use when publishing an endpoint of this type.</p><p>The default binding for an endpoint is the SOAP 1.1/HTTP one</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceRef"/>16.1.9. javax.xml.ws.WebServiceRef</h3></div></div></div><p>The WebServiceRef annotation is used to declare a reference to a Web service. It follows the resource pattern exemplified by the javax.annotation.Resource annotation in JSR-250 [32]. The WebServiceRef annotation is required to be honored when running on the Java EE 5 platform, where it is subject to the common resource injection rules described by the platform specification [33].</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsWebServiceRefs"/>16.1.10. javax.xml.ws.WebServiceRefs</h3></div></div></div><p>The WebServiceRefs annotation is used to declare multiple references to Web services on a single class. It is necessary to work around the limition against specifying repeated annotations of the same type on any given class, which prevents listing multiple javax.ws.WebServiceRef annotations one after the other. This annotation follows the resource pattern exemplified by the javax.annotation.Resources annotation in JSR-250.</p><p>Since no name and type can be inferred in this case, each WebServiceRef annotation inside a WebServiceRefs MUST contain name and type elements with non-default values. The WebServiceRef annotation is required to be honored when running on the Java EE 5 platform, where it is subject to the common resource injection rules described by the platform specification.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsAction"/>16.1.11. javax.xml.ws.Action</h3></div></div></div><p>The Action annotation is applied to the methods of a SEI. It used to generate the wsa:Action on wsdl:input and wsdl:output of each wsdl:operation mapped from the annotated methods.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxxmlwsFaultAction"/>16.1.12. javax.xml.ws.FaultAction</h3></div></div></div><p>The FaultAction annotation is used within the Action annotation to generate the wsa:Action element on the wsdl:fault element of each wsdl:operation mapped from the annotated methods.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="JBossWS-JAX-WSAnnotations_Annotations_Defined_by_JSR181"/>16.1.13. Annotations Defined by JSR-181</h3></div></div></div><p>JSR-181 defines the syntax and semantics of Java Web Service (JWS) metadata and default values.</p><p>For details, see <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jcp.org/en/jsr/detail?id=181">JSR 181 - Web Services Metadata for the Java Platform</a></p><p> </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxjwsWebService"/>16.1.13.1. javax.jws.WebService</h4></div></div></div><p>Marks a Java class as implementing a Web Service, or a Java interface as defining a Web Service interface.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxjwsWebMethod"/>16.1.13.2. javax.jws.WebMethod</h4></div></div></div><p>Customizes a method that is exposed as a Web Service operation.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxjwsOneWay"/>16.1.13.3. javax.jws.OneWay</h4></div></div></div><p>Indicates that the given web method has only an input message and no output. Typically, a oneway method returns the thread of control to the calling application prior to executing the actual business method. A JSR-181 processor is REQUIRED to report an error if an operation marked @Oneway has a return value, declares any checked exceptions or has any INOUT or OUT parameters.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxjwsWebParam"/>16.1.13.4. javax.jws.WebParam</h4></div></div></div><p>Customizes the mapping of an individual parameter to a Web Service message part and XML element.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxjwsWebResult"/>16.1.13.5. javax.jws.WebResult</h4></div></div></div><p>Customizes the mapping of the return value to a WSDL part and XML element.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxjwsSOAPBinding"/>16.1.13.6. javax.jws.SOAPBinding</h4></div></div></div><p>Specifies the mapping of the Web Service onto the SOAP message protocol.</p><p>The SOAPBinding annotation has a target of TYPE and METHOD. The annotation may be placed on a method if and only if the SOAPBinding.style is DOCUMENT. Implementations MUST report an error if the SOAPBinding annotation is placed on a method with a SOAPBinding.style of RPC. Methods that do not have a SOAPBinding annotation accept the SOAPBinding behavior defined on the type.</p><p> </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="JBossWS-JAX-WSAnnotations_javaxjwsHandlerChain"/>16.1.13.7. javax.jws.HandlerChain</h4></div></div></div><p>The @HandlerChain annotation associates the Web Service with an externally defined handler chain.</p><p>It is an error to combine this annotation with the @SOAPMessageHandlers annotation.</p><p>The @HandlerChain annotation MAY be present on the endpoint interface and service implementation bean. The service implementation bean's @HandlerChain is used if @HandlerChain is present on both.</p><p>The @HandlerChain annotation MAY be specified on the type only. The annotation target includes METHOD and FIELD for use by JAX-WS-2.0.</p></div></div></div></div></div></div></body></html>